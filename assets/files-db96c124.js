import{r as _,n as A,k as F}from"./index-d1fc1cc6.js";function L(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function N(e,t){A(e,1,1,()=>{t.delete(e.key)})}function O(e,t,s,c,u,d,l,g,$,M,p,W){let i=e.length,f=d.length,r=i;const y={};for(;r--;)y[e[r].key]=r;const w=[],m=new Map,S=new Map,v=[];for(r=f;r--;){const n=W(u,d,r),o=s(n);let a=l.get(o);a?c&&v.push(()=>a.p(n,t)):(a=M(o,n),a.c()),m.set(o,w[r]=a),o in y&&S.set(o,Math.abs(r-y[o]))}const I=new Set,b=new Set;function k(n){F(n,1),n.m(g,p),l.set(n.key,n),p=n.first,f--}for(;i&&f;){const n=w[f-1],o=e[i-1],a=n.key,h=o.key;n===o?(p=n.first,i--,f--):m.has(h)?!l.has(a)||I.has(a)?k(n):b.has(h)?i--:S.get(a)>S.get(h)?(b.add(a),k(n)):(I.add(h),i--):($(o,l),i--)}for(;i--;){const n=e[i];m.has(n.key)||$(n,l)}for(;f;)k(w[f-1]);return _(v),w}function R(e,t){try{window.localStorage.setItem(e,t)}catch(s){console.log(`Couldn't set local storage for ${e}: ${s}`),window.alert("Your changes couldn't be saved because you've run out of local storage. Please fix this problem on the next page and try again."),window.location.href="local_storage.html"}}function z(e,t){return`npw/${e}/${t}`}function B(e){let t=`npw/${e}/`,s=[];for(let c=0;c<window.localStorage.length;c++){let u=window.localStorage.key(c);if(u.startsWith(t)){let d=u.slice(t.length);if(d=="last-opened-file")continue;try{let l=JSON.parse(window.localStorage.getItem(u));s.push([d,x(l)])}catch{}}}return s.sort(),s}function C(){let e=new Map;for(let t=0;t<window.localStorage.length;t++){let s=window.localStorage.key(t);if(s.startsWith("npw/")&&!s.endsWith("/last-opened-file"))try{let c=JSON.parse(window.localStorage.getItem(s)||""),u=x(c),[d,l,g]=s.split("/");e.has(l)||e.set(l,[]),e.get(l).push([g,u])}catch{}}for(let t of e.values())t.sort();return e}function x(e){try{return`${e.features.length} routes`}catch{return"outdated file"}}function K(){let e=[];for(let t=0;t<window.localStorage.length;t++){let s=window.localStorage.key(t);e.push([s,window.localStorage.getItem(s).length])}return e.sort((t,s)=>s[1]-t[1]),e}export{B as a,L as e,z as g,C as l,K as m,N as o,R as s,O as u};
