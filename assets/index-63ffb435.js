import{S as me,i as he,s as $e,e as u,a as p,t as O,c as N,b as K,d as g,f as ge,g as v,h as r,j as oe,m as T,l as se,k as D,n as P,o as w,p as de,q as F,r as be,u as ve,v as we,w as Q,x as ke}from"./index-0f29db04.js";import{e as G}from"./each-bb0db7a7.js";import"./Modal.svelte_svelte_type_style_lang-14adb101.js";import{M as ye,m as Ce,c as re,l as Le,s as z,N as je,G as Ae,b as Se,F as Me,h as Ne,L as Te,a as De,P as Pe}from"./index-5146c3bf.js";import{l as Fe}from"./files-3b40347d.js";const He="/npw/assets/boundaries-2d4b0f31.geojson";function ie(s,l,t){const n=s.slice();return n[9]=l[t],n}function fe(s,l,t){const n=s.slice();return n[12]=l[t],n}function ce(s){let l;return{c(){l=u("b"),l.textContent="Warning: This is an experimental version"},m(t,n){v(t,l,n)},d(t){t&&w(l)}}}function ue(s){let l,t=s[12]+"",n,o;return{c(){l=u("option"),n=O(t),l.__value=o=s[12],K(l,l.__value)},m(e,a){v(e,l,a),r(l,n)},p(e,a){a&4&&t!==(t=e[12]+"")&&Q(n,t),a&4&&o!==(o=e[12])&&(l.__value=o,K(l,l.__value))},d(e){e&&w(l)}}}function pe(s){let l,t,n,o=G(s[3]),e=[];for(let a=0;a<o.length;a+=1)e[a]=_e(ie(s,o,a));return{c(){l=u("h3"),l.textContent="Recently used areas",t=p(),n=u("ul");for(let a=0;a<e.length;a+=1)e[a].c()},m(a,i){v(a,l,i),v(a,t,i),v(a,n,i);for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(n,null)},p(a,i){if(i&8){o=G(a[3]);let f;for(f=0;f<o.length;f+=1){const A=ie(a,o,f);e[f]?e[f].p(A,i):(e[f]=_e(A),e[f].c(),e[f].m(n,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=o.length}},d(a){a&&(w(l),w(t),w(n)),de(e,a)}}}function _e(s){let l,t,n=z(s[9],"LAD_")+"",o,e,a;return{c(){l=u("li"),t=u("a"),o=O(n),a=p(),g(t,"href",e=`npw.html?boundary=${s[9]}`)},m(i,f){v(i,l,f),r(l,t),r(t,o),r(l,a)},p(i,f){f&8&&n!==(n=z(i[9],"LAD_")+"")&&Q(o,n),f&8&&e!==(e=`npw.html?boundary=${i[9]}`)&&g(t,"href",e)},d(i){i&&w(l)}}}function Be(s){let l,t=s[8].name+"",n;return{c(){l=u("p"),n=O(t)},m(o,e){v(o,l,e),r(l,n)},p(o,e){e&256&&t!==(t=o[8].name+"")&&Q(n,t)},d(o){o&&w(l)}}}function Ie(s){let l,t;return l=new Pe({props:{openOn:"hover",$$slots:{default:[Be,({props:n})=>({8:n}),({props:n})=>n?256:0]},$$scope:{ctx:s}}}),{c(){N(l.$$.fragment)},m(n,o){T(l,n,o),t=!0},p(n,o){const e={};o&33024&&(e.$$scope={dirty:o,ctx:n}),l.$set(e)},i(n){t||(D(l.$$.fragment,n),t=!0)},o(n){P(l.$$.fragment,n),t=!1},d(n){F(l,n)}}}function Re(s){let l,t,n,o;return l=new Me({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Ne(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ie]},$$scope:{ctx:s}}}),l.$on("click",Ge),n=new Te({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){N(l.$$.fragment),t=p(),N(n.$$.fragment)},m(e,a){T(l,e,a),v(e,t,a),T(n,e,a),o=!0},p(e,a){const i={};a&32768&&(i.$$scope={dirty:a,ctx:e}),l.$set(i)},i(e){o||(D(l.$$.fragment,e),D(n.$$.fragment,e),o=!0)},o(e){P(l.$$.fragment,e),P(n.$$.fragment,e),o=!1},d(e){e&&w(t),F(l,e),F(n,e)}}}function We(s){let l,t,n,o;return l=new je({props:{showCompass:!1,position:"top-right"}}),n=new Ae({props:{data:s[0],generateId:!0,$$slots:{default:[Re]},$$scope:{ctx:s}}}),{c(){N(l.$$.fragment),t=p(),N(n.$$.fragment)},m(e,a){T(l,e,a),v(e,t,a),T(n,e,a),o=!0},p(e,a){const i={};a&1&&(i.data=e[0]),a&32768&&(i.$$scope={dirty:a,ctx:e}),n.$set(i)},i(e){o||(D(l.$$.fragment,e),D(n.$$.fragment,e),o=!0)},o(e){P(l.$$.fragment,e),P(n.$$.fragment,e),o=!1},d(e){e&&w(t),F(l,e),F(n,e)}}}function qe(s){let l,t,n,o,e,a,i,f,A,I,k,L,V,U,X,E,Y,S,h,H,Z,R,x,j,ee,W,te,le,q,y,B,J,ne,m=s[4]!="scotland"&&ce(),M=G(s[2]),_=[];for(let c=0;c<M.length;c+=1)_[c]=ue(fe(s,M,c));let d=s[3].length>0&&pe(s);return y=new ye({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${Ce}`,bounds:re[s[4]],$$slots:{default:[We]},$$scope:{ctx:s}}}),y.$on("error",s[7]),{c(){l=u("div"),t=u("div"),n=u("p"),n.innerHTML=`<a href="https://www.npt.scot/"><img src="${Le}" alt="NPT logo"/></a>`,o=p(),e=u("h1"),e.textContent="Network Planning Workspace",a=p(),m&&m.c(),i=p(),f=u("p"),f.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,A=p(),I=u("div"),I.innerHTML='<a href="credits.html">Credits</a>',k=p(),L=u("div"),L.innerHTML='<a href="manual.html">Manual</a>',V=p(),U=u("h3"),U.innerHTML='<label class="ds_label" for="component">Select an area</label>',X=p(),E=u("p"),E.textContent="Select your area from this list, or click on the map, to start.",Y=p(),S=u("div"),h=u("select"),H=u("option");for(let c=0;c<_.length;c+=1)_[c].c();Z=p(),R=u("span"),x=p(),j=u("button"),ee=O("Start"),te=p(),d&&d.c(),le=p(),q=u("div"),N(y.$$.fragment),H.__value="",K(H,H.__value),g(h,"class","ds_select"),g(h,"id","component"),g(h,"name","component"),s[1]===void 0&&ge(()=>s[5].call(h)),g(R,"class","ds_select-arrow"),g(R,"aria-hidden","true"),g(S,"class","ds_select-wrapper"),g(j,"class","ds_button"),j.disabled=W=s[1]=="",g(t,"class","controls svelte-m802nj"),g(q,"class","map svelte-m802nj"),g(l,"class","container svelte-m802nj")},m(c,b){v(c,l,b),r(l,t),r(t,n),r(t,o),r(t,e),r(t,a),m&&m.m(t,null),r(t,i),r(t,f),r(t,A),r(t,I),r(t,k),r(t,L),r(t,V),r(t,U),r(t,X),r(t,E),r(t,Y),r(t,S),r(S,h),r(h,H);for(let C=0;C<_.length;C+=1)_[C]&&_[C].m(h,null);oe(h,s[1],!0),r(S,Z),r(S,R),r(t,x),r(t,j),r(j,ee),r(t,te),d&&d.m(t,null),r(l,le),r(l,q),T(y,q,null),B=!0,J||(ne=[se(h,"change",s[5]),se(j,"click",s[6])],J=!0)},p(c,[b]){if(c[4]!="scotland"?m||(m=ce(),m.c(),m.m(t,i)):m&&(m.d(1),m=null),b&4){M=G(c[2]);let $;for($=0;$<M.length;$+=1){const ae=fe(c,M,$);_[$]?_[$].p(ae,b):(_[$]=ue(ae),_[$].c(),_[$].m(h,null))}for(;$<_.length;$+=1)_[$].d(1);_.length=M.length}b&6&&oe(h,c[1]),(!B||b&6&&W!==(W=c[1]==""))&&(j.disabled=W),c[3].length>0?d?d.p(c,b):(d=pe(c),d.c(),d.m(t,null)):d&&(d.d(1),d=null);const C={};b&16&&(C.bounds=re[c[4]]),b&32769&&(C.$$scope={dirty:b,ctx:c}),y.$set(C)},i(c){B||(D(y.$$.fragment,c),B=!0)},o(c){P(y.$$.fragment,c),B=!1},d(c){c&&w(l),m&&m.d(),de(_,c),d&&d.d(),F(y),J=!1,be(ne)}}}function Ge(s){let l=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${l.name}`}function Oe(s,l,t){let n;ve(s,De,k=>t(4,n=k));let o={type:"FeatureCollection",features:[]},e="",a=[],i=[...Fe().keys()];i.sort(),we(async()=>{window.DS.initAll();let k=await fetch({scotland:Se,england:He}[n]);t(0,o=await k.json());for(let L of o.features)a.push(L.properties.name);a.sort(),t(2,a),t(3,i=i.filter(L=>a.includes(z(L,"LAD_"))))});function f(){e=ke(this),t(1,e),t(2,a)}return[o,e,a,i,n,f,()=>window.location.href=`npw.html?boundary=LAD_${e}`,k=>{console.log(k.detail.error)}]}class Ue extends me{constructor(l){super(),he(this,l,Oe,qe,$e,{})}}new Ue({target:document.getElementById("app")});
