import{S as me,i as de,s as he,e as u,a as p,t as O,c as N,b as K,d as g,f as $e,g as b,h as r,j as oe,m as T,l as se,k as D,n as P,o as v,p as _e,q as F,r as ge,u as be,v as ve,w as Q,x as we}from"./index-0f29db04.js";import{e as G}from"./each-bb0db7a7.js";import"./Modal.svelte_svelte_type_style_lang-14adb101.js";import{M as ke,m as ye,l as Ce,s as z,N as Le,G as je,b as Ae,F as Se,h as Me,L as Ne,c as Te,P as De}from"./index-e2859f6a.js";import{l as Pe}from"./files-3b40347d.js";const Fe="/npw/assets/boundaries-2d4b0f31.geojson";function re(s,l,t){const n=s.slice();return n[9]=l[t],n}function ie(s,l,t){const n=s.slice();return n[12]=l[t],n}function ce(s){let l;return{c(){l=u("b"),l.textContent="Warning: This is an experimental version"},m(t,n){b(t,l,n)},d(t){t&&v(l)}}}function fe(s){let l,t=s[12]+"",n,o;return{c(){l=u("option"),n=O(t),l.__value=o=s[12],K(l,l.__value)},m(e,a){b(e,l,a),r(l,n)},p(e,a){a&4&&t!==(t=e[12]+"")&&Q(n,t),a&4&&o!==(o=e[12])&&(l.__value=o,K(l,l.__value))},d(e){e&&v(l)}}}function ue(s){let l,t,n,o=G(s[3]),e=[];for(let a=0;a<o.length;a+=1)e[a]=pe(re(s,o,a));return{c(){l=u("h3"),l.textContent="Recently used areas",t=p(),n=u("ul");for(let a=0;a<e.length;a+=1)e[a].c()},m(a,i){b(a,l,i),b(a,t,i),b(a,n,i);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(n,null)},p(a,i){if(i&8){o=G(a[3]);let c;for(c=0;c<o.length;c+=1){const A=re(a,o,c);e[c]?e[c].p(A,i):(e[c]=pe(A),e[c].c(),e[c].m(n,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=o.length}},d(a){a&&(v(l),v(t),v(n)),_e(e,a)}}}function pe(s){let l,t,n=z(s[9],"LAD_")+"",o,e,a;return{c(){l=u("li"),t=u("a"),o=O(n),a=p(),g(t,"href",e=`npw.html?boundary=${s[9]}`)},m(i,c){b(i,l,c),r(l,t),r(t,o),r(l,a)},p(i,c){c&8&&n!==(n=z(i[9],"LAD_")+"")&&Q(o,n),c&8&&e!==(e=`npw.html?boundary=${i[9]}`)&&g(t,"href",e)},d(i){i&&v(l)}}}function He(s){let l,t=s[8].name+"",n;return{c(){l=u("p"),n=O(t)},m(o,e){b(o,l,e),r(l,n)},p(o,e){e&256&&t!==(t=o[8].name+"")&&Q(n,t)},d(o){o&&v(l)}}}function Ie(s){let l,t;return l=new De({props:{openOn:"hover",$$slots:{default:[He,({props:n})=>({8:n}),({props:n})=>n?256:0]},$$scope:{ctx:s}}}),{c(){N(l.$$.fragment)},m(n,o){T(l,n,o),t=!0},p(n,o){const e={};o&33024&&(e.$$scope={dirty:o,ctx:n}),l.$set(e)},i(n){t||(D(l.$$.fragment,n),t=!0)},o(n){P(l.$$.fragment,n),t=!1},d(n){F(l,n)}}}function Be(s){let l,t,n,o;return l=new Se({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Me(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ie]},$$scope:{ctx:s}}}),l.$on("click",qe),n=new Ne({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){N(l.$$.fragment),t=p(),N(n.$$.fragment)},m(e,a){T(l,e,a),b(e,t,a),T(n,e,a),o=!0},p(e,a){const i={};a&32768&&(i.$$scope={dirty:a,ctx:e}),l.$set(i)},i(e){o||(D(l.$$.fragment,e),D(n.$$.fragment,e),o=!0)},o(e){P(l.$$.fragment,e),P(n.$$.fragment,e),o=!1},d(e){e&&v(t),F(l,e),F(n,e)}}}function Re(s){let l,t,n,o;return l=new Le({props:{showCompass:!1,position:"top-right"}}),n=new je({props:{data:s[0],generateId:!0,$$slots:{default:[Be]},$$scope:{ctx:s}}}),{c(){N(l.$$.fragment),t=p(),N(n.$$.fragment)},m(e,a){T(l,e,a),b(e,t,a),T(n,e,a),o=!0},p(e,a){const i={};a&1&&(i.data=e[0]),a&32768&&(i.$$scope={dirty:a,ctx:e}),n.$set(i)},i(e){o||(D(l.$$.fragment,e),D(n.$$.fragment,e),o=!0)},o(e){P(l.$$.fragment,e),P(n.$$.fragment,e),o=!1},d(e){e&&v(t),F(l,e),F(n,e)}}}function We(s){let l,t,n,o,e,a,i,c,A,B,k,C,V,U,X,E,Y,S,h,H,Z,R,x,L,ee,W,te,le,q,y,I,J,ne,d=s[4]!="scotland"&&ce(),M=G(s[2]),_=[];for(let f=0;f<M.length;f+=1)_[f]=fe(ie(s,M,f));let m=s[3].length>0&&ue(s);return y=new ke({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${ye}`,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[Re]},$$scope:{ctx:s}}}),y.$on("error",s[7]),{c(){l=u("div"),t=u("div"),n=u("p"),n.innerHTML=`<a href="https://www.npt.scot/"><img src="${Ce}" alt="NPT logo"/></a>`,o=p(),e=u("h1"),e.textContent="Network Planning Workspace",a=p(),d&&d.c(),i=p(),c=u("p"),c.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,A=p(),B=u("div"),B.innerHTML='<a href="credits.html">Credits</a>',k=p(),C=u("div"),C.innerHTML='<a href="manual.html">Manual</a>',V=p(),U=u("h3"),U.innerHTML='<label class="ds_label" for="component">Select an area</label>',X=p(),E=u("p"),E.textContent="Select your area from this list, or click on the map, to start.",Y=p(),S=u("div"),h=u("select"),H=u("option");for(let f=0;f<_.length;f+=1)_[f].c();Z=p(),R=u("span"),x=p(),L=u("button"),ee=O("Start"),te=p(),m&&m.c(),le=p(),q=u("div"),N(y.$$.fragment),H.__value="",K(H,H.__value),g(h,"class","ds_select"),g(h,"id","component"),g(h,"name","component"),s[1]===void 0&&$e(()=>s[5].call(h)),g(R,"class","ds_select-arrow"),g(R,"aria-hidden","true"),g(S,"class","ds_select-wrapper"),g(L,"class","ds_button"),L.disabled=W=s[1]=="",g(t,"class","controls svelte-m802nj"),g(q,"class","map svelte-m802nj"),g(l,"class","container svelte-m802nj")},m(f,w){b(f,l,w),r(l,t),r(t,n),r(t,o),r(t,e),r(t,a),d&&d.m(t,null),r(t,i),r(t,c),r(t,A),r(t,B),r(t,k),r(t,C),r(t,V),r(t,U),r(t,X),r(t,E),r(t,Y),r(t,S),r(S,h),r(h,H);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(h,null);oe(h,s[1],!0),r(S,Z),r(S,R),r(t,x),r(t,L),r(L,ee),r(t,te),m&&m.m(t,null),r(l,le),r(l,q),T(y,q,null),I=!0,J||(ne=[se(h,"change",s[5]),se(L,"click",s[6])],J=!0)},p(f,[w]){if(f[4]!="scotland"?d||(d=ce(),d.c(),d.m(t,i)):d&&(d.d(1),d=null),w&4){M=G(f[2]);let $;for($=0;$<M.length;$+=1){const ae=ie(f,M,$);_[$]?_[$].p(ae,w):(_[$]=fe(ae),_[$].c(),_[$].m(h,null))}for(;$<_.length;$+=1)_[$].d(1);_.length=M.length}w&6&&oe(h,f[1]),(!I||w&6&&W!==(W=f[1]==""))&&(L.disabled=W),f[3].length>0?m?m.p(f,w):(m=ue(f),m.c(),m.m(t,null)):m&&(m.d(1),m=null);const j={};w&32769&&(j.$$scope={dirty:w,ctx:f}),y.$set(j)},i(f){I||(D(y.$$.fragment,f),I=!0)},o(f){P(y.$$.fragment,f),I=!1},d(f){f&&v(l),d&&d.d(),_e(_,f),m&&m.d(),F(y),J=!1,ge(ne)}}}function qe(s){let l=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${l.name}`}function Ge(s,l,t){let n;be(s,Te,k=>t(4,n=k));let o={type:"FeatureCollection",features:[]},e="",a=[],i=[...Pe().keys()];i.sort(),ve(async()=>{window.DS.initAll();let k=await fetch({scotland:Ae,england:Fe}[n]);t(0,o=await k.json());for(let C of o.features)a.push(C.properties.name);a.sort(),t(2,a),t(3,i=i.filter(C=>a.includes(z(C,"LAD_"))))});function c(){e=we(this),t(1,e),t(2,a)}return[o,e,a,i,n,c,()=>window.location.href=`npw.html?boundary=LAD_${e}`,k=>{console.log(k.detail.error)}]}class Oe extends me{constructor(l){super(),de(this,l,Ge,We,he,{})}}new Oe({target:document.getElementById("app")});
