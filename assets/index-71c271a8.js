import{S as ce,i as fe,s as pe,e as p,a as _,t as G,c as A,b as J,d as h,f as ue,g,h as r,j as te,m as M,l as le,k as N,n as P,o as v,p as re,q as T,r as _e,u as me,v as ie,w as de,x as he}from"./index-2a520af6.js";import{e as B,l as $e}from"./files-e6784ff4.js";import"./Modal.svelte_svelte_type_style_lang-14adb101.js";import{M as ge,m as ve,l as be,s as we,N as ke,G as ye,F as Ce,h as Le,L as je,P as Se}from"./index-47719456.js";const Ae="/npw/assets/boundaries-c02eb905.geojson";function ne(s,t,l){const n=s.slice();return n[8]=t[l],n}function ae(s,t,l){const n=s.slice();return n[11]=t[l],n}function oe(s){let t,l=s[11]+"",n,o;return{c(){t=p("option"),n=G(l),t.__value=o=s[11],J(t,t.__value)},m(e,a){g(e,t,a),r(t,n)},p(e,a){a&4&&l!==(l=e[11]+"")&&ie(n,l),a&4&&o!==(o=e[11])&&(t.__value=o,J(t,t.__value))},d(e){e&&v(t)}}}function Me(s){let t,l,n,o=B(s[3]),e=[];for(let a=0;a<o.length;a+=1)e[a]=se(ne(s,o,a));return{c(){t=p("h3"),t.textContent="Recently used areas",l=_(),n=p("ul");for(let a=0;a<e.length;a+=1)e[a].c()},m(a,c){g(a,t,c),g(a,l,c),g(a,n,c);for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(n,null)},p(a,c){if(c&8){o=B(a[3]);let f;for(f=0;f<o.length;f+=1){const w=ne(a,o,f);e[f]?e[f].p(w,c):(e[f]=se(w),e[f].c(),e[f].m(n,null))}for(;f<e.length;f+=1)e[f].d(1);e.length=o.length}},d(a){a&&(v(t),v(l),v(n)),re(e,a)}}}function se(s){let t,l,n=we(s[8],"LAD_")+"",o,e;return{c(){t=p("li"),l=p("a"),o=G(n),e=_(),h(l,"href",`npw.html?boundary=${s[8]}`)},m(a,c){g(a,t,c),r(t,l),r(l,o),r(t,e)},p:de,d(a){a&&v(t)}}}function Ne(s){let t,l=s[7].name+"",n;return{c(){t=p("p"),n=G(l)},m(o,e){g(o,t,e),r(t,n)},p(o,e){e&128&&l!==(l=o[7].name+"")&&ie(n,l)},d(o){o&&v(t)}}}function Pe(s){let t,l;return t=new Se({props:{openOn:"hover",$$slots:{default:[Ne,({props:n})=>({7:n}),({props:n})=>n?128:0]},$$scope:{ctx:s}}}),{c(){A(t.$$.fragment)},m(n,o){M(t,n,o),l=!0},p(n,o){const e={};o&16512&&(e.$$scope={dirty:o,ctx:n}),t.$set(e)},i(n){l||(N(t.$$.fragment,n),l=!0)},o(n){P(t.$$.fragment,n),l=!1},d(n){T(t,n)}}}function Te(s){let t,l,n,o;return t=new Ce({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Le(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Pe]},$$scope:{ctx:s}}}),t.$on("click",De),n=new je({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){A(t.$$.fragment),l=_(),A(n.$$.fragment)},m(e,a){M(t,e,a),g(e,l,a),M(n,e,a),o=!0},p(e,a){const c={};a&16384&&(c.$$scope={dirty:a,ctx:e}),t.$set(c)},i(e){o||(N(t.$$.fragment,e),N(n.$$.fragment,e),o=!0)},o(e){P(t.$$.fragment,e),P(n.$$.fragment,e),o=!1},d(e){e&&v(l),T(t,e),T(n,e)}}}function Fe(s){let t,l,n,o;return t=new ke({props:{showCompass:!1,position:"top-right"}}),n=new ye({props:{data:s[0],generateId:!0,$$slots:{default:[Te]},$$scope:{ctx:s}}}),{c(){A(t.$$.fragment),l=_(),A(n.$$.fragment)},m(e,a){M(t,e,a),g(e,l,a),M(n,e,a),o=!0},p(e,a){const c={};a&1&&(c.data=e[0]),a&16384&&(c.$$scope={dirty:a,ctx:e}),n.$set(c)},i(e){o||(N(t.$$.fragment,e),N(n.$$.fragment,e),o=!0)},o(e){P(t.$$.fragment,e),P(n.$$.fragment,e),o=!1},d(e){e&&v(l),T(t,e),T(n,e)}}}function He(s){let t,l,n,o,e,a,c,f,w,L,F,K,O,U,W,z,j,m,H,Q,I,V,k,X,R,Y,Z,q,b,D,E,x,S=B(s[2]),u=[];for(let i=0;i<S.length;i+=1)u[i]=oe(ae(s,S,i));let y=s[3].length>0&&Me(s);return b=new ge({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${ve}`,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[Fe]},$$scope:{ctx:s}}}),b.$on("error",s[6]),{c(){t=p("div"),l=p("div"),n=p("p"),n.innerHTML=`<a href="https://www.npt.scot/"><img src="${be}" alt="NPT logo"/></a>`,o=_(),e=p("h1"),e.textContent="Network Planning Workspace",a=_(),c=p("p"),c.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,f=_(),w=p("div"),w.innerHTML='<a href="credits.html">Credits</a>',L=_(),F=p("div"),F.innerHTML='<a href="manual.html">Manual</a>',K=_(),O=p("h3"),O.innerHTML='<label class="ds_label" for="component">Select an area</label>',U=_(),W=p("p"),W.textContent="Select your area from this list, or click on the map, to start.",z=_(),j=p("div"),m=p("select"),H=p("option");for(let i=0;i<u.length;i+=1)u[i].c();Q=_(),I=p("span"),V=_(),k=p("button"),X=G("Start"),Y=_(),y&&y.c(),Z=_(),q=p("div"),A(b.$$.fragment),H.__value="",J(H,H.__value),h(m,"class","ds_select"),h(m,"id","component"),h(m,"name","component"),s[1]===void 0&&ue(()=>s[4].call(m)),h(I,"class","ds_select-arrow"),h(I,"aria-hidden","true"),h(j,"class","ds_select-wrapper"),h(k,"class","ds_button"),k.disabled=R=s[1]=="",h(l,"class","controls svelte-m802nj"),h(q,"class","map svelte-m802nj"),h(t,"class","container svelte-m802nj")},m(i,$){g(i,t,$),r(t,l),r(l,n),r(l,o),r(l,e),r(l,a),r(l,c),r(l,f),r(l,w),r(l,L),r(l,F),r(l,K),r(l,O),r(l,U),r(l,W),r(l,z),r(l,j),r(j,m),r(m,H);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(m,null);te(m,s[1],!0),r(j,Q),r(j,I),r(l,V),r(l,k),r(k,X),r(l,Y),y&&y.m(l,null),r(t,Z),r(t,q),M(b,q,null),D=!0,E||(x=[le(m,"change",s[4]),le(k,"click",s[5])],E=!0)},p(i,[$]){if($&4){S=B(i[2]);let d;for(d=0;d<S.length;d+=1){const ee=ae(i,S,d);u[d]?u[d].p(ee,$):(u[d]=oe(ee),u[d].c(),u[d].m(m,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=S.length}$&6&&te(m,i[1]),(!D||$&6&&R!==(R=i[1]==""))&&(k.disabled=R),i[3].length>0&&y.p(i,$);const C={};$&16385&&(C.$$scope={dirty:$,ctx:i}),b.$set(C)},i(i){D||(N(b.$$.fragment,i),D=!0)},o(i){P(b.$$.fragment,i),D=!1},d(i){i&&v(t),re(u,i),y&&y.d(),T(b),E=!1,_e(x)}}}function De(s){let t=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${t.name}`}function Ie(s,t,l){let n={type:"FeatureCollection",features:[]},o="",e=[],a=[...$e().keys()];a.sort(),me(async()=>{window.DS.initAll();let L=await fetch(Ae);l(0,n=await L.json());for(let F of n.features)e.push(F.properties.name);e.sort(),l(2,e)});function c(){o=he(this),l(1,o),l(2,e)}return[n,o,e,a,c,()=>window.location.href=`npw.html?boundary=LAD_${o}`,L=>{console.log(L.detail.error)}]}class Re extends ce{constructor(t){super(),fe(this,t,Ie,He,pe,{})}}new Re({target:document.getElementById("app")});
