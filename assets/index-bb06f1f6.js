import{S as be,i as ve,s as we,e as u,a as p,c as S,t as G,b as m,d as Q,f as ke,g as r,h as w,m as M,j as fe,l as ce,k as N,n as T,o as b,p as B,q as ge,r as ye,u as Ce,v as Le,w as X,x as je}from"./index-411e9197.js";import{e as q}from"./each-3bd9ff9f.js";import{f as Ae}from"./Modal.svelte_svelte_type_style_lang-84866f51.js";import{B as Se,M as Me,m as Ne,c as ue,l as Te,s as V,N as Be,G as De,b as Pe,F as Fe,h as He,L as Ie,a as Re,P as We}from"./index-bf07c4f1.js";import{l as qe}from"./files-3b40347d.js";const Ge="/npw/assets/boundaries-2d4b0f31.geojson";function pe(s,t,a){const n=s.slice();return n[9]=t[a],n}function _e(s,t,a){const n=s.slice();return n[12]=t[a],n}function me(s){let t;return{c(){t=u("b"),t.textContent="Warning: This is an experimental version"},m(a,n){w(a,t,n)},d(a){a&&b(t)}}}function de(s){let t,a=s[12]+"",n,l;return{c(){t=u("option"),n=G(a),t.__value=l=s[12],Q(t,t.__value)},m(e,o){w(e,t,o),r(t,n)},p(e,o){o&4&&a!==(a=e[12]+"")&&X(n,a),o&4&&l!==(l=e[12])&&(t.__value=l,Q(t,t.__value))},d(e){e&&b(t)}}}function he(s){let t,a,n,l=q(s[3]),e=[];for(let o=0;o<l.length;o+=1)e[o]=$e(pe(s,l,o));return{c(){t=u("h3"),t.textContent="Recently used areas",a=p(),n=u("ul");for(let o=0;o<e.length;o+=1)e[o].c()},m(o,i){w(o,t,i),w(o,a,i),w(o,n,i);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(n,null)},p(o,i){if(i&8){l=q(o[3]);let c;for(c=0;c<l.length;c+=1){const L=pe(o,l,c);e[c]?e[c].p(L,i):(e[c]=$e(L),e[c].c(),e[c].m(n,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=l.length}},d(o){o&&(b(t),b(a),b(n)),ge(e,o)}}}function $e(s){let t,a,n=V(s[9],"LAD_")+"",l,e,o;return{c(){t=u("li"),a=u("a"),l=G(n),o=p(),m(a,"href",e=`npw.html?boundary=${s[9]}`)},m(i,c){w(i,t,c),r(t,a),r(a,l),r(t,o)},p(i,c){c&8&&n!==(n=V(i[9],"LAD_")+"")&&X(l,n),c&8&&e!==(e=`npw.html?boundary=${i[9]}`)&&m(a,"href",e)},d(i){i&&b(t)}}}function Oe(s){let t,a=s[8].name+"",n;return{c(){t=u("p"),n=G(a)},m(l,e){w(l,t,e),r(t,n)},p(l,e){e&256&&a!==(a=l[8].name+"")&&X(n,a)},d(l){l&&b(t)}}}function Ue(s){let t,a;return t=new We({props:{openOn:"hover",$$slots:{default:[Oe,({props:n})=>({8:n}),({props:n})=>n?256:0]},$$scope:{ctx:s}}}),{c(){S(t.$$.fragment)},m(n,l){M(t,n,l),a=!0},p(n,l){const e={};l&33024&&(e.$$scope={dirty:l,ctx:n}),t.$set(e)},i(n){a||(N(t.$$.fragment,n),a=!0)},o(n){T(t.$$.fragment,n),a=!1},d(n){B(t,n)}}}function Ee(s){let t,a,n,l;return t=new Fe({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":He(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ue]},$$scope:{ctx:s}}}),t.$on("click",ze),n=new Ie({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){S(t.$$.fragment),a=p(),S(n.$$.fragment)},m(e,o){M(t,e,o),w(e,a,o),M(n,e,o),l=!0},p(e,o){const i={};o&32768&&(i.$$scope={dirty:o,ctx:e}),t.$set(i)},i(e){l||(N(t.$$.fragment,e),N(n.$$.fragment,e),l=!0)},o(e){T(t.$$.fragment,e),T(n.$$.fragment,e),l=!1},d(e){e&&b(a),B(t,e),B(n,e)}}}function Je(s){let t,a,n,l;return t=new Be({props:{showCompass:!1,position:"top-right"}}),n=new De({props:{data:s[0],generateId:!0,$$slots:{default:[Ee]},$$scope:{ctx:s}}}),{c(){S(t.$$.fragment),a=p(),S(n.$$.fragment)},m(e,o){M(t,e,o),w(e,a,o),M(n,e,o),l=!0},p(e,o){const i={};o&1&&(i.data=e[0]),o&32768&&(i.$$scope={dirty:o,ctx:e}),n.$set(i)},i(e){l||(N(t.$$.fragment,e),N(n.$$.fragment,e),l=!0)},o(e){T(t.$$.fragment,e),T(n.$$.fragment,e),l=!1},d(e){e&&b(a),B(t,e),B(n,e)}}}function Ke(s){let t,a,n,l,e,o,i,c,L,O,k,j,Y,U,Z,E,x,J,ee,K,te,D,$,F,le,I,ne,A,ae,R,oe,se,W,y,H,z,re;i=new Se({});let h=s[4]!="scotland"&&me(),P=q(s[2]),_=[];for(let f=0;f<P.length;f+=1)_[f]=de(_e(s,P,f));let d=s[3].length>0&&he(s);return y=new Me({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${Ne}`,bounds:ue[s[4]],$$slots:{default:[Je]},$$scope:{ctx:s}}}),y.$on("error",s[7]),{c(){t=u("link"),a=p(),n=u("div"),l=u("div"),e=u("p"),e.innerHTML=`<a href="https://www.npt.scot/"><img src="${Te}" alt="NPT logo"/></a>`,o=p(),S(i.$$.fragment),c=p(),L=u("h1"),L.textContent="Network Planning Workspace",O=p(),h&&h.c(),k=p(),j=u("p"),j.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,Y=p(),U=u("div"),U.innerHTML='<a href="credits.html">Credits</a>',Z=p(),E=u("div"),E.innerHTML='<a href="manual.html">Manual</a>',x=p(),J=u("h3"),J.innerHTML='<label class="ds_label" for="component">Select an area</label>',ee=p(),K=u("p"),K.textContent="Select your area from this list, or click on the map, to start.",te=p(),D=u("div"),$=u("select"),F=u("option");for(let f=0;f<_.length;f+=1)_[f].c();le=p(),I=u("span"),ne=p(),A=u("button"),ae=G("Start"),oe=p(),d&&d.c(),se=p(),W=u("div"),S(y.$$.fragment),m(t,"rel","icon"),m(t,"type","image/x-icon"),m(t,"href",Ae),F.__value="",Q(F,F.__value),m($,"class","ds_select"),m($,"id","component"),m($,"name","component"),s[1]===void 0&&ke(()=>s[5].call($)),m(I,"class","ds_select-arrow"),m(I,"aria-hidden","true"),m(D,"class","ds_select-wrapper"),m(A,"class","ds_button"),A.disabled=R=s[1]=="",m(l,"class","controls svelte-m802nj"),m(W,"class","map svelte-m802nj"),m(n,"class","container svelte-m802nj")},m(f,v){r(document.head,t),w(f,a,v),w(f,n,v),r(n,l),r(l,e),r(l,o),M(i,l,null),r(l,c),r(l,L),r(l,O),h&&h.m(l,null),r(l,k),r(l,j),r(l,Y),r(l,U),r(l,Z),r(l,E),r(l,x),r(l,J),r(l,ee),r(l,K),r(l,te),r(l,D),r(D,$),r($,F);for(let C=0;C<_.length;C+=1)_[C]&&_[C].m($,null);fe($,s[1],!0),r(D,le),r(D,I),r(l,ne),r(l,A),r(A,ae),r(l,oe),d&&d.m(l,null),r(n,se),r(n,W),M(y,W,null),H=!0,z||(re=[ce($,"change",s[5]),ce(A,"click",s[6])],z=!0)},p(f,[v]){if(f[4]!="scotland"?h||(h=me(),h.c(),h.m(l,k)):h&&(h.d(1),h=null),v&4){P=q(f[2]);let g;for(g=0;g<P.length;g+=1){const ie=_e(f,P,g);_[g]?_[g].p(ie,v):(_[g]=de(ie),_[g].c(),_[g].m($,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=P.length}v&6&&fe($,f[1]),(!H||v&6&&R!==(R=f[1]==""))&&(A.disabled=R),f[3].length>0?d?d.p(f,v):(d=he(f),d.c(),d.m(l,null)):d&&(d.d(1),d=null);const C={};v&16&&(C.bounds=ue[f[4]]),v&32769&&(C.$$scope={dirty:v,ctx:f}),y.$set(C)},i(f){H||(N(i.$$.fragment,f),N(y.$$.fragment,f),H=!0)},o(f){T(i.$$.fragment,f),T(y.$$.fragment,f),H=!1},d(f){f&&(b(a),b(n)),b(t),B(i),h&&h.d(),ge(_,f),d&&d.d(),B(y),z=!1,ye(re)}}}function ze(s){let t=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${t.name}`}function Qe(s,t,a){let n;Ce(s,Re,k=>a(4,n=k));let l={type:"FeatureCollection",features:[]},e="",o=[],i=[...qe().keys()];i.sort(),Le(async()=>{window.DS.initAll();let k=await fetch({scotland:Pe,england:Ge}[n]);a(0,l=await k.json());for(let j of l.features)o.push(j.properties.name);o.sort(),a(2,o),a(3,i=i.filter(j=>o.includes(V(j,"LAD_"))))});function c(){e=je(this),a(1,e),a(2,o)}return[l,e,o,i,n,c,()=>window.location.href=`npw.html?boundary=LAD_${e}`,k=>{console.log(k.detail.error)}]}class Ve extends be{constructor(t){super(),ve(this,t,Qe,Ke,we,{})}}new Ve({target:document.getElementById("app")});
