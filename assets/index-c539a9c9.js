import{S as re,i as ie,s as ce,e as f,a as _,t as G,c as A,b as $,d as E,f as pe,g,h as r,j as x,m as N,l as ee,k as P,n as F,o as v,p as ae,q as M,r as fe,u as ue,v as se,w as _e,x as me}from"./index-36380ea8.js";import{e as B,l as de}from"./files-61b7e360.js";import"./design-system-57630050.js";import{M as $e,m as he,l as ge,s as ve,N as be,G as we,F as ke,h as ye,L as Ce,P as je}from"./index-e62db2ef.js";const Le="/npw/assets/boundaries-c02eb905.geojson";function te(s,t,l){const n=s.slice();return n[8]=t[l],n}function le(s,t,l){const n=s.slice();return n[11]=t[l],n}function ne(s){let t,l=s[11]+"",n,a;return{c(){t=f("option"),n=G(l),t.__value=a=s[11],E(t,t.__value)},m(e,o){g(e,t,o),r(t,n)},p(e,o){o&4&&l!==(l=e[11]+"")&&se(n,l),o&4&&a!==(a=e[11])&&(t.__value=a,E(t,t.__value))},d(e){e&&v(t)}}}function Se(s){let t,l,n,a=B(s[3]),e=[];for(let o=0;o<a.length;o+=1)e[o]=oe(te(s,a,o));return{c(){t=f("h3"),t.textContent="Recently used areas",l=_(),n=f("ul");for(let o=0;o<e.length;o+=1)e[o].c()},m(o,c){g(o,t,c),g(o,l,c),g(o,n,c);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(n,null)},p(o,c){if(c&8){a=B(o[3]);let p;for(p=0;p<a.length;p+=1){const b=te(o,a,p);e[p]?e[p].p(b,c):(e[p]=oe(b),e[p].c(),e[p].m(n,null))}for(;p<e.length;p+=1)e[p].d(1);e.length=a.length}},d(o){o&&(v(t),v(l),v(n)),ae(e,o)}}}function oe(s){let t,l,n=ve(s[8],"LAD_")+"",a,e;return{c(){t=f("li"),l=f("a"),a=G(n),e=_(),$(l,"href",`npw.html?boundary=${s[8]}`)},m(o,c){g(o,t,c),r(t,l),r(l,a),r(t,e)},p:_e,d(o){o&&v(t)}}}function Ae(s){let t,l=s[7].name+"",n;return{c(){t=f("p"),n=G(l)},m(a,e){g(a,t,e),r(t,n)},p(a,e){e&128&&l!==(l=a[7].name+"")&&se(n,l)},d(a){a&&v(t)}}}function Ne(s){let t,l;return t=new je({props:{openOn:"hover",$$slots:{default:[Ae,({props:n})=>({7:n}),({props:n})=>n?128:0]},$$scope:{ctx:s}}}),{c(){A(t.$$.fragment)},m(n,a){N(t,n,a),l=!0},p(n,a){const e={};a&16512&&(e.$$scope={dirty:a,ctx:n}),t.$set(e)},i(n){l||(P(t.$$.fragment,n),l=!0)},o(n){F(t.$$.fragment,n),l=!1},d(n){M(t,n)}}}function Pe(s){let t,l,n,a;return t=new ke({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":ye(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Ne]},$$scope:{ctx:s}}}),t.$on("click",De),n=new Ce({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){A(t.$$.fragment),l=_(),A(n.$$.fragment)},m(e,o){N(t,e,o),g(e,l,o),N(n,e,o),a=!0},p(e,o){const c={};o&16384&&(c.$$scope={dirty:o,ctx:e}),t.$set(c)},i(e){a||(P(t.$$.fragment,e),P(n.$$.fragment,e),a=!0)},o(e){F(t.$$.fragment,e),F(n.$$.fragment,e),a=!1},d(e){e&&v(l),M(t,e),M(n,e)}}}function Fe(s){let t,l,n,a;return t=new be({props:{showCompass:!1,position:"top-right"}}),n=new we({props:{data:s[0],generateId:!0,$$slots:{default:[Pe]},$$scope:{ctx:s}}}),{c(){A(t.$$.fragment),l=_(),A(n.$$.fragment)},m(e,o){N(t,e,o),g(e,l,o),N(n,e,o),a=!0},p(e,o){const c={};o&1&&(c.data=e[0]),o&16384&&(c.$$scope={dirty:o,ctx:e}),n.$set(c)},i(e){a||(P(t.$$.fragment,e),P(n.$$.fragment,e),a=!0)},o(e){F(t.$$.fragment,e),F(n.$$.fragment,e),a=!1},d(e){e&&v(l),M(t,e),M(n,e)}}}function Me(s){let t,l,n,a,e,o,c,p,b,j,D,J,O,K,L,m,I,U,H,z,k,Q,R,V,X,q,w,T,W,Y,S=B(s[2]),u=[];for(let i=0;i<S.length;i+=1)u[i]=ne(le(s,S,i));let y=s[3].length>0&&Se(s);return w=new $e({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${he}`,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[Fe]},$$scope:{ctx:s}}}),w.$on("error",s[6]),{c(){t=f("div"),l=f("div"),n=f("p"),n.innerHTML=`<a href="https://www.npt.scot/"><img src="${ge}" alt="NPT logo"/></a>`,a=_(),e=f("h1"),e.textContent="Network Planning Workspace",o=_(),c=f("p"),c.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,p=_(),b=f("a"),b.textContent="Credits",j=_(),D=f("h3"),D.innerHTML='<label class="ds_label" for="component">Select an area</label>',J=_(),O=f("p"),O.textContent="Select your area from this list, or click on the map, to start.",K=_(),L=f("div"),m=f("select"),I=f("option");for(let i=0;i<u.length;i+=1)u[i].c();U=_(),H=f("span"),z=_(),k=f("button"),Q=G("Start"),V=_(),y&&y.c(),X=_(),q=f("div"),A(w.$$.fragment),$(b,"href","credits.html"),I.__value="",E(I,I.__value),$(m,"class","ds_select"),$(m,"id","component"),$(m,"name","component"),s[1]===void 0&&pe(()=>s[4].call(m)),$(H,"class","ds_select-arrow"),$(H,"aria-hidden","true"),$(L,"class","ds_select-wrapper"),$(k,"class","ds_button"),k.disabled=R=s[1]=="",$(l,"class","controls svelte-m802nj"),$(q,"class","map svelte-m802nj"),$(t,"class","container svelte-m802nj")},m(i,h){g(i,t,h),r(t,l),r(l,n),r(l,a),r(l,e),r(l,o),r(l,c),r(l,p),r(l,b),r(l,j),r(l,D),r(l,J),r(l,O),r(l,K),r(l,L),r(L,m),r(m,I);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(m,null);x(m,s[1],!0),r(L,U),r(L,H),r(l,z),r(l,k),r(k,Q),r(l,V),y&&y.m(l,null),r(t,X),r(t,q),N(w,q,null),T=!0,W||(Y=[ee(m,"change",s[4]),ee(k,"click",s[5])],W=!0)},p(i,[h]){if(h&4){S=B(i[2]);let d;for(d=0;d<S.length;d+=1){const Z=le(i,S,d);u[d]?u[d].p(Z,h):(u[d]=ne(Z),u[d].c(),u[d].m(m,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=S.length}h&6&&x(m,i[1]),(!T||h&6&&R!==(R=i[1]==""))&&(k.disabled=R),i[3].length>0&&y.p(i,h);const C={};h&16385&&(C.$$scope={dirty:h,ctx:i}),w.$set(C)},i(i){T||(P(w.$$.fragment,i),T=!0)},o(i){F(w.$$.fragment,i),T=!1},d(i){i&&v(t),ae(u,i),y&&y.d(),M(w),W=!1,fe(Y)}}}function De(s){let t=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${t.name}`}function Ie(s,t,l){let n={type:"FeatureCollection",features:[]},a="",e=[],o=[...de().keys()];o.sort(),ue(async()=>{window.DS.initAll();let j=await fetch(Le);l(0,n=await j.json());for(let D of n.features)e.push(D.properties.name);e.sort(),l(2,e)});function c(){a=me(this),l(1,a),l(2,e)}return[n,a,e,o,c,()=>window.location.href=`npw.html?boundary=LAD_${a}`,j=>{console.log(j.detail.error)}]}class Te extends re{constructor(t){super(),ie(this,t,Ie,Me,ce,{})}}new Te({target:document.getElementById("app")});
