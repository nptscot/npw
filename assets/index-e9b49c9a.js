var Ar=Object.defineProperty;var Wr=(n,e,t)=>e in n?Ar(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fn=(n,e,t)=>(Wr(n,typeof e!="symbol"?e+"":e,t),t);import{X as kt,s as Le,aa as qi,ab as Qi,S as Te,i as Oe,V as Ht,h as X,k as H,B as lt,n as q,C as at,o as J,M as kn,u as he,N as it,U as et,H as ut,I as ct,J as dt,K as ft,E as Mt,F as xn,c as Ye,m as Xe,G as Mn,p as Je,L as Ae,ac as zr,a3 as vt,e as Ie,b as tt,$ as Dn,Z as Un,l as At,P as Fr,r as Vi,a as Fe,W as Dr,v as Ur,g as Hr,Q as Br}from"./index-411e9197.js";import{m as De,a as Zr,q as Gr}from"./Modal.svelte_svelte_type_style_lang-84866f51.js";import{s as jr,g as qr}from"./files-3b40347d.js";const Qr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,wt=[];function fn(n,e){return{subscribe:R(n,e).subscribe}}function R(n,e=kt){let t;const i=new Set;function r(s){if(Le(n,s)&&(n=s,t)){const a=!wt.length;for(const u of i)u[1](),wt.push(u,n);if(a){for(let u=0;u<wt.length;u+=2)wt[u][0](wt[u+1]);wt.length=0}}}function o(s){r(s(n))}function l(s,a=kt){const u=[s,a];return i.add(u),i.size===1&&(t=e(r,o)||kt),s(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:r,update:o,subscribe:l}}let Vr=Date.now();function rn(n){return`${n}-${Vr++}`}const Nn=Symbol.for("svelte-maplibre");function Bt(){return Qi(Nn)}function Kr(n){let e=new WeakMap;return t=>{var l;let i=e.get(t.originalEvent);if(i!==void 0)return i;let o=(l=t.target.queryRenderedFeatures(t.point).find(s=>{var a;return(a=n.get(s.layer.id))==null?void 0:a.interactive}))==null?void 0:l.layer.id;return e.set(t.originalEvent,o),o}}function Yr(){let n=new Map;return qi(Nn,{map:R(null),source:fn(null),layer:fn(null),popupTarget:fn(null),cluster:R(),loadedImages:R(new Set),minzoom:R(0),maxzoom:R(24),layerEvent:R(null),layerInfo:n,eventTopMost:Kr(n),markerClickManager:new $r})}function Hn(n){return{subscribe:n.subscribe}}function Tn({key:n,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:i=!1}){let r=Bt(),o=R(null),l=Hn(o),s={...r,[n]:Hn(o)};if(e&&(s.popupTarget=l),i){let a=R(null);s.layerEvent=a,r.layerEvent=a}return t&&(s.cluster=R()),qi(Nn,s),{...r,self:o}}function Xr(){return Tn({key:"source",setCluster:!0})}function Jr(n=!0){return Tn({key:"layer",setPopupTarget:n,setMouseEvent:n})}function va(){return Tn({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function pa(n){return"layerType"in n&&n.layerType==="deckgl"}class $r{constructor(){Fn(this,"_handlers",new Set)}add(e){this._handlers.add(e)}remove(e){this._handlers.delete(e)}handleClick(e){for(const t of this._handlers)t(e)}}function Bn(n){let e;return t=>{if(t)for(let i in t){let r=e==null?void 0:e[i],o=t[i];r!==o&&n(i,o,r)}else if(e)for(let i in e)n(i,void 0,e[i]);e=t}}function eo(n,...e){let t=[n];for(let i of e)if(i)Array.isArray(i)&&i[0]===n?t.push(...i.slice(1)):t.push(i);else continue;if(t.length!==1)return t.length===2?t[1]:t}function to(n){return n===!0?["has","point_count"]:n===!1?["!",["has","point_count"]]:void 0}function La(n,e){return["case",["boolean",["feature-state","hover"],!1],e,n]}var Jt=no;function no(n){var e,t,i;if(n){if(Array.isArray(n)){for(e=[],t=n.length,i=0;i<t;i++){var r=n[i];r!=null&&e.push(r)}return e}if(typeof n=="object"){e={};var o=Object.keys(n);for(t=o.length,i=0;i<t;i++){var l=o[i],s=n[l];s!=null&&(e[l]=s)}return e}}}function Zn(n){let e=n[0],t,i,r=Gn(n);return{c(){r.c(),t=Ht()},m(o,l){r.m(o,l),X(o,t,l),i=!0},p(o,l){l[0]&1&&Le(e,e=o[0])?(lt(),q(r,1,1,kt),at(),r=Gn(o),r.c(),H(r,1),r.m(t.parentNode,t)):r.p(o,l)},i(o){i||(H(r),i=!0)},o(o){q(r),i=!1},d(o){o&&J(t),r.d(o)}}}function Gn(n){let e;const t=n[36].default,i=ut(t,n,n[35],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[1]&16)&&ct(i,t,r,r[35],e?ft(t,r[35],o,null):dt(r[35]),null)},i(r){e||(H(i,r),e=!0)},o(r){q(i,r),e=!1},d(r){i&&i.d(r)}}}function io(n){let e,t,i=n[0]&&Zn(n);return{c(){i&&i.c(),e=Ht()},m(r,o){i&&i.m(r,o),X(r,e,o),t=!0},p(r,o){r[0]?i?(i.p(r,o),o[0]&1&&H(i,1)):(i=Zn(r),i.c(),H(i,1),i.m(e.parentNode,e)):i&&(lt(),q(i,1,1,()=>{i=null}),at())},i(r){t||(H(i),t=!0)},o(r){q(i),t=!1},d(r){r&&J(e),i&&i.d(r)}}}function ro(n,e,t){let i,r,o,l,s,a,u,d,c,f,g,b,{$$slots:w={},$$scope:m}=e,{id:h=rn("layer")}=e,{source:x=void 0}=e,{sourceLayer:_=void 0}=e,{beforeId:k=void 0}=e,{beforeLayerType:N=void 0}=e,{type:O}=e,{paint:v=void 0}=e,{layout:y=void 0}=e,{filter:M=void 0}=e,{applyToClusters:z=void 0}=e,{minzoom:E=void 0}=e,{maxzoom:D=void 0}=e,{manageHoverState:K=!1}=e,{hovered:P=null}=e,{interactive:U=!0}=e,{hoverCursor:te=void 0}=e,{eventsIfTopMost:A=!1}=e;const le=kn(),{map:ue,source:_e,self:ge,minzoom:ie,maxzoom:re,eventTopMost:oe,layerInfo:de}=Jr();he(n,ue,T=>t(31,c=T)),he(n,_e,T=>t(32,f=T)),he(n,ge,T=>t(0,d=T)),he(n,ie,T=>t(34,b=T)),he(n,re,T=>t(33,g=T)),it(()=>{d&&c&&(de.delete(d),c==null||c.removeLayer(d))});let Q;function be(T){var W,xe;if(!U||!d||!c||A&&oe(T)!==d)return;let S=T.features??[],F=(xe=(W=S[0])==null?void 0:W.properties)==null?void 0:xe.cluster_id,B={event:T,map:c,clusterId:F,layer:d,source:s,features:S};le(T.type,B)}function we(T){var W,xe;if(!U||!d||!c||A&&oe(T)!==d)return;te&&(c.getCanvas().style.cursor=te);let S=T.features??[];t(6,P=S[0]??null);let F=(xe=(W=S[0])==null?void 0:W.properties)==null?void 0:xe.cluster_id;le("mouseenter",{event:T,map:c,clusterId:F,layer:d,source:s,features:S})}function ke(T){var W,xe,p;if(!U||!c)return;if(A&&oe(T)!==d){t(6,P=null),K&&Q!==void 0&&(c==null||c.setFeatureState({source:s,sourceLayer:_,id:Q},{hover:!1}),Q=void 0);return}c.getCanvas().style.cursor=te;let S=T.features??[],F=(xe=(W=S[0])==null?void 0:W.properties)==null?void 0:xe.cluster_id,B=(p=S[0])==null?void 0:p.id;B!==Q&&(K&&(Q!==void 0&&(c==null||c.setFeatureState({source:s,id:Q,sourceLayer:_},{hover:!1})),c==null||c.setFeatureState({source:s,id:B,sourceLayer:_},{hover:!0})),Q=B,t(6,P=S[0]??null)),le("mousemove",{event:T,map:c,clusterId:F,layer:d,source:s,features:S})}function Pe(T){if(!(!U||!d||!c)){if(te&&(c.getCanvas().style.cursor=""),t(6,P=null),K&&Q!==void 0){const S={source:s,id:Q,sourceLayer:_};c==null||c.setFeatureState(S,{hover:!1}),Q=void 0}le("mouseleave",{map:c,layer:d,source:s})}}let fe=!0;function ze(T){c&&(c.off("click",T,be),c.off("dblclick",T,be),c.off("contextmenu",T,be),c.off("mouseenter",T,we),c.off("mousemove",T,ke),c.off("mouseleave",T,Pe))}return it(()=>{c&&d&&ze(d)}),n.$$set=T=>{"id"in T&&t(7,h=T.id),"source"in T&&t(8,x=T.source),"sourceLayer"in T&&t(9,_=T.sourceLayer),"beforeId"in T&&t(10,k=T.beforeId),"beforeLayerType"in T&&t(11,N=T.beforeLayerType),"type"in T&&t(12,O=T.type),"paint"in T&&t(13,v=T.paint),"layout"in T&&t(14,y=T.layout),"filter"in T&&t(15,M=T.filter),"applyToClusters"in T&&t(16,z=T.applyToClusters),"minzoom"in T&&t(17,E=T.minzoom),"maxzoom"in T&&t(18,D=T.maxzoom),"manageHoverState"in T&&t(19,K=T.manageHoverState),"hovered"in T&&t(6,P=T.hovered),"interactive"in T&&t(20,U=T.interactive),"hoverCursor"in T&&t(21,te=T.hoverCursor),"eventsIfTopMost"in T&&t(22,A=T.eventsIfTopMost),"$$scope"in T&&t(35,m=T.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&65536&&t(30,i=to(z)),n.$$.dirty[0]&1073774592&&t(24,r=eo("all",i,M)),n.$$.dirty[0]&131072|n.$$.dirty[1]&8&&t(26,o=E??b),n.$$.dirty[0]&262144|n.$$.dirty[1]&4&&t(25,l=D??g),n.$$.dirty[0]&256|n.$$.dirty[1]&2&&t(29,s=x||f),n.$$.dirty[0]&654343809|n.$$.dirty[1]&1&&c&&d!==h&&s){d&&(ze(d),de.delete(d));let T=k;if(!k&&N){let S=c.getStyle().layers,F=typeof N=="function"?N:W=>W.type===N,B=S==null?void 0:S.find(F);B&&(T=B.id)}et(ge,d=h,d),c.addLayer(Jt({id:d,type:O,source:s,"source-layer":_,filter:r,paint:v,layout:y,minzoom:o,maxzoom:l}),T),t(23,fe=!0),c.on("click",d,be),c.on("dblclick",d,be),c.on("contextmenu",d,be),c.on("mouseenter",d,we),c.on("mousemove",d,ke),c.on("mouseleave",d,Pe)}n.$$.dirty[0]&1048577&&d&&de.set(d,{interactive:U}),n.$$.dirty[0]&1|n.$$.dirty[1]&1&&t(28,a=d?Bn((T,S)=>{c!=null&&c.style._loaded?c.setPaintProperty(d,T,S):c==null||c.once("styledata",()=>c==null?void 0:c.setPaintProperty(d,T,S))}):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&1&&t(27,u=d?Bn((T,S)=>{c!=null&&c.style._loaded?c.setLayoutProperty(d,T,S):c==null||c.once("styledata",()=>c==null?void 0:c.setLayoutProperty(d,T,S))}):void 0),n.$$.dirty[0]&268443648&&(a==null||a(v)),n.$$.dirty[0]&134234112&&(u==null||u(y)),n.$$.dirty[0]&100663297|n.$$.dirty[1]&1&&d&&(c==null||c.setLayerZoomRange(d,o,l)),n.$$.dirty[0]&25165825|n.$$.dirty[1]&1&&d&&(fe?t(23,fe=!1):c==null||c.setFilter(d,r))},[d,ue,_e,ge,ie,re,P,h,x,_,k,N,O,v,y,M,z,E,D,K,U,te,A,fe,r,l,o,u,a,s,i,c,f,g,b,m,w]}class Ki extends Te{constructor(e){super(),Oe(this,e,ro,io,Le,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function oo(n){let e;const t=n[15].default,i=ut(t,n,n[23],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8388608)&&ct(i,t,r,r[23],e?ft(t,r[23],o,null):dt(r[23]),null)},i(r){e||(H(i,r),e=!0)},o(r){q(i,r),e=!1},d(r){i&&i.d(r)}}}function so(n){let e,t,i;function r(l){n[16](l)}let o={id:n[1],type:"fill",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],interactive:n[14],$$slots:{default:[oo]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.hovered=n[0]),e=new Ki({props:o}),Mt.push(()=>xn(e,"hovered",r)),e.$on("click",n[17]),e.$on("dblclick",n[18]),e.$on("contextmenu",n[19]),e.$on("mouseenter",n[20]),e.$on("mousemove",n[21]),e.$on("mouseleave",n[22]),{c(){Ye(e.$$.fragment)},m(l,s){Xe(e,l,s),i=!0},p(l,[s]){const a={};s&2&&(a.id=l[1]),s&4&&(a.source=l[2]),s&8&&(a.sourceLayer=l[3]),s&16&&(a.beforeId=l[4]),s&32&&(a.beforeLayerType=l[5]),s&64&&(a.paint=l[6]),s&128&&(a.layout=l[7]),s&256&&(a.filter=l[8]),s&512&&(a.minzoom=l[9]),s&1024&&(a.maxzoom=l[10]),s&2048&&(a.hoverCursor=l[11]),s&4096&&(a.manageHoverState=l[12]),s&8192&&(a.eventsIfTopMost=l[13]),s&16384&&(a.interactive=l[14]),s&8388608&&(a.$$scope={dirty:s,ctx:l}),!t&&s&1&&(t=!0,a.hovered=l[0],Mn(()=>t=!1)),e.$set(a)},i(l){i||(H(e.$$.fragment,l),i=!0)},o(l){q(e.$$.fragment,l),i=!1},d(l){Je(e,l)}}}function lo(n,e,t){let{$$slots:i={},$$scope:r}=e,{id:o=rn("fill")}=e,{source:l=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:d}=e,{layout:c=void 0}=e,{filter:f=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:b=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:m=!1}=e,{hovered:h=null}=e,{eventsIfTopMost:x=!1}=e,{interactive:_=!0}=e;function k(E){h=E,t(0,h)}function N(E){Ae.call(this,n,E)}function O(E){Ae.call(this,n,E)}function v(E){Ae.call(this,n,E)}function y(E){Ae.call(this,n,E)}function M(E){Ae.call(this,n,E)}function z(E){Ae.call(this,n,E)}return n.$$set=E=>{"id"in E&&t(1,o=E.id),"source"in E&&t(2,l=E.source),"sourceLayer"in E&&t(3,s=E.sourceLayer),"beforeId"in E&&t(4,a=E.beforeId),"beforeLayerType"in E&&t(5,u=E.beforeLayerType),"paint"in E&&t(6,d=E.paint),"layout"in E&&t(7,c=E.layout),"filter"in E&&t(8,f=E.filter),"minzoom"in E&&t(9,g=E.minzoom),"maxzoom"in E&&t(10,b=E.maxzoom),"hoverCursor"in E&&t(11,w=E.hoverCursor),"manageHoverState"in E&&t(12,m=E.manageHoverState),"hovered"in E&&t(0,h=E.hovered),"eventsIfTopMost"in E&&t(13,x=E.eventsIfTopMost),"interactive"in E&&t(14,_=E.interactive),"$$scope"in E&&t(23,r=E.$$scope)},[h,o,l,s,a,u,d,c,f,g,b,w,m,x,_,i,k,N,O,v,y,M,z,r]}class wa extends Te{constructor(e){super(),Oe(this,e,lo,so,Le,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function ao(n,e,t){let i;const{map:r}=Bt();he(n,r,a=>t(4,i=a));let{position:o="top-left"}=e,{container:l=void 0}=e,s=null;return it(()=>{i!=null&&i.loaded()&&s&&i.removeControl(s)}),n.$$set=a=>{"position"in a&&t(1,o=a.position),"container"in a&&t(2,l=a.container)},n.$$.update=()=>{if(n.$$.dirty&30&&i&&!s){let a;typeof l=="string"?a=document.querySelector(l)??void 0:a=l,t(3,s=new De.FullscreenControl({container:a})),i.addControl(s,o)}},[r,o,l,s,i]}class uo extends Te{constructor(e){super(),Oe(this,e,ao,null,Le,{position:1,container:2})}}function co(n,e,t,i,r){let o=!1;n.getSource(e)&&(o=!0,n.removeSource(e));const l=()=>{i(e)&&(n.addSource(e,t),r())};if(o){const s=()=>{e&&(n.getSource(e)?setTimeout(s,1):l())};s()}else l()}function fo(n,e,t){zr().then(()=>{let i=vt(n);if(!i)return;i.getSource(e)===t&&i.removeSource(e)})}function jn(n){let e=n[0],t,i,r=qn(n);return{c(){r.c(),t=Ht()},m(o,l){r.m(o,l),X(o,t,l),i=!0},p(o,l){l&1&&Le(e,e=o[0])?(lt(),q(r,1,1,kt),at(),r=qn(o),r.c(),H(r,1),r.m(t.parentNode,t)):r.p(o,l)},i(o){i||(H(r),i=!0)},o(o){q(r),i=!1},d(o){o&&J(t),r.d(o)}}}function qn(n){let e;const t=n[19].default,i=ut(t,n,n[18],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&262144)&&ct(i,t,r,r[18],e?ft(t,r[18],o,null):dt(r[18]),null)},i(r){e||(H(i,r),e=!0)},o(r){q(i,r),e=!1},d(r){i&&i.d(r)}}}function mo(n){let e,t,i=n[0]&&jn(n);return{c(){i&&i.c(),e=Ht()},m(r,o){i&&i.m(r,o),X(r,e,o),t=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&H(i,1)):(i=jn(r),i.c(),H(i,1),i.m(e.parentNode,e)):i&&(lt(),q(i,1,1,()=>{i=null}),at())},i(r){t||(H(i),t=!0)},o(r){q(i),t=!1},d(r){r&&J(e),i&&i.d(r)}}}function ho(n,e,t){let i,r,o,{$$slots:l={},$$scope:s}=e,{id:a=rn("geojson")}=e,{data:u}=e,{generateId:d=!1}=e,{promoteId:c=void 0}=e,{filter:f=void 0}=e,{lineMetrics:g=void 0}=e,{cluster:b=void 0}=e,{maxzoom:w=void 0}=e,{attribution:m=void 0}=e,{buffer:h=void 0}=e,{tolerance:x=void 0}=e;const{map:_,cluster:k,self:N}=Xr();he(n,_,y=>t(17,r=y)),he(n,k,y=>t(20,o=y)),he(n,N,y=>t(0,i=y));let O,v=!0;return it(()=>{i&&O&&r&&(fo(_,i,O),et(N,i=null,i),t(15,O=void 0))}),n.$$set=y=>{"id"in y&&t(4,a=y.id),"data"in y&&t(5,u=y.data),"generateId"in y&&t(6,d=y.generateId),"promoteId"in y&&t(7,c=y.promoteId),"filter"in y&&t(8,f=y.filter),"lineMetrics"in y&&t(9,g=y.lineMetrics),"cluster"in y&&t(10,b=y.cluster),"maxzoom"in y&&t(11,w=y.maxzoom),"attribution"in y&&t(12,m=y.attribution),"buffer"in y&&t(13,h=y.buffer),"tolerance"in y&&t(14,x=y.tolerance),"$$scope"in y&&t(18,s=y.$$scope)},n.$$.update=()=>{n.$$.dirty&1024&&et(k,o=b,o),n.$$.dirty&196593&&r&&i!==a&&(et(N,i=a,i),co(r,i,Jt({type:"geojson",data:u,filter:f,lineMetrics:g,generateId:d,promoteId:c,cluster:!!b,clusterMinPoints:b==null?void 0:b.minPoints,clusterMaxZoom:b==null?void 0:b.maxZoom,clusterRadius:b==null?void 0:b.radius,clusterProperties:b==null?void 0:b.properties,maxzoom:w,attribution:m,buffer:h,tolerance:x}),y=>r&&y===i,()=>{i&&(t(15,O=r==null?void 0:r.getSource(i)),t(16,v=!0))})),n.$$.dirty&131088&&(r==null||r.on("style.load",()=>{t(15,O=r==null?void 0:r.getSource(a))})),n.$$.dirty&98336&&O&&(v?t(16,v=!1):O.setData(u)),n.$$.dirty&33792&&(O==null||O.setClusterOptions(Jt({cluster:!!b,clusterMaxZoom:b==null?void 0:b.maxZoom,clusterRadius:b==null?void 0:b.radius})))},[i,_,k,N,a,u,d,c,f,g,b,w,m,h,x,O,v,r,s,l]}class Ea extends Te{constructor(e){super(),Oe(this,e,ho,mo,Le,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10,maxzoom:11,attribution:12,buffer:13,tolerance:14})}}function go(n,e,t){let i;const{map:r}=Bt();he(n,r,f=>t(8,i=f));let{position:o="top-left"}=e,{positionOptions:l=void 0}=e,{fitBoundsOptions:s=void 0}=e,{trackUserLocation:a=!1}=e,{showAccuracyCircle:u=!0}=e,{showUserLocation:d=!0}=e,{control:c=null}=e;return it(()=>{i!=null&&i.loaded()&&c&&i.removeControl(c)}),n.$$set=f=>{"position"in f&&t(2,o=f.position),"positionOptions"in f&&t(3,l=f.positionOptions),"fitBoundsOptions"in f&&t(4,s=f.fitBoundsOptions),"trackUserLocation"in f&&t(5,a=f.trackUserLocation),"showAccuracyCircle"in f&&t(6,u=f.showAccuracyCircle),"showUserLocation"in f&&t(7,d=f.showUserLocation),"control"in f&&t(1,c=f.control)},n.$$.update=()=>{n.$$.dirty&510&&i&&!c&&(t(1,c=new De.GeolocateControl({positionOptions:l,fitBoundsOptions:s,trackUserLocation:a,showAccuracyCircle:u,showUserLocation:d})),i.addControl(c,o))},[r,c,o,l,s,a,u,d,i]}class bo extends Te{constructor(e){super(),Oe(this,e,go,null,Le,{position:2,positionOptions:3,fitBoundsOptions:4,trackUserLocation:5,showAccuracyCircle:6,showUserLocation:7,control:1})}}function yo(n){let e;const t=n[15].default,i=ut(t,n,n[23],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8388608)&&ct(i,t,r,r[23],e?ft(t,r[23],o,null):dt(r[23]),null)},i(r){e||(H(i,r),e=!0)},o(r){q(i,r),e=!1},d(r){i&&i.d(r)}}}function vo(n){let e,t,i;function r(l){n[16](l)}let o={id:n[1],type:"line",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],minzoom:n[9],maxzoom:n[10],hoverCursor:n[11],manageHoverState:n[12],eventsIfTopMost:n[13],interactive:n[14],$$slots:{default:[yo]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.hovered=n[0]),e=new Ki({props:o}),Mt.push(()=>xn(e,"hovered",r)),e.$on("click",n[17]),e.$on("dblclick",n[18]),e.$on("contextmenu",n[19]),e.$on("mouseenter",n[20]),e.$on("mousemove",n[21]),e.$on("mouseleave",n[22]),{c(){Ye(e.$$.fragment)},m(l,s){Xe(e,l,s),i=!0},p(l,[s]){const a={};s&2&&(a.id=l[1]),s&4&&(a.source=l[2]),s&8&&(a.sourceLayer=l[3]),s&16&&(a.beforeId=l[4]),s&32&&(a.beforeLayerType=l[5]),s&64&&(a.paint=l[6]),s&128&&(a.layout=l[7]),s&256&&(a.filter=l[8]),s&512&&(a.minzoom=l[9]),s&1024&&(a.maxzoom=l[10]),s&2048&&(a.hoverCursor=l[11]),s&4096&&(a.manageHoverState=l[12]),s&8192&&(a.eventsIfTopMost=l[13]),s&16384&&(a.interactive=l[14]),s&8388608&&(a.$$scope={dirty:s,ctx:l}),!t&&s&1&&(t=!0,a.hovered=l[0],Mn(()=>t=!1)),e.$set(a)},i(l){i||(H(e.$$.fragment,l),i=!0)},o(l){q(e.$$.fragment,l),i=!1},d(l){Je(e,l)}}}function po(n,e,t){let{$$slots:i={},$$scope:r}=e,{id:o=rn("line")}=e,{source:l=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:d}=e,{layout:c=void 0}=e,{filter:f=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:b=void 0}=e,{hoverCursor:w=void 0}=e,{manageHoverState:m=!1}=e,{hovered:h=null}=e,{eventsIfTopMost:x=!1}=e,{interactive:_=!0}=e;function k(E){h=E,t(0,h)}function N(E){Ae.call(this,n,E)}function O(E){Ae.call(this,n,E)}function v(E){Ae.call(this,n,E)}function y(E){Ae.call(this,n,E)}function M(E){Ae.call(this,n,E)}function z(E){Ae.call(this,n,E)}return n.$$set=E=>{"id"in E&&t(1,o=E.id),"source"in E&&t(2,l=E.source),"sourceLayer"in E&&t(3,s=E.sourceLayer),"beforeId"in E&&t(4,a=E.beforeId),"beforeLayerType"in E&&t(5,u=E.beforeLayerType),"paint"in E&&t(6,d=E.paint),"layout"in E&&t(7,c=E.layout),"filter"in E&&t(8,f=E.filter),"minzoom"in E&&t(9,g=E.minzoom),"maxzoom"in E&&t(10,b=E.maxzoom),"hoverCursor"in E&&t(11,w=E.hoverCursor),"manageHoverState"in E&&t(12,m=E.manageHoverState),"hovered"in E&&t(0,h=E.hovered),"eventsIfTopMost"in E&&t(13,x=E.eventsIfTopMost),"interactive"in E&&t(14,_=E.interactive),"$$scope"in E&&t(23,r=E.$$scope)},[h,o,l,s,a,u,d,c,f,g,b,w,m,x,_,i,k,N,O,v,y,M,z,r]}class Sa extends Te{constructor(e){super(),Oe(this,e,po,vo,Le,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function Lo(n){let e=n.getCenter(),t=Math.round(n.getZoom()*100)/100,i=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,i),o=Math.round(e.lat*r)/r,l=Math.round(e.lng*r)/r,s=`${t}/${o}/${l}`,a=n.getBearing(),u=n.getPitch();return(a||u)&&(s+=`/${Math.round(a*10)/10}`),u&&(s+=`/${Math.round(u)}`),`#${s}`}function wo(n){return n.replace("#","").split("/").map(parseFloat)}var Et=On;function On(n,e){return n===e||n!==n&&e!==e?!0:typeof n!=typeof e||{}.toString.call(n)!={}.toString.call(e)||n!==Object(n)||!n?!1:Array.isArray(n)?Qn(n,e):{}.toString.call(n)=="[object Set]"?Qn(Array.from(n),Array.from(e)):{}.toString.call(n)=="[object Object]"?So(n,e):Eo(n,e)}function Eo(n,e){return n.toString()===e.toString()}function Qn(n,e){var t=n.length;if(t!=e.length)return!1;for(var i=0;i<t;i++)if(!On(n[i],e[i]))return!1;return!0}function So(n,e){var t=Object.keys(n),i=t.length;if(i!=Object.keys(e).length)return!1;for(var r=0;r<i;r++){var o=t[r];if(!(e.hasOwnProperty(o)&&On(n[o],e[o])))return!1}return!0}function Co(n,e,t){let i;const{map:r}=Bt();he(n,r,d=>t(6,i=d));let{position:o="top-left"}=e,{showCompass:l=!0}=e,{showZoom:s=!0}=e,{visualizePitch:a=!1}=e,u=null;return it(()=>{i!=null&&i.loaded()&&u&&i.removeControl(u)}),n.$$set=d=>{"position"in d&&t(1,o=d.position),"showCompass"in d&&t(2,l=d.showCompass),"showZoom"in d&&t(3,s=d.showZoom),"visualizePitch"in d&&t(4,a=d.visualizePitch)},n.$$.update=()=>{n.$$.dirty&126&&i&&!u&&(t(5,u=new De.NavigationControl({showCompass:l,showZoom:s,visualizePitch:a})),i.addControl(u,o))},[r,o,l,s,a,u,i]}class _o extends Te{constructor(e){super(),Oe(this,e,Co,null,Le,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function ko(n,e,t){let i;const{map:r}=Bt();he(n,r,u=>t(5,i=u));let{position:o="bottom-left"}=e,{maxWidth:l=void 0}=e,{unit:s="metric"}=e,a=null;return it(()=>{i!=null&&i.loaded()&&a&&i.removeControl(a)}),n.$$set=u=>{"position"in u&&t(1,o=u.position),"maxWidth"in u&&t(2,l=u.maxWidth),"unit"in u&&t(3,s=u.unit)},n.$$.update=()=>{n.$$.dirty&62&&i&&!a&&(t(4,a=new De.ScaleControl({maxWidth:l,unit:s})),i.addControl(a,o))},[r,o,l,s,a,i]}class xo extends Te{constructor(e){super(),Oe(this,e,ko,null,Le,{position:1,maxWidth:2,unit:3})}}const{window:Mo}=Qr,No=n=>({map:n[0]&16,loadedImages:n[0]&32,allImagesLoaded:n[0]&64}),Vn=n=>({map:n[4],loadedImages:n[5],allImagesLoaded:n[6]});function Kn(n){let e,t,i=n[3]&&Yn(n);const r=n[46].default,o=ut(r,n,n[45],Vn);return{c(){i&&i.c(),e=Fe(),o&&o.c()},m(l,s){i&&i.m(l,s),X(l,e,s),o&&o.m(l,s),t=!0},p(l,s){l[3]?i?(i.p(l,s),s[0]&8&&H(i,1)):(i=Yn(l),i.c(),H(i,1),i.m(e.parentNode,e)):i&&(lt(),q(i,1,1,()=>{i=null}),at()),o&&o.p&&(!t||s[0]&112|s[1]&16384)&&ct(o,r,l,l[45],t?ft(r,l[45],s,No):dt(l[45]),Vn)},i(l){t||(H(i),H(o,l),t=!0)},o(l){q(i),q(o,l),t=!1},d(l){l&&J(e),i&&i.d(l),o&&o.d(l)}}}function Yn(n){let e,t,i,r,o,l,s,a;return e=new _o({props:{position:n[7]}}),i=new bo({props:{position:n[7],fitBoundsOptions:{maxZoom:12}}}),o=new uo({props:{position:n[7]}}),s=new xo({props:{position:n[7]}}),{c(){Ye(e.$$.fragment),t=Fe(),Ye(i.$$.fragment),r=Fe(),Ye(o.$$.fragment),l=Fe(),Ye(s.$$.fragment)},m(u,d){Xe(e,u,d),X(u,t,d),Xe(i,u,d),X(u,r,d),Xe(o,u,d),X(u,l,d),Xe(s,u,d),a=!0},p(u,d){const c={};d[0]&128&&(c.position=u[7]),e.$set(c);const f={};d[0]&128&&(f.position=u[7]),i.$set(f);const g={};d[0]&128&&(g.position=u[7]),o.$set(g);const b={};d[0]&128&&(b.position=u[7]),s.$set(b)},i(u){a||(H(e.$$.fragment,u),H(i.$$.fragment,u),H(o.$$.fragment,u),H(s.$$.fragment,u),a=!0)},o(u){q(e.$$.fragment,u),q(i.$$.fragment,u),q(o.$$.fragment,u),q(s.$$.fragment,u),a=!1},d(u){u&&(J(t),J(r),J(l)),Je(e,u),Je(i,u),Je(o,u),Je(s,u)}}}function To(n){let e,t,i,r,o,l=n[4]&&n[0]&&Kn(n);return{c(){e=Ie("div"),l&&l.c(),tt(e,"class",t=Dn(n[2])+" svelte-p00lfq"),tt(e,"data-testid","map-container"),Un(e,"expand-map",!n[2])},m(s,a){X(s,e,a),l&&l.m(e,null),n[47](e),i=!0,r||(o=[At(Mo,"hashchange",n[11]),Fr(n[10].call(null,e))],r=!0)},p(s,a){s[4]&&s[0]?l?(l.p(s,a),a[0]&17&&H(l,1)):(l=Kn(s),l.c(),H(l,1),l.m(e,null)):l&&(lt(),q(l,1,1,()=>{l=null}),at()),(!i||a[0]&4&&t!==(t=Dn(s[2])+" svelte-p00lfq"))&&tt(e,"class",t),(!i||a[0]&4)&&Un(e,"expand-map",!s[2])},i(s){i||(H(l),i=!0)},o(s){q(l),i=!1},d(s){s&&J(e),l&&l.d(),n[47](null),r=!1,Vi(o)}}}function Oo(n,e,t){let i,r,o,l,{$$slots:s={},$$scope:a}=e,{map:u=null}=e,{mapContainer:d=void 0}=e,{class:c=void 0}=e,{style:f}=e,{diffStyleUpdates:g=!1}=e,{center:b=void 0}=e,{zoom:w=void 0}=e,{pitch:m=0}=e,{bearing:h=0}=e,{bounds:x=void 0}=e,{hash:_=!1}=e,{updateHash:k=p=>{window.history.replaceState(window.history.state,"",p)}}=e,{loaded:N=!1}=e,{minZoom:O=0}=e,{maxZoom:v=22}=e,{minPitch:y=0}=e,{maxPitch:M=60}=e,{renderWorldCopies:z=void 0}=e,{dragPan:E=void 0}=e,{dragRotate:D=void 0}=e,{pitchWithRotate:K=void 0}=e,{antialias:P=void 0}=e,{zoomOnDoubleClick:U=!0}=e,{locale:te=void 0}=e,{interactive:A=!0}=e,{attributionControl:le=!0}=e,{cooperativeGestures:ue=!1}=e,{preserveDrawingBuffer:_e=!1}=e,{maxBounds:ge=void 0}=e,{images:ie=[]}=e,{standardControls:re=!1}=e,{filterLayers:oe=void 0}=e,{transformRequest:de=void 0}=e;const Q=kn(),{map:be,loadedImages:we}=Yr();he(n,be,p=>t(4,o=p)),he(n,we,p=>t(5,l=p));let ke=new Set;async function Pe(p,I=!1){if(o&&!(!o.loaded()&&!I))if("url"in p){ke.add(p.id);try{let j=await o.loadImage(p.url);o==null||o.addImage(p.id,j.data,p.options),l.add(p.id),we.set(l)}catch(j){Q("error",j)}finally{ke.delete(p.id)}}else o.addImage(p.id,p.data,p.options),l.add(p.id),we.set(l)}let fe,ze,T,S;function F(p){return W(),et(be,o=new De.Map(Jt({container:p,style:f,locale:te,center:b,zoom:w,pitch:m,bearing:h,minZoom:O,maxZoom:v,minPitch:y,maxPitch:M,renderWorldCopies:z,dragPan:E,dragRotate:D,pitchWithRotate:K,antialias:P,interactive:A,preserveDrawingBuffer:_e,maxBounds:ge,bounds:x,attributionControl:le,transformRequest:de,cooperativeGestures:ue})),o),o.on("load",I=>{I.target.getContainer().setAttribute("data-testid","map"),I.target.getCanvas().setAttribute("data-testid","map-canvas"),t(0,N=!0),Q("load",o)}),o.on("error",I=>Q("error",{...I,map:o})),o.on("movestart",I=>Q("movestart",{...I,map:o})),o.on("moveend",I=>{if(t(12,b=I.target.getCenter()),t(13,w=I.target.getZoom()),t(14,m=I.target.getPitch()),t(15,h=I.target.getBearing()),t(16,x=I.target.getBounds()),Q("moveend",{...I,map:o}),_){let j=new URL(window.location.href.replace(/(#.+)?$/,Lo(o)));k(j)}}),o.on("click",I=>Q("click",{...I,map:o})),o.on("dblclick",I=>Q("dblclick",{...I,map:o})),o.on("contextmenu",I=>Q("contextmenu",{...I,map:o})),o.on("zoomstart",I=>Q("zoomstart",{...I,map:o})),o.on("zoom",I=>{Q("zoom",{...I,map:o})}),o.on("zoomend",I=>{Q("zoomend",{...I,map:o})}),o.on("style.load",()=>{if(o){const I=o.getStyle();if(t(42,fe=I.layers.map(j=>j.id)),t(43,ze=Object.keys(I.sources)),S)for(const[j,Ze]of Object.entries(S))o.addSource(j,Ze);if(T)for(const j of T)o.addLayer(j);for(const j of ie)Pe(j,!0)}}),o.on("styledata",I=>{if(o&&oe){const j=o.getStyle().layers;if(j)for(let Ze of j)oe(Ze)||o.setLayoutProperty(Ze.id,"visibility","none")}Q("styledata",{...I,map:o})}),{destroy(){t(0,N=!1),o==null||o.remove(),et(be,o=null,o)}}}let B=f;function W(){if(_){let p=wo(window.location.hash);if(p.some(isNaN))return;p.length>=3&&(t(13,w=p[0]),t(12,b=[p[2],p[1]])),p.length==5&&(t(15,h=p[3]),t(14,m=p[4]))}}function xe(p){Mt[p?"unshift":"push"](()=>{d=p,t(1,d)})}return n.$$set=p=>{"map"in p&&t(17,u=p.map),"mapContainer"in p&&t(1,d=p.mapContainer),"class"in p&&t(2,c=p.class),"style"in p&&t(18,f=p.style),"diffStyleUpdates"in p&&t(19,g=p.diffStyleUpdates),"center"in p&&t(12,b=p.center),"zoom"in p&&t(13,w=p.zoom),"pitch"in p&&t(14,m=p.pitch),"bearing"in p&&t(15,h=p.bearing),"bounds"in p&&t(16,x=p.bounds),"hash"in p&&t(20,_=p.hash),"updateHash"in p&&t(21,k=p.updateHash),"loaded"in p&&t(0,N=p.loaded),"minZoom"in p&&t(22,O=p.minZoom),"maxZoom"in p&&t(23,v=p.maxZoom),"minPitch"in p&&t(24,y=p.minPitch),"maxPitch"in p&&t(25,M=p.maxPitch),"renderWorldCopies"in p&&t(26,z=p.renderWorldCopies),"dragPan"in p&&t(27,E=p.dragPan),"dragRotate"in p&&t(28,D=p.dragRotate),"pitchWithRotate"in p&&t(29,K=p.pitchWithRotate),"antialias"in p&&t(30,P=p.antialias),"zoomOnDoubleClick"in p&&t(31,U=p.zoomOnDoubleClick),"locale"in p&&t(32,te=p.locale),"interactive"in p&&t(33,A=p.interactive),"attributionControl"in p&&t(34,le=p.attributionControl),"cooperativeGestures"in p&&t(35,ue=p.cooperativeGestures),"preserveDrawingBuffer"in p&&t(36,_e=p.preserveDrawingBuffer),"maxBounds"in p&&t(37,ge=p.maxBounds),"images"in p&&t(38,ie=p.images),"standardControls"in p&&t(3,re=p.standardControls),"filterLayers"in p&&t(39,oe=p.filterLayers),"transformRequest"in p&&t(40,de=p.transformRequest),"$$scope"in p&&t(45,a=p.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&8&&t(7,i=typeof re=="boolean"?void 0:re),n.$$.dirty[0]&16&&t(17,u=o),n.$$.dirty[0]&786448|n.$$.dirty[1]&14336&&o&&!Et(f,B)){const p=o.getStyle();if(fe&&(T=p.layers.filter(I=>!fe.includes(I.id))),ze){const I=Object.keys(p.sources).filter(j=>!ze.includes(j));S={};for(const j of I)S[j]=p.sources[j]}t(44,B=f),o.setStyle(f,{diff:g}),et(we,l=new Set,l),t(41,ke=new Set)}if(n.$$.dirty[0]&49|n.$$.dirty[1]&1152&&N&&o!=null&&o.loaded())for(let p of ie)!l.has(p.id)&&!ke.has(p.id)&&!o.hasImage(p.id)&&Pe(p);if(n.$$.dirty[0]&32|n.$$.dirty[1]&128&&t(6,r=ie.every(p=>l.has(p.id))),n.$$.dirty[0]&61456&&o){let p={};b!=null&&!Et(b,o==null?void 0:o.getCenter())&&(p.center=b),w!=null&&!Et(w,o==null?void 0:o.getZoom())&&(p.zoom=w),h!=null&&!Et(h,o==null?void 0:o.getBearing())&&(p.bearing=h),m!=null&&!Et(m,o==null?void 0:o.getPitch())&&(p.pitch=m),Object.keys(p).length&&o.easeTo(p)}n.$$.dirty[0]&65552&&x&&!Et(x,o==null?void 0:o.getBounds())&&(o==null||o.fitBounds(x)),n.$$.dirty[0]&16|n.$$.dirty[1]&1&&(U?o==null||o.doubleClickZoom.enable():o==null||o.doubleClickZoom.disable())},[N,d,c,re,o,l,r,i,be,we,F,W,b,w,m,h,x,u,f,g,_,k,O,v,y,M,z,E,D,K,P,U,te,A,le,ue,_e,ge,ie,oe,de,ke,fe,ze,B,a,s,xe]}class Ca extends Te{constructor(e){super(),Oe(this,e,Oo,To,Le,{map:17,mapContainer:1,class:2,style:18,diffStyleUpdates:19,center:12,zoom:13,pitch:14,bearing:15,bounds:16,hash:20,updateHash:21,loaded:0,minZoom:22,maxZoom:23,minPitch:24,maxPitch:25,renderWorldCopies:26,dragPan:27,dragRotate:28,pitchWithRotate:29,antialias:30,zoomOnDoubleClick:31,locale:32,interactive:33,attributionControl:34,cooperativeGestures:35,preserveDrawingBuffer:36,maxBounds:37,images:38,standardControls:3,filterLayers:39,transformRequest:40},null,[-1,-1])}}var Po=Object.defineProperty,Yi=n=>{throw TypeError(n)},Io=(n,e,t)=>e in n?Po(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Me=(n,e,t)=>Io(n,typeof e!="symbol"?e+"":e,t),Xi=(n,e,t)=>e.has(n)||Yi("Cannot "+t),ce=(n,e,t)=>(Xi(n,e,"read from private field"),t?t.call(n):e.get(n)),Xn=(n,e,t)=>e.has(n)?Yi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Jn=(n,e,t,i)=>(Xi(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);function $(){}function Ro(n,e){for(const t in e)n[t]=e[t];return n}function Ji(n){return n()}function $n(){return Object.create(null)}function Qe(n){n.forEach(Ji)}function $i(n){return typeof n=="function"}function mt(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let qt;function pe(n,e){return n===e?!0:(qt||(qt=document.createElement("a")),qt.href=e,n===qt.href)}function Ao(n){return Object.keys(n).length===0}function Wo(n,e,t,i){if(n){const r=er(n,e,t,i);return n[0](r)}}function er(n,e,t,i){return n[1]&&i?Ro(t.ctx.slice(),n[1](i(e))):t.ctx}function zo(n,e,t,i){if(n[2]&&i){const r=n[2](i(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const o=[],l=Math.max(e.dirty.length,r.length);for(let s=0;s<l;s+=1)o[s]=e.dirty[s]|r[s];return o}return e.dirty|r}return e.dirty}function Fo(n,e,t,i,r,o){if(r){const l=er(e,t,i,o);n.p(l,r)}}function Do(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function ei(n){return n??""}function G(n,e){n.appendChild(e)}function ne(n,e,t){n.insertBefore(e,t||null)}function ee(n){n.parentNode&&n.parentNode.removeChild(n)}function Y(n){return document.createElement(n)}function He(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function rt(n){return document.createTextNode(n)}function Ne(){return rt(" ")}function Uo(){return rt("")}function Ce(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function Ho(n){return function(e){return e.preventDefault(),n.call(this,e)}}function C(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Bo(n){return Array.from(n.childNodes)}function Wt(n,e){e=""+e,n.data!==e&&(n.data=e)}function ti(n,e){n.value=e??""}function We(n,e,t){n.classList.toggle(e,!!t)}function Zo(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}let zt;function Rt(n){zt=n}function tr(){if(!zt)throw new Error("Function called outside component initialization");return zt}function Go(n){tr().$$.on_destroy.push(n)}function jo(){const n=tr();return(e,t,{cancelable:i=!1}={})=>{const r=n.$$.callbacks[e];if(r){const o=Zo(e,t,{cancelable:i});return r.slice().forEach(l=>{l.call(n,o)}),!o.defaultPrevented}return!0}}function ni(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const _t=[],yn=[];let xt=[];const ii=[],qo=Promise.resolve();let vn=!1;function Qo(){vn||(vn=!0,qo.then(nr))}function pn(n){xt.push(n)}const mn=new Set;let St=0;function nr(){if(St!==0)return;const n=zt;do{try{for(;St<_t.length;){const e=_t[St];St++,Rt(e),Vo(e.$$)}}catch(e){throw _t.length=0,St=0,e}for(Rt(null),_t.length=0,St=0;yn.length;)yn.pop()();for(let e=0;e<xt.length;e+=1){const t=xt[e];mn.has(t)||(mn.add(t),t())}xt.length=0}while(_t.length);for(;ii.length;)ii.pop()();vn=!1,mn.clear(),Rt(n)}function Vo(n){if(n.fragment!==null){n.update(),Qe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(pn)}}function Ko(n){const e=[],t=[];xt.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),xt=e}const Vt=new Set;let yt;function Kt(){yt={r:0,c:[],p:yt}}function Yt(){yt.r||Qe(yt.c),yt=yt.p}function se(n,e){n&&n.i&&(Vt.delete(n),n.i(e))}function me(n,e,t,i){if(n&&n.o){if(Vt.has(n))return;Vt.add(n),yt.c.push(()=>{Vt.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function ri(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Yo(n,e){me(n,1,1,()=>{e.delete(n.key)})}function Xo(n,e,t,i,r,o,l,s,a,u,d,c){let f=n.length,g=o.length,b=f;const w={};for(;b--;)w[n[b].key]=b;const m=[],h=new Map,x=new Map,_=[];for(b=g;b--;){const v=c(r,o,b),y=t(v);let M=l.get(y);M?_.push(()=>M.p(v,e)):(M=u(y,v),M.c()),h.set(y,m[b]=M),y in w&&x.set(y,Math.abs(b-w[y]))}const k=new Set,N=new Set;function O(v){se(v,1),v.m(s,d),l.set(v.key,v),d=v.first,g--}for(;f&&g;){const v=m[g-1],y=n[f-1],M=v.key,z=y.key;v===y?(d=v.first,f--,g--):h.has(z)?!l.has(M)||k.has(M)?O(v):N.has(z)?f--:x.get(M)>x.get(z)?(N.add(M),O(v)):(k.add(z),f--):(a(y,l),f--)}for(;f--;){const v=n[f];h.has(v.key)||a(v,l)}for(;g;)O(m[g-1]);return Qe(_),m}function ot(n){n&&n.c()}function je(n,e,t){const{fragment:i,after_update:r}=n.$$;i&&i.m(e,t),pn(()=>{const o=n.$$.on_mount.map(Ji).filter($i);n.$$.on_destroy?n.$$.on_destroy.push(...o):Qe(o),n.$$.on_mount=[]}),r.forEach(pn)}function qe(n,e){const t=n.$$;t.fragment!==null&&(Ko(t.after_update),Qe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Jo(n,e){n.$$.dirty[0]===-1&&(_t.push(n),Qo(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ht(n,e,t,i,r,o,l=null,s=[-1]){const a=zt;Rt(n);const u=n.$$={fragment:null,ctx:[],props:o,update:$,not_equal:r,bound:$n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:$n(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let d=!1;if(u.ctx=t?t(n,e.props||{},(c,f,...g)=>{const b=g.length?g[0]:f;return u.ctx&&r(u.ctx[c],u.ctx[c]=b)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](b),d&&Jo(n,c)),f}):[],u.update(),d=!0,Qe(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=Bo(e.target);u.fragment&&u.fragment.l(c),c.forEach(ee)}else u.fragment&&u.fragment.c();e.intro&&se(n.$$.fragment),je(n,e.target,e.anchor),nr()}Rt(a)}class gt{constructor(){Me(this,"$$"),Me(this,"$$set")}$destroy(){qe(this,1),this.$destroy=$}$on(e,t){if(!$i(t))return $;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ao(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $o="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($o);function es(n){let e,t;return{c(){e=He("svg"),t=He("path"),C(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),C(e,"viewBox","0 0 14 14"),C(e,"width","13"),C(e,"height","13"),C(e,"class","svelte-en2qvf")},m(i,r){ne(i,e,r),G(e,t)},p:$,i:$,o:$,d(i){i&&ee(e)}}}class ir extends gt{constructor(e){super(),ht(this,e,null,es,mt,{})}}function ts(n){let e,t;return{c(){e=He("svg"),t=He("path"),C(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),C(e,"viewBox","0 0 30 30"),C(e,"fill","none"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"class","svelte-d2loi5")},m(i,r){ne(i,e,r),G(e,t)},p:$,i:$,o:$,d(i){i&&ee(e)}}}class rr extends gt{constructor(e){super(),ht(this,e,null,ts,mt,{})}}function ns(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"area.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"area.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function is(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"reverse.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"reverse.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function rs(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"poi.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"poi.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function os(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"postal_code.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"postal_code.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function ss(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"street.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"street.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function ls(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"road.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"road.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function as(n){let e,t;return{c(){e=Y("img"),pe(e.src,t=n[3]+"housenumber.svg")||C(e,"src",t),C(e,"alt",n[6]),C(e,"class","svelte-ltkwvy")},m(i,r){ne(i,e,r)},p(i,r){r&8&&!pe(e.src,t=i[3]+"housenumber.svg")&&C(e,"src",t),r&64&&C(e,"alt",i[6])},d(i){i&&ee(e)}}}function us(n){let e,t,i,r;return{c(){e=Y("img"),pe(e.src,t=n[5])||C(e,"src",t),C(e,"alt",n[4]),C(e,"class","svelte-ltkwvy")},m(o,l){ne(o,e,l),i||(r=Ce(e,"error",n[14]),i=!0)},p(o,l){l&32&&!pe(e.src,t=o[5])&&C(e,"src",t),l&16&&C(e,"alt",o[4])},d(o){o&&ee(e),i=!1,r()}}}function oi(n){let e,t;return{c(){e=Y("span"),t=rt(n[6]),C(e,"class","secondary svelte-ltkwvy")},m(i,r){ne(i,e,r),G(e,t)},p(i,r){r&64&&Wt(t,i[6])},d(i){i&&ee(e)}}}function cs(n){let e,t,i,r,o,l,s,a,u,d=(n[7]?n[0].place_name:n[0].place_name.replace(/,.*/,""))+"",c,f,g=n[2]==="always"||n[2]!=="never"&&!n[0].address&&!n[0].id.startsWith("road.")&&!n[0].id.startsWith("address.")&&!n[0].id.startsWith("postal_code.")&&(!n[0].id.startsWith("poi.")||!n[5])&&!n[7],b,w,m=(n[7]?"":n[0].place_name.replace(/[^,]*,?\s*/,""))+"",h,x,_;function k(y,M){return M&1&&(t=null),M&1&&(i=null),M&1&&(r=null),M&1&&(o=null),y[5]?us:y[0].address?as:(t==null&&(t=!!y[0].id.startsWith("road.")),t?ls:(i==null&&(i=!!y[0].id.startsWith("address.")),i?ss:(r==null&&(r=!!y[0].id.startsWith("postal_code.")),r?os:(o==null&&(o=!!y[0].id.startsWith("poi.")),o?rs:y[7]?is:ns))))}let N=k(n,-1),O=N(n),v=g&&oi(n);return{c(){e=Y("li"),O.c(),l=Ne(),s=Y("span"),a=Y("span"),u=Y("span"),c=rt(d),f=Ne(),v&&v.c(),b=Ne(),w=Y("span"),h=rt(m),C(u,"class","primary svelte-ltkwvy"),C(a,"class","svelte-ltkwvy"),C(w,"class","line2 svelte-ltkwvy"),C(s,"class","texts svelte-ltkwvy"),C(e,"tabindex","0"),C(e,"data-selected",n[1]),C(e,"class","svelte-ltkwvy"),We(e,"selected",n[1])},m(y,M){ne(y,e,M),O.m(e,null),G(e,l),G(e,s),G(s,a),G(a,u),G(u,c),G(a,f),v&&v.m(a,null),G(s,b),G(s,w),G(w,h),x||(_=[Ce(e,"mouseenter",n[12]),Ce(e,"focus",n[13])],x=!0)},p(y,[M]){N===(N=k(y,M))&&O?O.p(y,M):(O.d(1),O=N(y),O&&(O.c(),O.m(e,l))),M&1&&d!==(d=(y[7]?y[0].place_name:y[0].place_name.replace(/,.*/,""))+"")&&Wt(c,d),M&37&&(g=y[2]==="always"||y[2]!=="never"&&!y[0].address&&!y[0].id.startsWith("road.")&&!y[0].id.startsWith("address.")&&!y[0].id.startsWith("postal_code.")&&(!y[0].id.startsWith("poi.")||!y[5])&&!y[7]),g?v?v.p(y,M):(v=oi(y),v.c(),v.m(a,null)):v&&(v.d(1),v=null),M&1&&m!==(m=(y[7]?"":y[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Wt(h,m),M&2&&C(e,"data-selected",y[1]),M&2&&We(e,"selected",y[1])},i:$,o:$,d(y){y&&ee(e),O.d(),v&&v.d(),x=!1,Qe(_)}}}function ds(n,e,t){var i;let r,o,{feature:l}=e,{selected:s=!1}=e,{showPlaceType:a}=e,{missingIconsCache:u}=e,{iconsBaseUrl:d}=e;const c=(i=l.properties)==null?void 0:i.categories;let f,g,b=0,w=l.place_type[0]==="reverse";function m(){g&&u.add(g),t(10,b++,b)}function h(k){ni.call(this,n,k)}function x(k){ni.call(this,n,k)}const _=()=>m();return n.$$set=k=>{"feature"in k&&t(0,l=k.feature),"selected"in k&&t(1,s=k.selected),"showPlaceType"in k&&t(2,a=k.showPlaceType),"missingIconsCache"in k&&t(9,u=k.missingIconsCache),"iconsBaseUrl"in k&&t(3,d=k.iconsBaseUrl)},n.$$.update=()=>{var k,N,O,v;if(n.$$.dirty&3640)do t(11,r--,r),t(4,f=c==null?void 0:c[r]),t(5,g=f?d+f.replace(/ /g,"_")+".svg":void 0);while(r>-1&&(!g||u.has(g)));n.$$.dirty&1&&t(6,o=((N=(k=l.properties)==null?void 0:k.categories)==null?void 0:N.join(", "))??((v=(O=l.properties)==null?void 0:O.place_type_name)==null?void 0:v[0])??l.place_type[0])},t(11,r=(c==null?void 0:c.length)??0),[l,s,a,d,f,g,o,w,m,u,b,r,h,x,_]}class fs extends gt{constructor(e){super(),ht(this,e,ds,cs,mt,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function ms(n){let e;return{c(){e=Y("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',C(e,"class","svelte-7cmwmc")},m(t,i){ne(t,e,i)},p:$,i:$,o:$,d(t){t&&ee(e)}}}class hs extends gt{constructor(e){super(),ht(this,e,null,ms,mt,{})}}function gs(n){let e,t,i;return{c(){e=He("svg"),t=He("path"),C(t,"stroke-width","4"),C(t,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),C(t,"class","svelte-gzo3ar"),C(e,"width",i=n[0]==="list"?20:void 0),C(e,"viewBox","0 0 70 85"),C(e,"fill","none"),C(e,"class","svelte-gzo3ar"),We(e,"in-map",n[0]!=="list"),We(e,"list-icon",n[0]==="list")},m(r,o){ne(r,e,o),G(e,t)},p(r,[o]){o&1&&i!==(i=r[0]==="list"?20:void 0)&&C(e,"width",i),o&1&&We(e,"in-map",r[0]!=="list"),o&1&&We(e,"list-icon",r[0]==="list")},i:$,o:$,d(r){r&&ee(e)}}}function bs(n,e,t){let{displayIn:i}=e;return n.$$set=r=>{"displayIn"in r&&t(0,i=r.displayIn)},[i]}class ys extends gt{constructor(e){super(),ht(this,e,bs,gs,mt,{displayIn:0})}}function vs(n){let e,t;return{c(){e=He("svg"),t=He("path"),C(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),C(e,"viewBox","0 0 60.006 21.412"),C(e,"width","14"),C(e,"height","20"),C(e,"class","svelte-en2qvf")},m(i,r){ne(i,e,r),G(e,t)},p:$,i:$,o:$,d(i){i&&ee(e)}}}class ps extends gt{constructor(e){super(),ht(this,e,null,vs,mt,{})}}function Ls(n){let e,t,i;return{c(){e=He("svg"),t=He("circle"),i=He("path"),C(t,"cx","4.789"),C(t,"cy","4.787"),C(t,"r","3.85"),C(t,"class","svelte-1aq105l"),C(i,"d","M12.063 12.063 7.635 7.635"),C(i,"class","svelte-1aq105l"),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"width","13"),C(e,"height","13"),C(e,"viewBox","0 0 13 13"),C(e,"class","svelte-1aq105l")},m(r,o){ne(r,e,o),G(e,t),G(e,i)},p:$,i:$,o:$,d(r){r&&ee(e)}}}class ws extends gt{constructor(e){super(),ht(this,e,null,Ls,mt,{})}}function Es(n,e,t){const i=e[1],r=e[0],o=i-r;return n===i&&t?n:((n-r)%o+o)%o+r}function $t(n){const e=[...n];return e[2]<e[0]&&(Math.abs((e[0]+e[2]+360)/2)>Math.abs((e[0]-360+e[2])/2)?e[0]-=360:e[2]+=360),e}let Tt;async function Ss(n,e,t){const i=n==null?void 0:n.getCenterAndZoom();for(const r of e??[])if(!(i&&(r.minZoom!=null&&r.minZoom>i[0]||r.maxZoom!=null&&r.maxZoom<i[0]))){if(r.type==="fixed")return r.coordinates.join(",");e:if(r.type==="client-geolocation"){if(Tt&&r.cachedLocationExpiry&&Tt.time+r.cachedLocationExpiry>Date.now()){if(!Tt.coords)break e;return Tt.coords}let o;try{return o=await new Promise((l,s)=>{t.signal.addEventListener("abort",()=>{s(Error("aborted"))}),navigator.geolocation.getCurrentPosition(a=>{l([a.coords.longitude,a.coords.latitude].map(u=>u.toFixed(6)).join(","))},a=>{s(a)},r)}),o}catch{}finally{r.cachedLocationExpiry&&(Tt={time:Date.now(),coords:o})}if(t.signal.aborted)return}if(r.type==="server-geolocation")return"ip";if(i&&r.type==="map-center")return i[1].toFixed(6)+","+i[2].toFixed(6)}}const Cs=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,si=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,li=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?$/i,ai=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,ui=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,ci=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?$/i;function _s(n){if(!["DMS","DM","DD"].includes(n))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const e=this.decimalCoordinates.split(",").map(g=>Number(g.trim())),t=Number(e[0]),i=Number(e[1]),r=Math.abs(t),o=Math.abs(i),l=t>0?"N":"S",s=i>0?"E":"W";let a;n=="DD"&&(a=`${r}° ${l}, ${o}° ${s}`);const u=Math.floor(r),d=Math.floor(o),c=(r-u)*60,f=(o-d)*60;if(n=="DM"){let g=di(c,3).toFixed(3).padStart(6,"0"),b=di(f,3).toFixed(3).padStart(6,"0");g.endsWith(".000")&&b.endsWith(".000")&&(g=g.replace(/\.000$/,""),b=b.replace(/\.000$/,"")),a=`${u}° ${g}' ${l}, ${d}° ${b}' ${s}`}if(n=="DMS"){const g=Math.floor(c),b=Math.floor(f);let w=((c-g)*60).toFixed(1).padStart(4,"0"),m=((f-b)*60).toFixed(1).padStart(4,"0");const h=g.toString().padStart(2,"0"),x=b.toString().padStart(2,"0");w.endsWith(".0")&&m.endsWith(".0")&&(w=w.replace(/\.0$/,""),m=m.replace(/\.0$/,"")),a=`${u}° ${h}' ${w}" ${l}, ${d}° ${x}' ${m}" ${s}`}return a}else throw new Error("no decimal coordinates to convert")}function di(n,e){const t=Math.pow(10,e);return Math.round((n+Number.EPSILON)*t)/t}function Pn(n,e){e||(e=5),n=n.replace(/\s+/g," ").trim();let t=null,i=null,r="",o="",l=null,s=[],a=!1;if(Cs.test(n))throw new Error("invalid coordinate value");if(si.test(n))if(s=si.exec(n),a=Ot(s),a)t=Math.abs(s[1])+s[2]/60,Number(s[1])<0&&(t*=-1),i=Math.abs(s[3])+s[4]/60,Number(s[3])<0&&(i*=-1),l="DM";else throw new Error("invalid coordinate format");else if(li.test(n))if(s=li.exec(n),a=Ot(s),a){if(t=s[2],i=s[6],t.includes(",")&&(t=t.replace(",",".")),i.includes(",")&&(i=i.replace(",",".")),l="DD",Number(Math.round(t))==Number(t))throw new Error("integer only coordinate provided");if(Number(Math.round(i))==Number(i))throw new Error("integer only coordinate provided");s[1]?(r=s[1],o=s[5]):s[4]&&(r=s[4],o=s[8])}else throw new Error("invalid decimal coordinate format");else if(ai.test(n))if(s=ai.exec(n),a=Ot(s),a)t=Math.abs(parseInt(s[2])),s[4]&&(t+=s[4]/60,l="DM"),s[6]&&(t+=s[6].replace(",",".")/3600,l="DMS"),parseInt(s[2])<0&&(t=-1*t),i=Math.abs(parseInt(s[9])),s[11]&&(i+=s[11]/60),s[13]&&(i+=s[13].replace(",",".")/3600),parseInt(s[9])<0&&(i=-1*i),s[1]?(r=s[1],o=s[8]):s[7]&&(r=s[7],o=s[14]);else throw new Error("invalid DMS coordinates format");else if(ui.test(n))if(s=ui.exec(n),a=Ot(s),a)t=Math.abs(parseInt(s[2])),s[4]&&(t+=s[4]/60,l="DM"),s[6]&&(t+=s[6]/3600,l="DMS"),parseInt(s[2])<0&&(t=-1*t),i=Math.abs(parseInt(s[10])),s[12]&&(i+=s[12]/60),s[14]&&(i+=s[14]/3600),parseInt(s[10])<0&&(i=-1*i),s[1]?(r=s[1],o=s[9]):s[8]&&(r=s[8],o=s[16]);else throw new Error("invalid DMS coordinates format");else if(ci.test(n)){if(s=ci.exec(n),a=Ot(s),s.filter(u=>u).length<=5)throw new Error("invalid coordinates format");if(a)t=Math.abs(parseInt(s[2])),s[4]&&(t+=s[4].replace(",",".")/60,l="DM"),s[6]&&(t+=s[6].replace(",",".")/3600,l="DMS"),parseInt(s[2])<0&&(t=-1*t),i=Math.abs(parseInt(s[10])),s[12]&&(i+=s[12].replace(",",".")/60),s[14]&&(i+=s[14].replace(",",".")/3600),parseInt(s[10])<0&&(i=-1*i),s[1]?(r=s[1],o=s[9]):s[8]&&(r=s[8],o=s[16]);else throw new Error("invalid coordinates format")}if(a){if(Math.abs(i)>=180)throw new Error("invalid longitude value");if(Math.abs(t)>=90)throw new Error("invalid latitude value");if(r&&!o||!r&&o)throw new Error("invalid coordinates value");if(r&&r==o)throw new Error("invalid coordinates format");t.toString().includes(",")&&(t=t.replace(",",".")),i.toString().includes(",")&&(i=i.replace(",","."));let u=/S|SOUTH/i;u.test(r)&&t>0&&(t=-1*t),u=/W|WEST/i,u.test(o)&&i>0&&(i=-1*i);const d=s[0].trim();let c,f;const g=/[,/;\u0020]/g,b=d.match(g);if(b==null){const h=Math.floor(n.length/2);c=d.substring(0,h).trim(),f=d.substring(h).trim()}else{let h;b.length%2==1?h=Math.floor(b.length/2):h=b.length/2-1;let x=0;if(h==0)x=d.indexOf(b[0]),c=d.substring(0,x).trim(),f=d.substring(x+1).trim();else{let _=0,k=0;for(;_<=h;)x=d.indexOf(b[_],k),k=x+1,_++;c=d.substring(0,x).trim(),f=d.substring(x+1).trim()}}const w=c.split(".");if(w.length==2&&w[1]==0&&w[1].length!=2)throw new Error("invalid coordinates format");const m=f.split(".");if(m.length==2&&m[1]==0&&m[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(c)||/^\d+$/.test(f))throw new Error("degree only coordinate/s provided");return t=Number(Number(t).toFixed(e)),i=Number(Number(i).toFixed(e)),Object.freeze({verbatimCoordinates:d,verbatimLatitude:c,verbatimLongitude:f,decimalLatitude:t,decimalLongitude:i,decimalCoordinates:`${t},${i}`,originalFormat:l,closeEnough:ks,toCoordinateFormat:_s})}else throw new Error("coordinates pattern match failed")}function Ot(n){if(!isNaN(n[0]))return!1;const e=[...n];if(e.shift(),e.length%2>0)return!1;const t=/^[-+]?\d+([\.,]\d+)?$/,i=/[eastsouthnorthwest]+/i,r=e.length/2;for(let o=0;o<r;o++){const l=e[o],s=e[o+r],a=t.test(l)&&t.test(s),u=i.test(l)&&i.test(s),d=l==s;if(!(l==null&&s==null)){if(l==null||s==null)return!1;if(a||u||d)continue;return!1}}return!0}function fi(n,e){const t=Math.abs(n-e);return Number(t.toFixed(6))<=1e-5}function ks(n){if(!n)throw new Error("coords must be provided");if(n.includes(",")){const e=n.split(",");if(Number(e[0])==NaN||Number(e[1])==NaN)throw new Error("coords are not valid decimals");return fi(this.decimalLatitude,Number(e[0]))&&fi(this.decimalLongitude,e[1])}else throw new Error("coords being tested must be separated by a comma")}const xs=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Pn.to=xs;const Ms=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],Ns={decimalLatitude:40.123,decimalLongitude:-74.123},Ts=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],Os=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function Ps(){const n=[];return Ms.forEach(e=>{e.decimalLatitude?n.push(e):n.push({...e,...Ns})}),[...n,...Ts,...Os]}const Is=Ps();Pn.formats=Is.map(n=>n.verbatimCoordinates);const Rs=Pn;function mi(n,e,t){const i=n.slice();return i[84]=e[t],i[86]=t,i}function hi(n){let e,t;return e=new hs({}),{c(){ot(e.$$.fragment)},m(i,r){je(e,i,r),t=!0},i(i){t||(se(e.$$.fragment,i),t=!0)},o(i){me(e.$$.fragment,i),t=!1},d(i){qe(e,i)}}}function gi(n){let e,t,i,r,o;return t=new ps({}),{c(){e=Y("button"),ot(t.$$.fragment),C(e,"type","button"),C(e,"title",n[9]),C(e,"class","svelte-bz0zu3"),We(e,"active",n[0])},m(l,s){ne(l,e,s),je(t,e,null),i=!0,r||(o=Ce(e,"click",n[69]),r=!0)},p(l,s){(!i||s[0]&512)&&C(e,"title",l[9]),(!i||s[0]&1)&&We(e,"active",l[0])},i(l){i||(se(t.$$.fragment,l),i=!0)},o(l){me(t.$$.fragment,l),i=!1},d(l){l&&ee(e),qe(t),r=!1,o()}}}function As(n){let e,t=[],i=new Map,r,o,l,s=ri(n[14]);const a=u=>u[84].id+(u[84].address?","+u[84].address:"");for(let u=0;u<s.length;u+=1){let d=mi(n,s,u),c=a(d);i.set(c,t[u]=bi(c,d))}return{c(){e=Y("ul");for(let u=0;u<t.length;u+=1)t[u].c();C(e,"class","options svelte-bz0zu3")},m(u,d){ne(u,e,d);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0,o||(l=[Ce(e,"mouseleave",n[73]),Ce(e,"blur",n[74])],o=!0)},p(u,d){d[0]&17880064&&(s=ri(u[14]),Kt(),t=Xo(t,d,a,1,u,s,i,e,Yo,bi,null,mi),Yt())},i(u){if(!r){for(let d=0;d<s.length;d+=1)se(t[d]);r=!0}},o(u){for(let d=0;d<t.length;d+=1)me(t[d]);r=!1},d(u){u&&ee(e);for(let d=0;d<t.length;d+=1)t[d].d();o=!1,Qe(l)}}}function Ws(n){let e,t,i,r,o,l;return t=new rr({}),{c(){e=Y("div"),ot(t.$$.fragment),i=Ne(),r=Y("div"),o=rt(n[7]),C(r,"class","svelte-bz0zu3"),C(e,"class","no-results svelte-bz0zu3")},m(s,a){ne(s,e,a),je(t,e,null),G(e,i),G(e,r),G(r,o),l=!0},p(s,a){(!l||a[0]&128)&&Wt(o,s[7])},i(s){l||(se(t.$$.fragment,s),l=!0)},o(s){me(t.$$.fragment,s),l=!1},d(s){s&&ee(e),qe(t)}}}function zs(n){let e="",t;return{c(){t=rt(e)},m(i,r){ne(i,t,r)},p:$,i:$,o:$,d(i){i&&ee(t)}}}function Fs(n){let e,t,i,r,o,l,s,a,u,d,c;return t=new rr({}),a=new ir({}),{c(){e=Y("div"),ot(t.$$.fragment),i=Ne(),r=Y("div"),o=rt(n[6]),l=Ne(),s=Y("button"),ot(a.$$.fragment),C(r,"class","svelte-bz0zu3"),C(s,"class","svelte-bz0zu3"),C(e,"class","error svelte-bz0zu3")},m(f,g){ne(f,e,g),je(t,e,null),G(e,i),G(e,r),G(r,o),G(e,l),G(e,s),je(a,s,null),u=!0,d||(c=Ce(s,"click",n[70]),d=!0)},p(f,g){(!u||g[0]&64)&&Wt(o,f[6])},i(f){u||(se(t.$$.fragment,f),se(a.$$.fragment,f),u=!0)},o(f){me(t.$$.fragment,f),me(a.$$.fragment,f),u=!1},d(f){f&&ee(e),qe(t),qe(a),d=!1,c()}}}function bi(n,e){let t,i,r;function o(){return e[71](e[86])}function l(){return e[72](e[84])}return i=new fs({props:{feature:e[84],showPlaceType:e[10],selected:e[15]===e[86],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),i.$on("mouseenter",o),i.$on("focus",l),{key:n,first:null,c(){t=Uo(),ot(i.$$.fragment),this.first=t},m(s,a){ne(s,t,a),je(i,s,a),r=!0},p(s,a){e=s;const u={};a[0]&16384&&(u.feature=e[84]),a[0]&1024&&(u.showPlaceType=e[10]),a[0]&49152&&(u.selected=e[15]===e[86]),a[0]&4096&&(u.iconsBaseUrl=e[12]),i.$set(u)},i(s){r||(se(i.$$.fragment,s),r=!0)},o(s){me(i.$$.fragment,s),r=!1},d(s){s&&ee(t),qe(i,s)}}}function Ds(n){let e,t,i,r,o,l,s,a,u,d,c,f,g,b,w,m,h,x,_,k,N,O=!1;o=new ws({}),c=new ir({});let v=n[19]&&hi(),y=n[5]==="button"&&gi(n);const M=n[61].default,z=Wo(M,n,n[60],null),E=[Fs,zs,Ws,As],D=[];function K(P,U){var te,A;return P[18]?0:P[16]?((te=P[14])==null?void 0:te.length)===0?2:P[16]&&(A=P[14])!=null&&A.length?3:-1:1}return~(m=K(n))&&(h=D[m]=E[m](n)),{c(){e=Ne(),t=Y("form"),i=Y("div"),r=Y("button"),ot(o.$$.fragment),l=Ne(),s=Y("input"),a=Ne(),u=Y("div"),d=Y("button"),ot(c.$$.fragment),f=Ne(),v&&v.c(),g=Ne(),y&&y.c(),b=Ne(),z&&z.c(),w=Ne(),h&&h.c(),C(r,"class","search-button svelte-bz0zu3"),C(r,"type","button"),C(s,"placeholder",n[8]),C(s,"aria-label",n[8]),C(s,"class","svelte-bz0zu3"),C(d,"type","button"),C(d,"title",n[3]),C(d,"class","svelte-bz0zu3"),C(u,"class","clear-button-container svelte-bz0zu3"),We(u,"displayable",n[1]!==""),C(i,"class","input-group svelte-bz0zu3"),C(t,"tabindex","0"),C(t,"class",x=ei(n[2])+" svelte-bz0zu3"),We(t,"can-collapse",n[4]&&n[1]==="")},m(P,U){ne(P,e,U),ne(P,t,U),G(t,i),G(i,r),je(o,r,null),G(i,l),G(i,s),n[63](s),ti(s,n[1]),G(i,a),G(i,u),G(u,d),je(c,d,null),G(u,f),v&&v.m(u,null),G(i,g),y&&y.m(i,null),G(i,b),z&&z.m(i,null),G(t,w),~m&&D[m].m(t,null),_=!0,k||(N=[Ce(r,"click",n[62]),Ce(s,"input",n[64]),Ce(s,"focus",n[65]),Ce(s,"blur",n[66]),Ce(s,"keydown",n[22]),Ce(s,"input",n[67]),Ce(d,"click",n[68]),Ce(t,"submit",Ho(n[21]))],k=!0)},p(P,U){(!_||U[0]&256)&&C(s,"placeholder",P[8]),(!_||U[0]&256)&&C(s,"aria-label",P[8]),U[0]&2&&s.value!==P[1]&&ti(s,P[1]),(!_||U[0]&8)&&C(d,"title",P[3]),P[19]?v?U[0]&524288&&se(v,1):(v=hi(),v.c(),se(v,1),v.m(u,null)):v&&(Kt(),me(v,1,1,()=>{v=null}),Yt()),(!_||U[0]&2)&&We(u,"displayable",P[1]!==""),P[5]==="button"?y?(y.p(P,U),U[0]&32&&se(y,1)):(y=gi(P),y.c(),se(y,1),y.m(i,b)):y&&(Kt(),me(y,1,1,()=>{y=null}),Yt()),z&&z.p&&(!_||U[1]&536870912)&&Fo(z,M,P,P[60],_?zo(M,P[60],U,null):Do(P[60]),null);let te=m;m=K(P),m===te?~m&&D[m].p(P,U):(h&&(Kt(),me(D[te],1,1,()=>{D[te]=null}),Yt()),~m?(h=D[m],h?h.p(P,U):(h=D[m]=E[m](P),h.c()),se(h,1),h.m(t,null)):h=null),(!_||U[0]&4&&x!==(x=ei(P[2])+" svelte-bz0zu3"))&&C(t,"class",x),(!_||U[0]&22)&&We(t,"can-collapse",P[4]&&P[1]==="")},i(P){_||(se(O),se(o.$$.fragment,P),se(c.$$.fragment,P),se(v),se(y),se(z,P),se(h),_=!0)},o(P){me(O),me(o.$$.fragment,P),me(c.$$.fragment,P),me(v),me(y),me(z,P),me(h),_=!1},d(P){P&&(ee(e),ee(t)),qe(o),n[63](null),qe(c),v&&v.d(),y&&y.d(),z&&z.d(P),~m&&D[m].d(),k=!1,Qe(N)}}}function Us(n,e,t){let i,r,{$$slots:o={},$$scope:l}=e;const s={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:a=void 0}=e,{apiKey:u}=e,{bbox:d=void 0}=e,{clearButtonTitle:c="clear"}=e,{clearOnBlur:f=!1}=e,{collapsed:g=!1}=e,{country:b=void 0}=e,{debounceSearch:w=200}=e,{enableReverse:m="never"}=e,{errorMessage:h="Something went wrong…"}=e,{filter:x=()=>!0}=e,{flyTo:_=!0}=e,{fuzzyMatch:k=!0}=e,{language:N=void 0}=e,{limit:O=void 0}=e,{mapController:v=void 0}=e,{minLength:y=2}=e,{noResultsMessage:M="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:z="Search"}=e,{proximity:E=[{type:"server-geolocation"}]}=e,{reverseActive:D=m==="always"}=e,{reverseButtonTitle:K="toggle reverse geocoding"}=e,{searchValue:P=""}=e,{pickedResultStyle:U="full-geometry"}=e,{showPlaceType:te="if-needed"}=e,{showResultsWhileTyping:A=!0}=e,{selectFirst:le=!0}=e,{flyToSelected:ue=!1}=e,{markerOnSelected:_e=!0}=e,{types:ge=void 0}=e,{exhaustiveReverseGeocoding:ie=!1}=e,{excludeTypes:re=!1}=e,{zoom:oe=s}=e,{apiUrl:de="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Q={}}=e,{iconsBaseUrl:be="https://cdn.maptiler.com/maptiler-geocoding-control/v2.0.1/icons/"}=e,{adjustUrlQuery:we=()=>{}}=e;function ke(){p.focus()}function Pe(){p.blur()}function fe(L,V=!0,Ee=!1){t(1,P=L),V?(t(15,I=-1),zn()):(an(!Ee,Ee),setTimeout(()=>{p.focus(),p.select()}))}function ze(){t(14,F=void 0),t(56,W=void 0),t(15,I=-1)}function T(){t(55,B=[]),t(56,W=void 0)}let S=!1,F,B,W,xe="",p,I=-1,j,Ze=[],pt,Lt,Gt,on;const vr=new Set,Ve=jo();Go(()=>{v&&(v.setEventHandler(void 0),v.indicateReverse(!1),v.setSelectedMarker(-1),v.setFeatures(void 0,void 0,!1))});function zn(L){if(Lt&&(clearTimeout(Lt),Lt=void 0),I>-1&&F)t(56,W=F[I]),t(1,P=W.place_type[0]==="reverse"?W.place_name:W.place_name.replace(/,.*/,"")),t(18,j=void 0),t(55,B=void 0),t(15,I=-1);else if(P){const V=L||!sn(P);ln(P,{exact:!0}).then(()=>{t(55,B=F),t(56,W=void 0),V&&pr()}).catch(Ee=>t(18,j=Ee))}}function sn(L){try{return Rs(L,6)}catch{return!1}}async function ln(L,{byId:V=!1,exact:Ee=!1}={}){t(18,j=void 0),pt==null||pt.abort();const ye=new AbortController;t(19,pt=ye);try{const Z=sn(L),ae=new URLSearchParams;if(N!==void 0&&ae.set("language",Array.isArray(N)?N.join(","):N??""),ge&&ae.set("types",ge.join(",")),re&&ae.set("excludeTypes",String(re)),d&&ae.set("bbox",d.map(jt=>jt.toFixed(6)).join(",")),b&&ae.set("country",Array.isArray(b)?b.join(","):b),!V&&!Z){const jt=await Ss(v,E,ye);jt&&ae.set("proximity",jt),(Ee||!A)&&ae.set("autocomplete","false"),ae.set("fuzzyMatch",String(k))}O!==void 0&&(ie||!Z||(ge==null?void 0:ge.length)===1)&&ae.set("limit",String(O)),ae.set("key",u),we(ae);const Be=de+"/"+encodeURIComponent(Z?Z.decimalLongitude+","+Z.decimalLatitude:L)+".json?"+ae.toString();if(Be===xe){V?(t(14,F=void 0),t(56,W=Ze[0])):t(14,F=Ze);return}xe=Be;const cn=await fetch(Be,{signal:ye.signal,...Q});if(!cn.ok)throw new Error(await cn.text());const dn=await cn.json();Ve("response",{url:Be,featureCollection:dn}),V?(t(14,F=void 0),t(56,W=dn.features[0]),Ze=[W]):(t(14,F=dn.features.filter(x)),Z&&F.unshift({type:"Feature",properties:{},id:"reverse_"+Z.decimalLongitude+"_"+Z.decimalLatitude,text:Z.decimalLatitude+", "+Z.decimalLongitude,place_name:Z.decimalLatitude+", "+Z.decimalLongitude,place_type:["reverse"],center:[Z.decimalLongitude,Z.decimalLatitude],bbox:[Z.decimalLongitude,Z.decimalLatitude,Z.decimalLongitude,Z.decimalLatitude],geometry:{type:"Point",coordinates:[Z.decimalLongitude,Z.decimalLatitude]}}),Ze=F,Z&&p.focus())}catch(Z){if(Z&&typeof Z=="object"&&"name"in Z&&Z.name==="AbortError")return;throw Z}finally{ye===pt&&t(19,pt=void 0)}}function pr(){var L;if(!(B!=null&&B.length)||!_)return;const V=[180,90,-180,-90],Ee=!B.some(Z=>!Z.matching_text);let ye;for(const Z of B){const ae=Nt(Z);if(ye=ye===void 0?ae:ae===void 0?ye:Math.max(ye,ae),Ee||!Z.matching_text)for(const Be of[0,1,2,3])V[Be]=Math[Be<2?"min":"max"](V[Be],((L=Z.bbox)==null?void 0:L[Be])??Z.center[Be%2])}v&&B.length>0&&(W&&V[0]===V[2]&&V[1]===V[3]?v.flyTo(W.center,Nt(W)):v.fitBounds($t(V),50,ye))}function Nt(L){var V;if(!L.bbox||L.bbox[0]!==L.bbox[2]&&L.bbox[1]!==L.bbox[3])return;const Ee=L.id.replace(/\..*/,"");return(Array.isArray((V=L.properties)==null?void 0:V.categories)?L.properties.categories.reduce((ye,Z)=>{const ae=oe[Ee+"."+Z];return ye===void 0?ae:ae===void 0?ye:Math.max(ye,ae)},void 0):void 0)??oe[Ee]}function Lr(L){t(0,D=m==="always"),t(14,F=void 0),t(56,W=void 0),t(15,I=-1),fe(L[1].toFixed(6)+", "+Es(L[0],[-180,180],!0).toFixed(6),!1,!0)}function wr(L){if(!F)return;let V=L.key==="ArrowDown"?1:L.key==="ArrowUp"?-1:0;V&&(I===(le?0:-1)&&V===-1&&t(15,I=F.length),t(15,I+=V),I>=F.length&&t(15,I=-1),I<0&&le&&t(15,I=0),L.preventDefault())}function an(L=!0,V=!1){if(t(18,j=void 0),A||V){if(Lt&&clearTimeout(Lt),P.length<y)return;const Ee=P;Lt=window.setTimeout(()=>{ln(Ee).catch(ye=>t(18,j=ye))},L?w:0)}else t(14,F=void 0),t(18,j=void 0)}function un(L){t(56,W=L),t(1,P=L.place_name),t(15,I=-1)}const Er=()=>p.focus();function Sr(L){yn[L?"unshift":"push"](()=>{p=L,t(17,p)})}function Cr(){P=this.value,t(1,P),t(13,S),t(28,f)}const _r=()=>t(13,S=!0),kr=()=>t(13,S=!1),xr=()=>an(),Mr=()=>{t(1,P=""),p.focus()},Nr=()=>t(0,D=!D),Tr=()=>t(18,j=void 0),Or=L=>t(15,I=L),Pr=L=>un(L),Ir=()=>{le||t(15,I=-1)},Rr=()=>{};return n.$$set=L=>{"class"in L&&t(2,a=L.class),"apiKey"in L&&t(26,u=L.apiKey),"bbox"in L&&t(27,d=L.bbox),"clearButtonTitle"in L&&t(3,c=L.clearButtonTitle),"clearOnBlur"in L&&t(28,f=L.clearOnBlur),"collapsed"in L&&t(4,g=L.collapsed),"country"in L&&t(29,b=L.country),"debounceSearch"in L&&t(30,w=L.debounceSearch),"enableReverse"in L&&t(5,m=L.enableReverse),"errorMessage"in L&&t(6,h=L.errorMessage),"filter"in L&&t(31,x=L.filter),"flyTo"in L&&t(32,_=L.flyTo),"fuzzyMatch"in L&&t(33,k=L.fuzzyMatch),"language"in L&&t(34,N=L.language),"limit"in L&&t(35,O=L.limit),"mapController"in L&&t(36,v=L.mapController),"minLength"in L&&t(37,y=L.minLength),"noResultsMessage"in L&&t(7,M=L.noResultsMessage),"placeholder"in L&&t(8,z=L.placeholder),"proximity"in L&&t(38,E=L.proximity),"reverseActive"in L&&t(0,D=L.reverseActive),"reverseButtonTitle"in L&&t(9,K=L.reverseButtonTitle),"searchValue"in L&&t(1,P=L.searchValue),"pickedResultStyle"in L&&t(39,U=L.pickedResultStyle),"showPlaceType"in L&&t(10,te=L.showPlaceType),"showResultsWhileTyping"in L&&t(40,A=L.showResultsWhileTyping),"selectFirst"in L&&t(11,le=L.selectFirst),"flyToSelected"in L&&t(41,ue=L.flyToSelected),"markerOnSelected"in L&&t(42,_e=L.markerOnSelected),"types"in L&&t(43,ge=L.types),"exhaustiveReverseGeocoding"in L&&t(44,ie=L.exhaustiveReverseGeocoding),"excludeTypes"in L&&t(45,re=L.excludeTypes),"zoom"in L&&t(46,oe=L.zoom),"apiUrl"in L&&t(47,de=L.apiUrl),"fetchParameters"in L&&t(48,Q=L.fetchParameters),"iconsBaseUrl"in L&&t(12,be=L.iconsBaseUrl),"adjustUrlQuery"in L&&t(49,we=L.adjustUrlQuery),"$$scope"in L&&t(60,l=L.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&32&&t(0,D=m==="always"),n.$$.dirty[0]&268443648&&setTimeout(()=>{t(16,Gt=S),f&&!S&&t(1,P="")}),n.$$.dirty[0]&16386|n.$$.dirty[1]&64&&P.length<y&&(t(56,W=void 0),t(14,F=void 0),t(18,j=void 0),t(55,B=F)),n.$$.dirty[1]&33554688&&U!=="marker-only"&&W&&!W.address&&W.geometry.type==="Point"&&W.place_type[0]!=="reverse"&&ln(W.id,{byId:!0}).catch(L=>t(18,j=L)),n.$$.dirty[1]&100663330&&(v&&W&&W.id!==on&&_&&(!W.bbox||W.bbox[0]===W.bbox[2]&&W.bbox[1]===W.bbox[3]?v.flyTo(W.center,Nt(W)):v.fitBounds($t(W.bbox),50,Nt(W)),t(14,F=void 0),t(55,B=void 0),t(15,I=-1)),t(57,on=W==null?void 0:W.id)),n.$$.dirty[0]&18432&&le&&F!=null&&F.length&&t(15,I=0),n.$$.dirty[0]&2&&t(15,I=-1),n.$$.dirty[0]&16384|n.$$.dirty[1]&16777216&&B!==F&&t(55,B=void 0),n.$$.dirty[0]&81921|n.$$.dirty[1]&16777248&&v&&v.setEventHandler(L=>{switch(L.type){case"mapClick":D&&Lr(L.coordinates);break;case"markerClick":{const V=F==null?void 0:F.find(Ee=>Ee.id===L.id);V&&un(V)}break;case"markerMouseEnter":B&&t(15,I=Gt?(F==null?void 0:F.findIndex(V=>V.id===L.id))??-1:-1);break;case"markerMouseLeave":B&&t(15,I=-1);break}}),n.$$.dirty[0]&49152&&t(58,r=F==null?void 0:F[I]),n.$$.dirty[1]&134218786&&v&&r&&_&&ue&&v.flyTo(r.center,Nt(r)),n.$$.dirty[1]&256&&t(59,i=U==="full-geometry-including-polygon-center-marker"),n.$$.dirty[1]&268437536&&(_e||v==null||v.setFeatures(void 0,void 0,i)),n.$$.dirty[1]&419432480&&v&&_e&&!B&&(v.setFeatures(r?[r]:void 0,void 0,i),v.setSelectedMarker(r?0:-1)),n.$$.dirty[1]&318767136&&v&&v.setFeatures(B,W,i),n.$$.dirty[0]&32768|n.$$.dirty[1]&16777248&&B&&v&&v.setSelectedMarker(I),n.$$.dirty[0]&2|n.$$.dirty[1]&32&&v){const L=sn(P);v.setReverseMarker(L?[L.decimalLongitude,L.decimalLatitude]:void 0)}n.$$.dirty[1]&134217728&&Ve("select",{feature:r}),n.$$.dirty[1]&33554432&&Ve("pick",{feature:W}),n.$$.dirty[0]&81920&&Ve("optionsvisibilitychange",{optionsVisible:Gt&&!!F}),n.$$.dirty[0]&16384&&Ve("featureslisted",{features:F}),n.$$.dirty[1]&16777216&&Ve("featuresmarked",{features:B}),n.$$.dirty[0]&1&&Ve("reversetoggle",{reverse:D}),n.$$.dirty[0]&2&&Ve("querychange",{query:P}),n.$$.dirty[0]&1|n.$$.dirty[1]&32&&v&&v.indicateReverse(D)},[D,P,a,c,g,m,h,M,z,K,te,le,be,S,F,I,Gt,p,j,pt,vr,zn,wr,an,un,s,u,d,f,b,w,x,_,k,N,O,v,y,E,U,A,ue,_e,ge,ie,re,oe,de,Q,we,ke,Pe,fe,ze,T,B,W,on,r,i,l,o,Er,Sr,Cr,_r,kr,xr,Mr,Nr,Tr,Or,Pr,Ir,Rr]}let Hs=class extends gt{constructor(n){super(),ht(this,n,Us,Ds,mt,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,pickedResultStyle:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,exhaustiveReverseGeocoding:44,excludeTypes:45,zoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}};function Ft(n,e,t={}){const i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function In(n,e,t={}){for(const i of n){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let r=0;r<i[i.length-1].length;r++)if(i[i.length-1][r]!==i[0][r])throw new Error("First and last Position are not equivalent.")}return Ft({type:"Polygon",coordinates:n},e,t)}function Dt(n,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function or(n,e,t={}){return Ft({type:"MultiPolygon",coordinates:n},e,t)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Bs(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(u){return function(d){return a([u,d])}}function a(u){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,r&&(o=u[0]&2?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(d){u=[6,d],r=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var st=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function Zs(n,e){return n>e?1:n<e?-1:0}function Ke(n,e,t){for(var i=new st(null,null),r=i,o=i;;){var l=t(n,e.key);if(l<0){if(e.left===null)break;if(t(n,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,e.left===null)break}o.left=e,o=e,e=e.left}else if(l>0){if(e.right===null)break;if(t(n,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,e.right===null)break}r.right=e,r=e,e=e.right}else break}return r.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function hn(n,e,t,i){var r=new st(n,e);if(t===null)return r.left=r.right=null,r;t=Ke(n,t,i);var o=i(n,t.key);return o<0?(r.left=t.left,r.right=t,t.left=null):o>=0&&(r.right=t.right,r.left=t,t.right=null),r}function yi(n,e,t){var i=null,r=null;if(e){e=Ke(n,e,t);var o=t(e.key,n);o===0?(i=e.left,r=e.right):o<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function Gs(n,e,t){return e===null?n:(n===null||(e=Ke(n.key,e,t),e.left=n),e)}function Ln(n,e,t,i,r){if(n){i(""+e+(t?"└── ":"├── ")+r(n)+`
`);var o=e+(t?"    ":"│   ");n.left&&Ln(n.left,o,!1,i,r),n.right&&Ln(n.right,o,!0,i,r)}}var Rn=function(){function n(e){e===void 0&&(e=Zs),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=hn(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var i=new st(e,t);this._root===null&&(i.left=i.right=null,this._size++,this._root=i);var r=this._comparator,o=Ke(e,this._root,r),l=r(e,o.key);return l===0?this._root=o:(l<0?(i.left=o.left,i.right=o,o.left=null):l>0&&(i.right=o.right,i.left=o,o.right=null),this._size++,this._root=i),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,i){var r;if(t===null)return null;t=Ke(e,t,i);var o=i(e,t.key);return o===0?(t.left===null?r=t.right:(r=Ke(e,t.left,i),r.right=t.right),this._size--,r):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Ke(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,i=this._comparator;t;){var r=i(e,t.key);if(r===0)return t;r<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=Ke(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,i=this._comparator;t;){var r=i(e,t.key);if(r===0)return!0;r<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var i=this._root,r=[],o=!1;!o;)i!==null?(r.push(i),i=i.left):r.length!==0?(i=r.pop(),e.call(t,i),i=i.right):o=!0;return this},n.prototype.range=function(e,t,i,r){for(var o=[],l=this._comparator,s=this._root,a;o.length!==0||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),a=l(s.key,t),a>0)break;if(l(s.key,e)>=0&&i.call(r,s))return this;s=s.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var i=t.key;return e.push(i)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var i=t.data;return e.push(i)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,i=!1,r=0,o=[];!i;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),r===e)return t;r++,t=t.right}else i=!0;return null},n.prototype.next=function(e){var t=this._root,i=null;if(e.right){for(i=e.right;i.left;)i=i.left;return i}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(o===0)break;o<0?(i=t,t=t.left):t=t.right}return i},n.prototype.prev=function(e){var t=this._root,i=null;if(e.left!==null){for(i=e.left;i.right;)i=i.right;return i}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(o===0)break;o<0?t=t.left:(i=t,t=t.right)}return i},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return qs(this._root)},n.prototype.load=function(e,t,i){t===void 0&&(t=[]),i===void 0&&(i=!1);var r=e.length,o=this._comparator;if(i&&Sn(e,t,0,r-1,o),this._root===null)this._root=wn(e,t,0,r),this._size=r;else{var l=Qs(this.toList(),js(e,t),o);r=this._size+r,this._root=En({head:l},0,r)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(i){return String(i.key)});var t=[];return Ln(this._root,"",!0,function(i){return t.push(i)},e),t.join("")},n.prototype.update=function(e,t,i){var r=this._comparator,o=yi(e,this._root,r),l=o.left,s=o.right;r(e,t)<0?s=hn(t,i,s,r):l=hn(t,i,l,r),this._root=Gs(l,s,r)},n.prototype.split=function(e){return yi(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e,t,i;return Bs(this,function(r){switch(r.label){case 0:e=this._root,t=[],i=!1,r.label=1;case 1:return i?[3,6]:e===null?[3,2]:(t.push(e),e=e.left,[3,5]);case 2:return t.length===0?[3,4]:(e=t.pop(),[4,e]);case 3:return r.sent(),e=e.right,[3,5];case 4:i=!0,r.label=5;case 5:return[3,1];case 6:return[2]}})},n}();function wn(n,e,t,i){var r=i-t;if(r>0){var o=t+Math.floor(r/2),l=n[o],s=e[o],a=new st(l,s);return a.left=wn(n,e,t,o),a.right=wn(n,e,o+1,i),a}return null}function js(n,e){for(var t=new st(null,null),i=t,r=0;r<n.length;r++)i=i.next=new st(n[r],e[r]);return i.next=null,t.next}function qs(n){for(var e=n,t=[],i=!1,r=new st(null,null),o=r;!i;)e?(t.push(e),e=e.left):t.length>0?(e=o=o.next=t.pop(),e=e.right):i=!0;return o.next=null,r.next}function En(n,e,t){var i=t-e;if(i>0){var r=e+Math.floor(i/2),o=En(n,e,r),l=n.head;return l.left=o,n.head=n.head.next,l.right=En(n,r+1,t),l}return null}function Qs(n,e,t){for(var i=new st(null,null),r=i,o=n,l=e;o!==null&&l!==null;)t(o.key,l.key)<0?(r.next=o,o=o.next):(r.next=l,l=l.next),r=r.next;return o!==null?r.next=o:l!==null&&(r.next=l),i.next}function Sn(n,e,t,i,r){if(!(t>=i)){for(var o=n[t+i>>1],l=t-1,s=i+1;;){do l++;while(r(n[l],o)<0);do s--;while(r(n[s],o)>0);if(l>=s)break;var a=n[l];n[l]=n[s],n[s]=a,a=e[l],e[l]=e[s],e[s]=a}Sn(n,e,t,s,r),Sn(n,e,s+1,i,r)}}const Ge=11102230246251565e-32,ve=134217729,Vs=(3+8*Ge)*Ge;function gn(n,e,t,i,r){let o,l,s,a,u=e[0],d=i[0],c=0,f=0;d>u==d>-u?(o=u,u=e[++c]):(o=d,d=i[++f]);let g=0;if(c<n&&f<t)for(d>u==d>-u?(l=u+o,s=o-(l-u),u=e[++c]):(l=d+o,s=o-(l-d),d=i[++f]),o=l,s!==0&&(r[g++]=s);c<n&&f<t;)d>u==d>-u?(l=o+u,a=l-o,s=o-(l-a)+(u-a),u=e[++c]):(l=o+d,a=l-o,s=o-(l-a)+(d-a),d=i[++f]),o=l,s!==0&&(r[g++]=s);for(;c<n;)l=o+u,a=l-o,s=o-(l-a)+(u-a),u=e[++c],o=l,s!==0&&(r[g++]=s);for(;f<t;)l=o+d,a=l-o,s=o-(l-a)+(d-a),d=i[++f],o=l,s!==0&&(r[g++]=s);return(o!==0||g===0)&&(r[g++]=o),g}function Ks(n,e){let t=e[0];for(let i=1;i<n;i++)t+=e[i];return t}function Zt(n){return new Float64Array(n)}const Ys=(3+16*Ge)*Ge,Xs=(2+12*Ge)*Ge,Js=(9+64*Ge)*Ge*Ge,Ct=Zt(4),vi=Zt(8),pi=Zt(12),Li=Zt(16),Se=Zt(4);function $s(n,e,t,i,r,o,l){let s,a,u,d,c,f,g,b,w,m,h,x,_,k,N,O,v,y;const M=n-r,z=t-r,E=e-o,D=i-o;k=M*D,f=ve*M,g=f-(f-M),b=M-g,f=ve*D,w=f-(f-D),m=D-w,N=b*m-(k-g*w-b*w-g*m),O=E*z,f=ve*E,g=f-(f-E),b=E-g,f=ve*z,w=f-(f-z),m=z-w,v=b*m-(O-g*w-b*w-g*m),h=N-v,c=N-h,Ct[0]=N-(h+c)+(c-v),x=k+h,c=x-k,_=k-(x-c)+(h-c),h=_-O,c=_-h,Ct[1]=_-(h+c)+(c-O),y=x+h,c=y-x,Ct[2]=x-(y-c)+(h-c),Ct[3]=y;let K=Ks(4,Ct),P=Xs*l;if(K>=P||-K>=P||(c=n-M,s=n-(M+c)+(c-r),c=t-z,u=t-(z+c)+(c-r),c=e-E,a=e-(E+c)+(c-o),c=i-D,d=i-(D+c)+(c-o),s===0&&a===0&&u===0&&d===0)||(P=Js*l+Vs*Math.abs(K),K+=M*d+D*s-(E*u+z*a),K>=P||-K>=P))return K;k=s*D,f=ve*s,g=f-(f-s),b=s-g,f=ve*D,w=f-(f-D),m=D-w,N=b*m-(k-g*w-b*w-g*m),O=a*z,f=ve*a,g=f-(f-a),b=a-g,f=ve*z,w=f-(f-z),m=z-w,v=b*m-(O-g*w-b*w-g*m),h=N-v,c=N-h,Se[0]=N-(h+c)+(c-v),x=k+h,c=x-k,_=k-(x-c)+(h-c),h=_-O,c=_-h,Se[1]=_-(h+c)+(c-O),y=x+h,c=y-x,Se[2]=x-(y-c)+(h-c),Se[3]=y;const U=gn(4,Ct,4,Se,vi);k=M*d,f=ve*M,g=f-(f-M),b=M-g,f=ve*d,w=f-(f-d),m=d-w,N=b*m-(k-g*w-b*w-g*m),O=E*u,f=ve*E,g=f-(f-E),b=E-g,f=ve*u,w=f-(f-u),m=u-w,v=b*m-(O-g*w-b*w-g*m),h=N-v,c=N-h,Se[0]=N-(h+c)+(c-v),x=k+h,c=x-k,_=k-(x-c)+(h-c),h=_-O,c=_-h,Se[1]=_-(h+c)+(c-O),y=x+h,c=y-x,Se[2]=x-(y-c)+(h-c),Se[3]=y;const te=gn(U,vi,4,Se,pi);k=s*d,f=ve*s,g=f-(f-s),b=s-g,f=ve*d,w=f-(f-d),m=d-w,N=b*m-(k-g*w-b*w-g*m),O=a*u,f=ve*a,g=f-(f-a),b=a-g,f=ve*u,w=f-(f-u),m=u-w,v=b*m-(O-g*w-b*w-g*m),h=N-v,c=N-h,Se[0]=N-(h+c)+(c-v),x=k+h,c=x-k,_=k-(x-c)+(h-c),h=_-O,c=_-h,Se[1]=_-(h+c)+(c-O),y=x+h,c=y-x,Se[2]=x-(y-c)+(h-c),Se[3]=y;const A=gn(te,pi,4,Se,Li);return Li[A-1]}function el(n,e,t,i,r,o){const l=(e-o)*(t-r),s=(n-r)*(i-o),a=l-s,u=Math.abs(l+s);return Math.abs(a)>=Ys*u?a:-$s(n,e,t,i,r,o,u)}const Pt=(n,e)=>n.ll.x<=e.x&&e.x<=n.ur.x&&n.ll.y<=e.y&&e.y<=n.ur.y,Cn=(n,e)=>{if(e.ur.x<n.ll.x||n.ur.x<e.ll.x||e.ur.y<n.ll.y||n.ur.y<e.ll.y)return null;const t=n.ll.x<e.ll.x?e.ll.x:n.ll.x,i=n.ur.x<e.ur.x?n.ur.x:e.ur.x,r=n.ll.y<e.ll.y?e.ll.y:n.ll.y,o=n.ur.y<e.ur.y?n.ur.y:e.ur.y;return{ll:{x:t,y:r},ur:{x:i,y:o}}};let $e=Number.EPSILON;$e===void 0&&($e=Math.pow(2,-52));const tl=$e*$e,wi=(n,e)=>{if(-$e<n&&n<$e&&-$e<e&&e<$e)return 0;const t=n-e;return t*t<tl*n*e?0:n<e?-1:1};class nl{constructor(){this.reset()}reset(){this.xRounder=new Ei,this.yRounder=new Ei}round(e,t){return{x:this.xRounder.round(e),y:this.yRounder.round(t)}}}class Ei{constructor(){this.tree=new Rn,this.round(0)}round(e){const t=this.tree.add(e),i=this.tree.prev(t);if(i!==null&&wi(t.key,i.key)===0)return this.tree.remove(e),i.key;const r=this.tree.next(t);return r!==null&&wi(t.key,r.key)===0?(this.tree.remove(e),r.key):e}}const Ut=new nl,Xt=(n,e)=>n.x*e.y-n.y*e.x,sr=(n,e)=>n.x*e.x+n.y*e.y,Si=(n,e,t)=>{const i=el(n.x,n.y,e.x,e.y,t.x,t.y);return i>0?-1:i<0?1:0},en=n=>Math.sqrt(sr(n,n)),il=(n,e,t)=>{const i={x:e.x-n.x,y:e.y-n.y},r={x:t.x-n.x,y:t.y-n.y};return Xt(r,i)/en(r)/en(i)},rl=(n,e,t)=>{const i={x:e.x-n.x,y:e.y-n.y},r={x:t.x-n.x,y:t.y-n.y};return sr(r,i)/en(r)/en(i)},Ci=(n,e,t)=>e.y===0?null:{x:n.x+e.x/e.y*(t-n.y),y:t},_i=(n,e,t)=>e.x===0?null:{x:t,y:n.y+e.y/e.x*(t-n.x)},ol=(n,e,t,i)=>{if(e.x===0)return _i(t,i,n.x);if(i.x===0)return _i(n,e,t.x);if(e.y===0)return Ci(t,i,n.y);if(i.y===0)return Ci(n,e,t.y);const r=Xt(e,i);if(r==0)return null;const o={x:t.x-n.x,y:t.y-n.y},l=Xt(o,e)/r,s=Xt(o,i)/r,a=n.x+s*e.x,u=t.x+l*i.x,d=n.y+s*e.y,c=t.y+l*i.y,f=(a+u)/2,g=(d+c)/2;return{x:f,y:g}};class Re{static compare(e,t){const i=Re.comparePoints(e.point,t.point);return i!==0?i:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:nt.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}constructor(e,t){e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let i=0,r=t.length;i<r;i++){const o=t[i];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const i=this.point.events[t];if(i.segment.consumedBy===void 0)for(let r=t+1;r<e;r++){const o=this.point.events[r];o.consumedBy===void 0&&i.otherSE.point.events===o.otherSE.point.events&&i.segment.consume(o.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,i=this.point.events.length;t<i;t++){const r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}getLeftmostComparator(e){const t=new Map,i=r=>{const o=r.otherSE;t.set(r,{sine:il(this.point,e.point,o.point),cosine:rl(this.point,e.point,o.point)})};return(r,o)=>{t.has(r)||i(r),t.has(o)||i(o);const{sine:l,cosine:s}=t.get(r),{sine:a,cosine:u}=t.get(o);return l>=0&&a>=0?s<u?1:s>u?-1:0:l<0&&a<0?s<u?-1:s>u?1:0:a<l?-1:a>l?1:0}}}let sl=0;class nt{static compare(e,t){const i=e.leftSE.point.x,r=t.leftSE.point.x,o=e.rightSE.point.x,l=t.rightSE.point.x;if(l<i)return 1;if(o<r)return-1;const s=e.leftSE.point.y,a=t.leftSE.point.y,u=e.rightSE.point.y,d=t.rightSE.point.y;if(i<r){if(a<s&&a<u)return 1;if(a>s&&a>u)return-1;const c=e.comparePoint(t.leftSE.point);if(c<0)return 1;if(c>0)return-1;const f=t.comparePoint(e.rightSE.point);return f!==0?f:-1}if(i>r){if(s<a&&s<d)return-1;if(s>a&&s>d)return 1;const c=t.comparePoint(e.leftSE.point);if(c!==0)return c;const f=e.comparePoint(t.rightSE.point);return f<0?1:f>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(o<l){const c=t.comparePoint(e.rightSE.point);if(c!==0)return c}if(o>l){const c=e.comparePoint(t.rightSE.point);if(c<0)return 1;if(c>0)return-1}if(o!==l){const c=u-s,f=o-i,g=d-a,b=l-r;if(c>f&&g<b)return 1;if(c<f&&g>b)return-1}return o>l?1:o<l||u<d?-1:u>d?1:e.id<t.id?-1:e.id>t.id?1:0}constructor(e,t,i,r){this.id=++sl,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=i,this.windings=r}static fromRing(e,t,i){let r,o,l;const s=Re.comparePoints(e,t);if(s<0)r=e,o=t,l=1;else if(s>0)r=t,o=e,l=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const a=new Re(r,!0),u=new Re(o,!1);return new nt(a,u,[i],[l])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<t?e:t},ur:{x:this.rightSE.point.x,y:e>t?e:t}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}comparePoint(e){if(this.isAnEndpoint(e))return 0;const t=this.leftSE.point,i=this.rightSE.point,r=this.vector();if(t.x===i.x)return e.x===t.x?0:e.x<t.x?1:-1;const o=(e.y-t.y)/r.y,l=t.x+o*r.x;if(e.x===l)return 0;const s=(e.x-t.x)/r.x,a=t.y+s*r.y;return e.y===a?0:e.y<a?-1:1}getIntersection(e){const t=this.bbox(),i=e.bbox(),r=Cn(t,i);if(r===null)return null;const o=this.leftSE.point,l=this.rightSE.point,s=e.leftSE.point,a=e.rightSE.point,u=Pt(t,s)&&this.comparePoint(s)===0,d=Pt(i,o)&&e.comparePoint(o)===0,c=Pt(t,a)&&this.comparePoint(a)===0,f=Pt(i,l)&&e.comparePoint(l)===0;if(d&&u)return f&&!c?l:!f&&c?a:null;if(d)return c&&o.x===a.x&&o.y===a.y?null:o;if(u)return f&&l.x===s.x&&l.y===s.y?null:s;if(f&&c)return null;if(f)return l;if(c)return a;const g=ol(o,this.vector(),s,e.vector());return g===null||!Pt(r,g)?null:Ut.round(g.x,g.y)}split(e){const t=[],i=e.events!==void 0,r=new Re(e,!0),o=new Re(e,!1),l=this.rightSE;this.replaceRightSE(o),t.push(o),t.push(r);const s=new nt(r,l,this.rings.slice(),this.windings.slice());return Re.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Re.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(r.checkForConsuming(),o.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,i=this.windings.length;t<i;t++)this.windings[t]*=-1}consume(e){let t=this,i=e;for(;t.consumedBy;)t=t.consumedBy;for(;i.consumedBy;)i=i.consumedBy;const r=nt.compare(t,i);if(r!==0){if(r>0){const o=t;t=i,i=o}if(t.prev===i){const o=t;t=i,i=o}for(let o=0,l=i.rings.length;o<l;o++){const s=i.rings[o],a=i.windings[o],u=t.rings.indexOf(s);u===-1?(t.rings.push(s),t.windings.push(a)):t.windings[u]+=a}i.rings=null,i.windings=null,i.consumedBy=t,i.leftSE.consumedBy=t.leftSE,i.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,i=this._afterState.windings,r=this._afterState.multiPolys;for(let s=0,a=this.rings.length;s<a;s++){const u=this.rings[s],d=this.windings[s],c=t.indexOf(u);c===-1?(t.push(u),i.push(d)):i[c]+=d}const o=[],l=[];for(let s=0,a=t.length;s<a;s++){if(i[s]===0)continue;const u=t[s],d=u.poly;if(l.indexOf(d)===-1)if(u.isExterior)o.push(d);else{l.indexOf(d)===-1&&l.push(d);const c=o.indexOf(u.poly);c!==-1&&o.splice(c,1)}}for(let s=0,a=o.length;s<a;s++){const u=o[s].multiPoly;r.indexOf(u)===-1&&r.push(u)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Ue.type){case"union":{const i=e.length===0,r=t.length===0;this._isInResult=i!==r;break}case"intersection":{let i,r;e.length<t.length?(i=e.length,r=t.length):(i=t.length,r=e.length),this._isInResult=r===Ue.numMultiPolys&&i<r;break}case"xor":{const i=Math.abs(e.length-t.length);this._isInResult=i%2===1;break}case"difference":{const i=r=>r.length===1&&r[0].isSubject;this._isInResult=i(e)!==i(t);break}default:throw new Error(`Unrecognized operation type found ${Ue.type}`)}return this._isInResult}}class ki{constructor(e,t,i){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=i,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Ut.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let o=r;for(let l=1,s=e.length;l<s;l++){if(typeof e[l][0]!="number"||typeof e[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let a=Ut.round(e[l][0],e[l][1]);a.x===o.x&&a.y===o.y||(this.segments.push(nt.fromRing(o,a,this)),a.x<this.bbox.ll.x&&(this.bbox.ll.x=a.x),a.y<this.bbox.ll.y&&(this.bbox.ll.y=a.y),a.x>this.bbox.ur.x&&(this.bbox.ur.x=a.x),a.y>this.bbox.ur.y&&(this.bbox.ur.y=a.y),o=a)}(r.x!==o.x||r.y!==o.y)&&this.segments.push(nt.fromRing(o,r,this))}getSweepEvents(){const e=[];for(let t=0,i=this.segments.length;t<i;t++){const r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}class ll{constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ki(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let i=1,r=e.length;i<r;i++){const o=new ki(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=t}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let t=0,i=this.interiorRings.length;t<i;t++){const r=this.interiorRings[t].getSweepEvents();for(let o=0,l=r.length;o<l;o++)e.push(r[o])}return e}}class xi{constructor(e,t){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let i=0,r=e.length;i<r;i++){const o=new ll(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=t}getSweepEvents(){const e=[];for(let t=0,i=this.polys.length;t<i;t++){const r=this.polys[t].getSweepEvents();for(let o=0,l=r.length;o<l;o++)e.push(r[o])}return e}}class tn{static factory(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];if(!o.isInResult()||o.ringOut)continue;let l=null,s=o.leftSE,a=o.rightSE;const u=[s],d=s.point,c=[];for(;l=s,s=a,u.push(s),s.point!==d;)for(;;){const f=s.getAvailableLinkedEvents();if(f.length===0){const w=u[0].point,m=u[u.length-1].point;throw new Error(`Unable to complete output ring starting at [${w.x}, ${w.y}]. Last matching segment found ends at [${m.x}, ${m.y}].`)}if(f.length===1){a=f[0].otherSE;break}let g=null;for(let w=0,m=c.length;w<m;w++)if(c[w].point===s.point){g=w;break}if(g!==null){const w=c.splice(g)[0],m=u.splice(w.index);m.unshift(m[0].otherSE),t.push(new tn(m.reverse()));continue}c.push({index:u.length,point:s.point});const b=s.getLeftmostComparator(l);a=f.sort(b)[0].otherSE;break}t.push(new tn(u))}return t}constructor(e){this.events=e;for(let t=0,i=e.length;t<i;t++)e[t].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point;const t=[e];for(let u=1,d=this.events.length-1;u<d;u++){const c=this.events[u].point,f=this.events[u+1].point;Si(c,e,f)!==0&&(t.push(c),e=c)}if(t.length===1)return null;const i=t[0],r=t[1];Si(i,e,r)===0&&t.shift(),t.push(t[0]);const o=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:t.length-1,s=this.isExteriorRing()?t.length:-1,a=[];for(let u=l;u!=s;u+=o)a.push([t[u].x,t[u].y]);return a}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let r=1,o=this.events.length;r<o;r++){const l=this.events[r];Re.compare(e,l)>0&&(e=l)}let t=e.segment.prevInResult(),i=t?t.prevInResult():null;for(;;){if(!t)return null;if(!i)return t.ringOut;if(i.ringOut!==t.ringOut)return i.ringOut.enclosingRing()!==t.ringOut?t.ringOut:t.ringOut.enclosingRing();t=i.prevInResult(),i=t?t.prevInResult():null}}}class Mi{constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(let t=0,i=this.interiorRings.length;t<i;t++){const r=this.interiorRings[t].getGeom();r!==null&&e.push(r)}return e}}class al{constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let t=0,i=this.polys.length;t<i;t++){const r=this.polys[t].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){const t=[];for(let i=0,r=e.length;i<r;i++){const o=e[i];if(!o.poly)if(o.isExteriorRing())t.push(new Mi(o));else{const l=o.enclosingRing();l.poly||t.push(new Mi(l)),l.poly.addInterior(o)}}return t}}class ul{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt.compare;this.queue=e,this.tree=new Rn(t),this.segments=[]}process(e){const t=e.segment,i=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(t),i;const r=e.isLeft?this.tree.add(t):this.tree.find(t);if(!r)throw new Error(`Unable to find segment #${t.id} [${t.leftSE.point.x}, ${t.leftSE.point.y}] -> [${t.rightSE.point.x}, ${t.rightSE.point.y}] in SweepLine tree.`);let o=r,l=r,s,a;for(;s===void 0;)o=this.tree.prev(o),o===null?s=null:o.key.consumedBy===void 0&&(s=o.key);for(;a===void 0;)l=this.tree.next(l),l===null?a=null:l.key.consumedBy===void 0&&(a=l.key);if(e.isLeft){let u=null;if(s){const c=s.getIntersection(t);if(c!==null&&(t.isAnEndpoint(c)||(u=c),!s.isAnEndpoint(c))){const f=this._splitSafely(s,c);for(let g=0,b=f.length;g<b;g++)i.push(f[g])}}let d=null;if(a){const c=a.getIntersection(t);if(c!==null&&(t.isAnEndpoint(c)||(d=c),!a.isAnEndpoint(c))){const f=this._splitSafely(a,c);for(let g=0,b=f.length;g<b;g++)i.push(f[g])}}if(u!==null||d!==null){let c=null;u===null?c=d:d===null?c=u:c=Re.comparePoints(u,d)<=0?u:d,this.queue.remove(t.rightSE),i.push(t.rightSE);const f=t.split(c);for(let g=0,b=f.length;g<b;g++)i.push(f[g])}i.length>0?(this.tree.remove(t),i.push(e)):(this.segments.push(t),t.prev=s)}else{if(s&&a){const u=s.getIntersection(a);if(u!==null){if(!s.isAnEndpoint(u)){const d=this._splitSafely(s,u);for(let c=0,f=d.length;c<f;c++)i.push(d[c])}if(!a.isAnEndpoint(u)){const d=this._splitSafely(a,u);for(let c=0,f=d.length;c<f;c++)i.push(d[c])}}}this.tree.remove(t)}return i}_splitSafely(e,t){this.tree.remove(e);const i=e.rightSE;this.queue.remove(i);const r=e.split(t);return r.push(i),e.consumedBy===void 0&&this.tree.add(e),r}}const Ni=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,cl=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class dl{run(e,t,i){Ue.type=e,Ut.reset();const r=[new xi(t,!0)];for(let d=0,c=i.length;d<c;d++)r.push(new xi(i[d],!1));if(Ue.numMultiPolys=r.length,Ue.type==="difference"){const d=r[0];let c=1;for(;c<r.length;)Cn(r[c].bbox,d.bbox)!==null?c++:r.splice(c,1)}if(Ue.type==="intersection")for(let d=0,c=r.length;d<c;d++){const f=r[d];for(let g=d+1,b=r.length;g<b;g++)if(Cn(f.bbox,r[g].bbox)===null)return[]}const o=new Rn(Re.compare);for(let d=0,c=r.length;d<c;d++){const f=r[d].getSweepEvents();for(let g=0,b=f.length;g<b;g++)if(o.insert(f[g]),o.size>Ni)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const l=new ul(o);let s=o.size,a=o.pop();for(;a;){const d=a.key;if(o.size===s){const f=d.segment;throw new Error(`Unable to pop() ${d.isLeft?"left":"right"} SweepEvent [${d.point.x}, ${d.point.y}] from segment #${f.id} [${f.leftSE.point.x}, ${f.leftSE.point.y}] -> [${f.rightSE.point.x}, ${f.rightSE.point.y}] from queue.`)}if(o.size>Ni)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(l.segments.length>cl)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const c=l.process(d);for(let f=0,g=c.length;f<g;f++){const b=c[f];b.consumedBy===void 0&&o.insert(b)}s=o.size,a=o.pop()}Ut.reset();const u=tn.factory(l.segments);return new al(u).getGeom()}}const Ue=new dl,fl=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Ue.run("union",n,t)},ml=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Ue.run("intersection",n,t)},hl=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Ue.run("xor",n,t)},gl=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Ue.run("difference",n,t)};var lr={union:fl,intersection:ml,xor:hl,difference:gl};function ar(n,e,t){if(n!==null)for(var i,r,o,l,s,a,u,d=0,c=0,f,g=n.type,b=g==="FeatureCollection",w=g==="Feature",m=b?n.features.length:1,h=0;h<m;h++){u=b?n.features[h].geometry:w?n.geometry:n,f=u?u.type==="GeometryCollection":!1,s=f?u.geometries.length:1;for(var x=0;x<s;x++){var _=0,k=0;if(l=f?u.geometries[x]:u,l!==null){a=l.coordinates;var N=l.type;switch(d=0,N){case null:break;case"Point":if(e(a,c,h,_,k)===!1)return!1;c++,_++;break;case"LineString":case"MultiPoint":for(i=0;i<a.length;i++){if(e(a[i],c,h,_,k)===!1)return!1;c++,N==="MultiPoint"&&_++}N==="LineString"&&_++;break;case"Polygon":case"MultiLineString":for(i=0;i<a.length;i++){for(r=0;r<a[i].length-d;r++){if(e(a[i][r],c,h,_,k)===!1)return!1;c++}N==="MultiLineString"&&_++,N==="Polygon"&&k++}N==="Polygon"&&_++;break;case"MultiPolygon":for(i=0;i<a.length;i++){for(k=0,r=0;r<a[i].length;r++){for(o=0;o<a[i][r].length-d;o++){if(e(a[i][r][o],c,h,_,k)===!1)return!1;c++}k++}_++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(ar(l.geometries[i],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function An(n,e){var t,i,r,o,l,s,a,u,d,c,f=0,g=n.type==="FeatureCollection",b=n.type==="Feature",w=g?n.features.length:1;for(t=0;t<w;t++){for(s=g?n.features[t].geometry:b?n.geometry:n,u=g?n.features[t].properties:b?n.properties:{},d=g?n.features[t].bbox:b?n.bbox:void 0,c=g?n.features[t].id:b?n.id:void 0,a=s?s.type==="GeometryCollection":!1,l=a?s.geometries.length:1,r=0;r<l;r++){if(o=a?s.geometries[r]:s,o===null){if(e(null,f,u,d,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,f,u,d,c)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<o.geometries.length;i++)if(e(o.geometries[i],f,u,d,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function bl(n,e){An(n,function(t,i,r,o,l){var s=t===null?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(Ft(t,r,{bbox:o,id:l}),i,0)===!1?!1:void 0}var a;switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var d=t.coordinates[u],c={type:a,coordinates:d};if(e(Ft(c,r),i,u)===!1)return!1}})}function yl(n,e={}){const t=[];if(An(n,r=>{t.push(r.coordinates)}),t.length<2)throw new Error("Must have at least 2 geometries");const i=lr.union(t[0],...t.slice(1));return i.length===0?null:i.length===1?In(i[0],e.properties):or(i,e.properties)}var ur=yl;function vl(n,e={}){if(n.bbox!=null&&e.recompute!==!0)return n.bbox;const t=[1/0,1/0,-1/0,-1/0];return ar(n,i=>{t[0]>i[0]&&(t[0]=i[0]),t[1]>i[1]&&(t[1]=i[1]),t[2]<i[0]&&(t[2]=i[0]),t[3]<i[1]&&(t[3]=i[1])}),t}var Ti=vl;function pl(n){const e=[];if(An(n,r=>{e.push(r.coordinates)}),e.length<2)throw new Error("Must have at least two features");const t=n.features[0].properties||{},i=lr.difference(e[0],...e.slice(1));return i.length===0?null:i.length===1?In(i[0],t):or(i,t)}var Ll=pl;function wl(n){if(!n)throw new Error("geojson is required");var e=[];return bl(n,function(t){e.push(t)}),Dt(e)}var El=wl;function Oi(n,e){const t=Ll(Dt([In([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),n]));if(!t)return;t.properties={isMask:!0};const i=$t(Ti(n)),r=(i[2]-i[0])/360/1e3,o=i[0]<-180,l=i[2]>180,s=El(n);if(s.features.length>1&&(o||l))for(const a of s.features){const u=$t(Ti(a));if(l&&u[0]<-180+r)for(const d of a.geometry.coordinates)for(const c of d)c[0]+=360-r;if(o&&u[2]>180-r)for(const d of a.geometry.coordinates)for(const c of d)c[0]-=360-r}e(Dt([s.features.length<2?n:ur(s)??n,t]))}const Pi={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}},Qt="mtlr-gc-full-geom",Ii="mtlr-gc-full-geom-fill",Ri="mtlr-gc-full-geom-line";function Sl(n,e,t=!0,i=!0,r={},o={},l=Pi){let s;const a=[];let u,d,c;function f(){if(!n.loaded){n.once("load",f);return}const m=l?l===!0?Pi:l:void 0;if(!(m!=null&&m.fill)&&!(m!=null&&m.line))return;const h=n.getSource(Qt);if(h)h.setData(c??Dt([]));else if(c)n.addSource(Qt,{type:"geojson",data:c});else return;!n.getLayer(Ii)&&m!=null&&m.fill&&n.addLayer({...m==null?void 0:m.fill,id:Ii,type:"fill",source:Qt}),!n.getLayer(Ri)&&m!=null&&m.line&&n.addLayer({...m==null?void 0:m.line,id:Ri,type:"line",source:Qt})}function g(m){c=m,f()}n.on("styledata",()=>{setTimeout(()=>{c&&f()})});const b=m=>{s==null||s({type:"mapClick",coordinates:[m.lngLat.lng,m.lngLat.lat]})};function w(m=!1){if(!e)throw new Error;const h=document.createElement("div");return m&&h.classList.add("marker-interactive"),new ys({props:{displayIn:"maplibre"},target:h}),new e.Marker({element:h,offset:[1,-13]})}return{setEventHandler(m){m?(s=m,n.on("click",b)):(s=void 0,n.off("click",b))},flyTo(m,h){n.flyTo({center:m,...h?{zoom:h}:{},...r})},fitBounds(m,h,x){n.fitBounds([[m[0],m[1]],[m[2],m[3]]],{padding:h,...x?{maxZoom:x}:{},...o})},indicateReverse(m){n.getCanvasContainer().style.cursor=m?"crosshair":""},setReverseMarker(m){!e||!t||(d?m?d.setLngLat(m):(d.remove(),d=void 0):m&&(t instanceof Function?d=t(n)??void 0:(d=(typeof t=="object"?new e.Marker(t):w()).setLngLat(m).addTo(n),d.getElement().classList.add("marker-reverse"))))},setFeatures(m,h,x){for(const _ of a)_.remove();if(a.length=0,g(void 0),!!e){if(h){let _=!1;if(h.geometry.type==="GeometryCollection"){const k=h.geometry.geometries.filter(N=>N.type==="Polygon"||N.type==="MultiPolygon");e:if(k.length>0){const N=ur(Dt(k.map(O=>Ft(O))));if(!N)break e;Oi({...h,geometry:N.geometry},g),_=!0}else{const N=h.geometry.geometries.filter(O=>O.type==="LineString"||O.type==="MultiLineString");N.length>0&&(g({...h,geometry:{type:"GeometryCollection",geometries:N}}),_=!0)}}if(!_){if(h.geometry.type==="Polygon"||h.geometry.type==="MultiPolygon")Oi(h,g);else if(h.geometry.type==="LineString"||h.geometry.type==="MultiLineString"){g(h);return}}if(!x&&h.geometry.type!=="Point")return;if(t instanceof Function){const k=t(n,h);k&&a.push(k)}else t&&a.push(typeof t=="object"?new e.Marker(t):w().setLngLat(h.center).addTo(n))}if(i)for(const _ of m??[]){if(_===h)continue;let k;if(i instanceof Function){if(k=i(n,_),!k)continue}else k=(typeof i=="object"?new e.Marker(i):w(!0)).setLngLat(_.center).setPopup(new e.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(_.place_type[0]==="reverse"?_.place_name:_.place_name.replace(/,.*/,""))).addTo(n);const N=k.getElement();N.addEventListener("click",O=>{O.stopPropagation(),s==null||s({type:"markerClick",id:_.id})}),N.addEventListener("mouseenter",()=>{s==null||s({type:"markerMouseEnter",id:_.id}),k.togglePopup()}),N.addEventListener("mouseleave",()=>{s==null||s({type:"markerMouseLeave",id:_.id}),k.togglePopup()}),a.push(k)}}},setSelectedMarker(m){u&&u.getElement().classList.toggle("marker-selected",!1),u=m>-1?a[m]:void 0,u==null||u.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const m=n.getCenter();return[n.getZoom(),m.lng,m.lat]}}}function Cl(n,e,t){var i,r;class o{constructor(m,h){Me(this,"type"),Me(this,"target"),this.type=h,this.target=m}}class l extends o{constructor(m,h){super(m,"select"),Me(this,"feature"),Object.assign(this,h)}}class s extends o{constructor(m,h){super(m,"featureslisted"),Me(this,"features"),this.features=h}}class a extends o{constructor(m,h){super(m,"featuresmarked"),Me(this,"features"),this.features=h}}class u extends o{constructor(m,h){super(m,"optionsvisibilitychange"),Me(this,"optionsVisible"),this.optionsVisible=h}}class d extends o{constructor(m,h){super(m,"pick"),Me(this,"feature"),this.feature=h}}class c extends o{constructor(m,h){super(m,"querychange"),Me(this,"query"),this.query=h}}class f extends o{constructor(m,h,x){super(m,"response"),Me(this,"url"),Me(this,"featureCollection"),this.url=h,this.featureCollection=x}}class g extends o{constructor(m,h){super(m,"reversetoggle"),Me(this,"reverse"),this.reverse=h}}class b extends n{constructor(m={}){super(),Xn(this,i),Xn(this,r),Jn(this,r,m)}onAddInt(m){const h=document.createElement("div");h.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:x,showResultMarkers:_,flyTo:k,fullGeometryStyle:N,...O}=ce(this,r),v=typeof k=="boolean"?{}:k,y={mapController:Sl(m,e,x,_,v,v,N),flyTo:k===void 0?!0:!!k,apiKey:"",...t==null?void 0:t(m,h),...O};if(!y.apiKey)throw new Error("no apiKey provided");return Jn(this,i,new Hs({target:h,props:y})),ce(this,i).$on("select",M=>{this.fire(new l(this,M.detail))}),ce(this,i).$on("pick",M=>{this.fire(new d(this,M.detail.feature))}),ce(this,i).$on("featureslisted",M=>{this.fire(new s(this,M.detail.features))}),ce(this,i).$on("featuresmarked",M=>{this.fire(new a(this,M.detail.features))}),ce(this,i).$on("response",M=>{this.fire(new f(this,M.detail.url,M.detail.featureCollection))}),ce(this,i).$on("optionsvisibilitychange",M=>{this.fire(new u(this,M.detail.optionsVisible))}),ce(this,i).$on("reversetoggle",M=>{this.fire(new g(this,M.detail.reverse))}),ce(this,i).$on("querychange",M=>{this.fire(new c(this,M.detail.query))}),h}on(m,h){return super.on(m,h)}once(m,h){return super.once(m,h)}off(m,h){return super.off(m,h)}listens(m){return super.listens(m)}setOptions(m){var h;Object.assign(ce(this,r),m);const{marker:x,showResultMarkers:_,flyTo:k,fullGeometryStyle:N,...O}=ce(this,r);(h=ce(this,i))==null||h.$set(O)}setQuery(m,h=!0){var x;(x=ce(this,i))==null||x.setQuery(m,h)}clearMap(){var m;(m=ce(this,i))==null||m.clearMap()}clearList(){var m;(m=ce(this,i))==null||m.clearList()}setReverseMode(m){var h;(h=ce(this,i))==null||h.$set({reverseActive:m})}focus(){var m;(m=ce(this,i))==null||m.focus()}blur(){var m;(m=ce(this,i))==null||m.blur()}onRemove(){var m;(m=ce(this,i))==null||m.$destroy()}}return i=new WeakMap,r=new WeakMap,{MapLibreBasedGeocodingControl:b,events:{SelectEvent:l,FeaturesListedEvent:s,FeaturesMarkedEvent:a,OptionsVisibilityChangeEvent:u,PickEvent:d,QueryChangeEvent:c,ResponseEvent:f,ReverseToggleEvent:g}}}const{MapLibreBasedGeocodingControl:_a,events:bt}=Cl(Zr.Evented,Gr);bt.SelectEvent;bt.FeaturesListedEvent;bt.FeaturesMarkedEvent;bt.OptionsVisibilityChangeEvent;bt.PickEvent;bt.QueryChangeEvent;bt.ResponseEvent;bt.ReverseToggleEvent;const _l=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,Ai=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,Wi=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?$/i,zi=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,Fi=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,Di=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?$/i;function kl(n){if(!["DMS","DM","DD"].includes(n))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const e=this.decimalCoordinates.split(",").map(g=>Number(g.trim())),t=Number(e[0]),i=Number(e[1]),r=Math.abs(t),o=Math.abs(i),l=t>0?"N":"S",s=i>0?"E":"W";let a;n=="DD"&&(a=`${r}° ${l}, ${o}° ${s}`);const u=Math.floor(r),d=Math.floor(o),c=(r-u)*60,f=(o-d)*60;if(n=="DM"){let g=Ui(c,3).toFixed(3).padStart(6,"0"),b=Ui(f,3).toFixed(3).padStart(6,"0");g.endsWith(".000")&&b.endsWith(".000")&&(g=g.replace(/\.000$/,""),b=b.replace(/\.000$/,"")),a=`${u}° ${g}' ${l}, ${d}° ${b}' ${s}`}if(n=="DMS"){const g=Math.floor(c),b=Math.floor(f);let w=((c-g)*60).toFixed(1).padStart(4,"0"),m=((f-b)*60).toFixed(1).padStart(4,"0");const h=g.toString().padStart(2,"0"),x=b.toString().padStart(2,"0");w.endsWith(".0")&&m.endsWith(".0")&&(w=w.replace(/\.0$/,""),m=m.replace(/\.0$/,"")),a=`${u}° ${h}' ${w}" ${l}, ${d}° ${x}' ${m}" ${s}`}return a}else throw new Error("no decimal coordinates to convert")}function Ui(n,e){const t=Math.pow(10,e);return Math.round((n+Number.EPSILON)*t)/t}function Wn(n,e){e||(e=5),n=n.replace(/\s+/g," ").trim();let t=null,i=null,r="",o="",l=null,s=[],a=!1;if(_l.test(n))throw new Error("invalid coordinate value");if(Ai.test(n))if(s=Ai.exec(n),a=It(s),a)t=Math.abs(s[1])+s[2]/60,Number(s[1])<0&&(t*=-1),i=Math.abs(s[3])+s[4]/60,Number(s[3])<0&&(i*=-1),l="DM";else throw new Error("invalid coordinate format");else if(Wi.test(n))if(s=Wi.exec(n),a=It(s),a){if(t=s[2],i=s[6],t.includes(",")&&(t=t.replace(",",".")),i.includes(",")&&(i=i.replace(",",".")),l="DD",Number(Math.round(t))==Number(t))throw new Error("integer only coordinate provided");if(Number(Math.round(i))==Number(i))throw new Error("integer only coordinate provided");s[1]?(r=s[1],o=s[5]):s[4]&&(r=s[4],o=s[8])}else throw new Error("invalid decimal coordinate format");else if(zi.test(n))if(s=zi.exec(n),a=It(s),a)t=Math.abs(parseInt(s[2])),s[4]&&(t+=s[4]/60,l="DM"),s[6]&&(t+=s[6].replace(",",".")/3600,l="DMS"),parseInt(s[2])<0&&(t=-1*t),i=Math.abs(parseInt(s[9])),s[11]&&(i+=s[11]/60),s[13]&&(i+=s[13].replace(",",".")/3600),parseInt(s[9])<0&&(i=-1*i),s[1]?(r=s[1],o=s[8]):s[7]&&(r=s[7],o=s[14]);else throw new Error("invalid DMS coordinates format");else if(Fi.test(n))if(s=Fi.exec(n),a=It(s),a)t=Math.abs(parseInt(s[2])),s[4]&&(t+=s[4]/60,l="DM"),s[6]&&(t+=s[6]/3600,l="DMS"),parseInt(s[2])<0&&(t=-1*t),i=Math.abs(parseInt(s[10])),s[12]&&(i+=s[12]/60),s[14]&&(i+=s[14]/3600),parseInt(s[10])<0&&(i=-1*i),s[1]?(r=s[1],o=s[9]):s[8]&&(r=s[8],o=s[16]);else throw new Error("invalid DMS coordinates format");else if(Di.test(n)){if(s=Di.exec(n),a=It(s),s.filter(u=>u).length<=5)throw new Error("invalid coordinates format");if(a)t=Math.abs(parseInt(s[2])),s[4]&&(t+=s[4].replace(",",".")/60,l="DM"),s[6]&&(t+=s[6].replace(",",".")/3600,l="DMS"),parseInt(s[2])<0&&(t=-1*t),i=Math.abs(parseInt(s[10])),s[12]&&(i+=s[12].replace(",",".")/60),s[14]&&(i+=s[14].replace(",",".")/3600),parseInt(s[10])<0&&(i=-1*i),s[1]?(r=s[1],o=s[9]):s[8]&&(r=s[8],o=s[16]);else throw new Error("invalid coordinates format")}if(a){if(Math.abs(i)>=180)throw new Error("invalid longitude value");if(Math.abs(t)>=90)throw new Error("invalid latitude value");if(r&&!o||!r&&o)throw new Error("invalid coordinates value");if(r&&r==o)throw new Error("invalid coordinates format");t.toString().includes(",")&&(t=t.replace(",",".")),i.toString().includes(",")&&(i=i.replace(",","."));let u=/S|SOUTH/i;u.test(r)&&t>0&&(t=-1*t),u=/W|WEST/i,u.test(o)&&i>0&&(i=-1*i);const d=s[0].trim();let c,f;const g=/[,/;\u0020]/g,b=d.match(g);if(b==null){const h=Math.floor(n.length/2);c=d.substring(0,h).trim(),f=d.substring(h).trim()}else{let h;b.length%2==1?h=Math.floor(b.length/2):h=b.length/2-1;let x=0;if(h==0)x=d.indexOf(b[0]),c=d.substring(0,x).trim(),f=d.substring(x+1).trim();else{let _=0,k=0;for(;_<=h;)x=d.indexOf(b[_],k),k=x+1,_++;c=d.substring(0,x).trim(),f=d.substring(x+1).trim()}}const w=c.split(".");if(w.length==2&&w[1]==0&&w[1].length!=2)throw new Error("invalid coordinates format");const m=f.split(".");if(m.length==2&&m[1]==0&&m[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(c)||/^\d+$/.test(f))throw new Error("degree only coordinate/s provided");return t=Number(Number(t).toFixed(e)),i=Number(Number(i).toFixed(e)),Object.freeze({verbatimCoordinates:d,verbatimLatitude:c,verbatimLongitude:f,decimalLatitude:t,decimalLongitude:i,decimalCoordinates:`${t},${i}`,originalFormat:l,closeEnough:xl,toCoordinateFormat:kl})}else throw new Error("coordinates pattern match failed")}function It(n){if(!isNaN(n[0]))return!1;const e=[...n];if(e.shift(),e.length%2>0)return!1;const t=/^[-+]?\d+([\.,]\d+)?$/,i=/[eastsouthnorthwest]+/i,r=e.length/2;for(let o=0;o<r;o++){const l=e[o],s=e[o+r],a=t.test(l)&&t.test(s),u=i.test(l)&&i.test(s),d=l==s;if(!(l==null&&s==null)){if(l==null||s==null)return!1;if(a||u||d)continue;return!1}}return!0}function Hi(n,e){const t=Math.abs(n-e);return Number(t.toFixed(6))<=1e-5}function xl(n){if(!n)throw new Error("coords must be provided");if(n.includes(",")){const e=n.split(",");if(Number(e[0])==NaN||Number(e[1])==NaN)throw new Error("coords are not valid decimals");return Hi(this.decimalLatitude,Number(e[0]))&&Hi(this.decimalLongitude,e[1])}else throw new Error("coords being tested must be separated by a comma")}const Ml=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Wn.to=Ml;const Nl=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],Tl={decimalLatitude:40.123,decimalLongitude:-74.123},Ol=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],Pl=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function Il(){const n=[];return Nl.forEach(e=>{e.decimalLatitude?n.push(e):n.push({...e,...Tl})}),[...n,...Ol,...Pl]}const Rl=Il();Wn.formats=Rl.map(n=>n.verbatimCoordinates);const ka=Wn;const Al=Symbol.for("svelte-maplibre");function Wl(){return Qi(Al)}function zl(n){return"layerType"in n&&n.layerType==="deckgl"}const Fl=n=>({features:n[0]&16,data:n[0]&16,map:n[0]&4,close:n[0]&1}),Bi=n=>{var e;return{features:n[4],data:(e=n[4])==null?void 0:e[0],map:n[2],close:n[31]}};function Zi(n){let e,t,i=(n[4]||n[3]instanceof De.Marker)&&Gi(n);return{c(){e=Ie("div"),i&&i.c()},m(r,o){X(r,e,o),i&&i.m(e,null),n[32](e),t=!0},p(r,o){r[4]||r[3]instanceof De.Marker?i?(i.p(r,o),o[0]&24&&H(i,1)):(i=Gi(r),i.c(),H(i,1),i.m(e,null)):i&&(lt(),q(i,1,1,()=>{i=null}),at())},i(r){t||(H(i),t=!0)},o(r){q(i),t=!1},d(r){r&&J(e),i&&i.d(),n[32](null)}}}function Gi(n){let e;const t=n[30].default,i=ut(t,n,n[29],Bi);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[0]&536870933)&&ct(i,t,r,r[29],e?ft(t,r[29],o,Fl):dt(r[29]),Bi)},i(r){e||(H(i,r),e=!0)},o(r){q(i,r),e=!1},d(r){i&&i.d(r)}}}function Dl(n){let e,t,i=n[9].default&&Zi(n);return{c(){i&&i.c(),e=Ht()},m(r,o){i&&i.m(r,o),X(r,e,o),t=!0},p(r,o){r[9].default?i?(i.p(r,o),o[0]&512&&H(i,1)):(i=Zi(r),i.c(),H(i,1),i.m(e.parentNode,e)):i&&(lt(),q(i,1,1,()=>{i=null}),at())},i(r){t||(H(i),t=!0)},o(r){q(i),t=!1},d(r){r&&J(e),i&&i.d(r)}}}function Ul(n,e,t){let i,r,o,l,s,a,{$$slots:u={},$$scope:d}=e;const c=Dr(u);let{closeButton:f=void 0}=e,{closeOnClickOutside:g=!0}=e,{closeOnClickInside:b=!1}=e,{closeOnMove:w=!1}=e,{openOn:m="click"}=e,{openIfTopMost:h=!0}=e,{focusAfterOpen:x=!0}=e,{anchor:_=void 0}=e,{offset:k=void 0}=e,{popupClass:N=void 0}=e,{maxWidth:O=void 0}=e,{lngLat:v=void 0}=e,{html:y=void 0}=e,{open:M=!1}=e;const z=kn(),{map:E,popupTarget:D,layerEvent:K,layer:P,eventTopMost:U}=Wl();he(n,E,S=>t(2,o=S)),he(n,D,S=>t(3,s=S)),he(n,K,S=>t(28,l=S)),he(n,P,S=>t(35,a=S));const te=["click","dblclick","contextmenu"];let A,le=!1,ue;function _e(){if(!A)return;let S=A.getElement();!S||S===ue||(ue=S,m==="hover"&&(ue.style.pointerEvents="none"),ue.addEventListener("mouseenter",()=>{t(24,le=!0)},{passive:!0}),ue.addEventListener("mouseleave",()=>{t(24,le=!1)},{passive:!0}),ue.addEventListener("click",()=>{b&&t(0,M=!1)},{passive:!0}))}Ur(()=>{if(o)return o.on("click",Pe),o.on("contextmenu",Pe),typeof s=="string"&&(o.on("click",s,oe),o.on("dblclick",s,oe),o.on("contextmenu",s,oe),o.on("mousemove",s,ke),o.on("mouseleave",s,we),o.on("touchstart",s,Q),o.on("touchend",s,be)),()=>{o!=null&&o.loaded()&&(A==null||A.remove(),o.off("click",Pe),o.off("contextmenu",Pe),s instanceof De.Marker?s.getPopup()===A&&s.setPopup(void 0):typeof s=="string"&&(o.off("click",s,oe),o.off("dblclick",s,oe),o.off("contextmenu",s,oe),o.off("mousemove",s,ke),o.off("mouseleave",s,we),o.off("touchstart",s,Q),o.off("touchend",s,be)))}});function ge(S){return h?!("marker"in S)&&!zl(S)&&U(S)!==a:!1}let ie=null,re="normal";function oe(S){S.type===m&&(ge(S)||("layerType"in S?S.layerType==="deckgl"?(t(10,v=S.coordinate),t(4,ie=S.object?[S.object]:null)):(t(10,v=S.lngLat),t(4,ie=S.features??[])):(t(10,v=S.lngLat),t(4,ie=S.features??[])),setTimeout(()=>t(0,M=!0))))}let de=null;function Q(S){de=S.point}function be(S){if(!de||m!=="hover")return;let F=de.dist(S.point);de=null,F<3&&(t(10,v=S.lngLat),t(4,ie=S.features??[]),A.isOpen()?t(25,re="justOpened"):(t(25,re="opening"),t(0,M=!0)))}function we(S){m!=="hover"||de||re!=="normal"||(t(0,M=!1),t(4,ie=null))}function ke(S){if(!(m!=="hover"||de||re!=="normal")){if(ge(S)){t(0,M=!1),t(4,ie=null);return}t(0,M=!0),t(4,ie=S.features??[]),t(10,v=S.lngLat)}}function Pe(S){if(re==="justOpened"){t(25,re="normal");return}if(!g)return;let F=[ue,s instanceof De.Marker?s==null?void 0:s.getElement():null];M&&A.isOpen()&&!F.some(B=>B==null?void 0:B.contains(S.originalEvent.target))&&(S.type==="contextmenu"&&m==="contextmenu"||S.type!=="contextmenu")&&t(0,M=!1)}it(()=>{o&&(A!=null&&A.isOpen())&&A.remove()});let fe;const ze=()=>t(0,M=!1);function T(S){Mt[S?"unshift":"push"](()=>{fe=S,t(1,fe)})}return n.$$set=S=>{"closeButton"in S&&t(11,f=S.closeButton),"closeOnClickOutside"in S&&t(12,g=S.closeOnClickOutside),"closeOnClickInside"in S&&t(13,b=S.closeOnClickInside),"closeOnMove"in S&&t(14,w=S.closeOnMove),"openOn"in S&&t(15,m=S.openOn),"openIfTopMost"in S&&t(16,h=S.openIfTopMost),"focusAfterOpen"in S&&t(17,x=S.focusAfterOpen),"anchor"in S&&t(18,_=S.anchor),"offset"in S&&t(19,k=S.offset),"popupClass"in S&&t(20,N=S.popupClass),"maxWidth"in S&&t(21,O=S.maxWidth),"lngLat"in S&&t(10,v=S.lngLat),"html"in S&&t(22,y=S.html),"open"in S&&t(0,M=S.open),"$$scope"in S&&t(29,d=S.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&14336&&t(27,i=f??(!g&&!b)),n.$$.dirty[0]&146685952&&(A||(t(23,A=new De.Popup({closeButton:i,closeOnClick:!1,closeOnMove:w,focusAfterOpen:x,maxWidth:O,className:N,anchor:_,offset:k})),ue=A.getElement(),A.on("open",()=>{t(0,M=!0),_e(),z("open",A)}),A.on("close",()=>{t(0,M=!1),z("close",A)}),A.on("hover",()=>{z("hover",A)}))),n.$$.dirty[0]&8421384&&A&&s instanceof De.Marker&&(m==="click"?s.setPopup(A):s.getPopup()===A&&s.setPopup(void 0)),n.$$.dirty[0]&268468224&&te.includes(m)&&(l==null?void 0:l.type)===m&&(oe(l),et(K,l=null,l)),n.$$.dirty[0]&268468224&&t(26,r=m==="hover"&&((l==null?void 0:l.type)==="mousemove"||(l==null?void 0:l.type)==="mouseenter")),n.$$.dirty[0]&352354304&&m==="hover"&&K&&(r&&l&&(l.layerType==="deckgl"?(t(10,v=l.coordinate),t(4,ie=l.object?[l.object]:null)):(t(10,v=l.lngLat),t(4,ie=l.features??[]))),t(0,M=(r||le)??!1)),n.$$.dirty[0]&12582914&&(fe?A.setDOMContent(fe):y&&A.setHTML(y)),n.$$.dirty[0]&8389632&&v&&A.setLngLat(v),n.$$.dirty[0]&41943045&&o){let S=A.isOpen();M&&!S?(A.addTo(o),re==="opening"&&t(25,re="justOpened")):!M&&S&&A.remove()}},[M,fe,o,s,ie,E,D,K,P,c,v,f,g,b,w,m,h,x,_,k,N,O,y,A,le,re,r,i,l,d,u,ze,T]}class Hl extends Te{constructor(e){super(),Oe(this,e,Ul,Dl,Le,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}const Bl=n=>({props:n&8}),ji=n=>({props:jl(n[3])});function Zl(n){let e;const t=n[1].default,i=ut(t,n,n[2],ji);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&12)&&ct(i,t,r,r[2],e?ft(t,r[2],o,Bl):dt(r[2]),ji)},i(r){e||(H(i,r),e=!0)},o(r){q(i,r),e=!1},d(r){i&&i.d(r)}}}function Gl(n){let e,t;return e=new Hl({props:{openOn:n[0],$$slots:{default:[Zl,({features:i})=>({3:i}),({features:i})=>i?8:0]},$$scope:{ctx:n}}}),{c(){Ye(e.$$.fragment)},m(i,r){Xe(e,i,r),t=!0},p(i,[r]){const o={};r&1&&(o.openOn=i[0]),r&12&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){t||(H(e.$$.fragment,i),t=!0)},o(i){q(e.$$.fragment,i),t=!1},d(i){Je(e,i)}}}function jl(n){return n?n[0].properties??{}:(console.log("A Popup with null features should be impossible"),{})}function ql(n,e,t){let{$$slots:i={},$$scope:r}=e,{openOn:o="hover"}=e;return n.$$set=l=>{"openOn"in l&&t(0,o=l.openOn),"$$scope"in l&&t(2,r=l.$$scope)},[o,i,r]}class xa extends Te{constructor(e){super(),Oe(this,e,ql,Gl,Le,{openOn:0})}}const Ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAAAoCAYAAAAmPX7RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA7FSURBVHhe7ZsJeFXFFcfPPEDFBREUUEFEBBdkEwQkYVFUEG1BwQpuUavgVq1YK2ih4ELYRBShCoIkgAtWAogKtrgUSNwJiVrFBVRQcQNRUZHc6f//Zq7cvLx3Z4zf11LJ7/smd+7c++67mTPnzDln5qk2C7SWKgLR0iRYIFtR/xilerI1M9vRa81L82UT6p+hOO9H6aClsBmODydb4vlGRNVR0vlHe56RhD3u6iREydCSPPU56tNNUyzVlZLh6OTNqN9ummKhgMcpyZqHY3GyJZ69RfSFth5LlQaWp42eL5u0krdR3800ZaQMHXdkaZ58gPoGlP2TrfG0DKSwoRJ50p7H8Y0W3TQh2Z/a87Q4NfDYunjLfe0JqLO7SHv7qgftaeqpZS+Mt2P2S3+tLZ7HayEtapv2ED6zpb2ewH/K6xfB8FzSXKTjAaad7FOj/HPboTTGuA1pVgvSqGNPQHj/EZH/JQ3DVucrCERPtOdxVMPr5UIHtqHuo4VkopIaS3H00kIlarCtZ8SpgQU9RA7ZS+TMp0Xeh2U+o7HIX1qLnPqUSKd6IqPa2hsjnP8vkZFob7qPbYjw7tciB0NIWY+L7FFN5LGTzKC4qkhkJcbabe2MAM/C9w06QiQHwvsYMxNfshHe45F1IqNXG0E81N08M8qE10TmvouebS+Sjffr8oQZUKPx3M44H/qyyDLOcukJUNoFBfI+jl+gQEaxfCdaty7J1+sx3D7COYabC90jkKL98OC/24Y4NmNyPqyaZHOuTYvXHEhNuBFCy8TAZ6FZC3eU1/B1/SEA1h98T2QbuiW8Nm+tERyF2BoaUhuGikOImkmOQRcUo+ta4/yCwzGA0JV9lon89p/mWf0PLa+JN2Msh89+AzPSwMPsBcvu+C4Opuz6IsNfjRUeYX9MwFzIDrsr2RJPTVFqJJTxO9TvNU0u1KiEZD2KCoa5k9qYnG+09bR4CfCDb+FCwfz0OcQ2pHDyQehgXGPp1sA2ZuC5T8yRWkahbcS/zrYsdHBDaNghMIMvwZU4Dt9XHW83+x2ohbURU980wu4QEeBh0HJqI5+1HwbDNxG/DY6G/LmlyEl4v9wSkSWcqdz0aFOgu0L3hqFOwbg4p1WOPgpHCFLsfxdLNv6LE3C83pw6GVQmy9PYMoOXAJfjtahVV+E198ZckkqvhiKDYe7CEsdXmDG2wqlmh3eEkFZ9KbICppPzbFtoJD2DUnwX5yzydUQg28rQoyg06SHnNTWmdAa65RN099hSewHQdPY62AidQvRGybSSWYrCu8c0OJmED32P41hz6iQXHumLOPpoYa2EJG619Qp4CZBc/5IR3iA4E6lch1c57R+mnPOcbczA9xDAC4icukNTW0ALV24UecaaNQrjc3TDOsy1n7E7QChIsv8eMIl44/WwCCE0odfi+3/Ac7eirMaACOFguOsNkZnwKam1nAM9aQbf4GRIfhTqjA1dnNwqJ8Asq+9H3UcLO8CudMXxanPq5AItKxvZejm8BcjRPQfOQToNZCdHiwtqM4WxHXPjKsx3W6BlG9BNzaGFNJ/kaboE4OqjjbvH59Kp4Xz8Ct2LCM9iAEx8HWYYAroQ82bId9D0hzHnUoB0hHLRxT7vB9gvd9Tor+ByyeRkSzx4K3ULPvYV6j6mkfePhRbCHfObC1Fo0ivgLUAyY43xRFOZloW36L2jZJorQ2g2yXvono8xMCjIUAtftcJZi+8Zi3mr+4Eihacbb5hzLAW1AlqbyiMQVAkGBoUcNbGEJns0nlULc+SwVrbRTYuyQAZorUejzmyLi1OhhR2hhYtQT/OGFegELewLI3EZ6jg4GQwtrNCzzjCiQU2RffGPv8WxBaiB9CBpxr5Fx6SLqzb9IPKpNYE14QXSMQk/H8LP8ZvXbLENgG3UxKgjQk09HuaPnuw7uJdhSAjv5xz5kTVy1E7Gf2zjXEunKPq9jBPpAfM5NK8efFbcV9WDkzICdZpTF4vhwf4G/9lVqPto7lsQwZEQDNNrvzNNsUyF1l5p60mqMjFuLtpeoBfBnccE4hHnaelWkq9gFjVsgiDocXKalsJ/4wh/22kRKayWCENghww/y4TuooyrfoamTfDRQM5ut9ma3/0id0KrKOzHzWksjIzKxYVVAnQDA56gtzgLJeLjZqQTTC68ApmNAhPpBG6XPgPHISjwo530h8nlqkaSX70A90QsSM+Tx1/AkETfZOcON6ex8JvGQ1l4/83JFje3QwtpQvPNaSxMsv+Uq3UKcDrGEgNlljndjCsehhL34tq5iN3SQdd/Mvwsfm5AJL3F4PoBPOePLWwDuPIokbwups6k9VxcPxzOCGF2hc/oUn/HZ09BcN5kH1O/4khzHxkKD3Nse3sCmCHic589VWQ5vON7Opu8ayWoA9N4y/ayZGBvA51YjocW4q3lIRREok6aQAvPwZEerw+9oIUIsDwEyNUBGt7HPhQp+lSkZ0OEDegIcii8uua2o1Nhios5ywPgRUY7mTSD95gDw0GhEGoIY0BCIR0NV4HJ5xB6m/SGCT8bJsnZfjEEzu8idSGc8DkUHhPaDFMuXiFyKyIupufCgVIJLtqtv8Z/qxHveTEVPQffWefacxe3WS30Wo9ESWaJvEwowwJm+KfAV2KAXRdCcXFaI+P6T4K/RAGlprIY+w1rDXuQ5g14jeHA6WlzD+WhWzb+OHsSgTEjw4s/vWiyM0yKD3wOVoH+XuXAG6nR25VieIDh7OQoaGF/fGYu6pEEX0bgserzcKSTYoOwWLKghdleAuQIZ45zDEZ01wbpA+kojLWYKqPGUnMZk/VAQB5lNgYEter3aVJzjCFfROg8og1MqMPkzVtn3q83LEMUmlhmXziIaDZPwPczfv0R54xNK8nlu/UVBtO+WjWqjVlXvyH5181NSjozlUEHyAVlN9FLgFwV4GIol34eeg+j2GHVaQIZNDOnyc+9iWCagufnQ3jtCQiX+U+a6VRGFWPs4njdMeY8Ey9jRnoewr4J2kwTGsIVDC4lkb1hcLhuObGDKZWcBwlTBnwtHw0h24pnKcbZGSaaCqCHNCcEH2+XbPES4BoI4NKVIpcVmlTWZq5Bx0DzSeiQ0AniXEgvMLqOR7jEwzxoOBdGofnj8pFPAnrYyyazEq4pEuZYOZDoBHE5rOsTZrH3FzKjrCDgFgcuHfkwAm/G2Zshgg8jAymirWJ6zQOd6yXAOKhhHN1h4cIp57vF0K5wobXdIpMeS53TmIqbGjMn3f92+txrKhxQ+Zz+I9xtn5vfVeQa+Gv0UOkx06SG64s/E3yLnqJEsXMd2d4ky0vy1GNQ2HNRTzNLV4Ax4xyo9x9wtK5YLLOVZC+r1mDAyNjRRAeEcxJNVSr1Mba+gIMTheecZ5ZuwExvl33YX0wo14QWctWcJo1Ja2oZc6HMYbLOhV3Oeby3kOMccK2Q9xfBTPLZNJNcL3wTz6EzxZUNfpbPY8527dfGpPIZCz4wppx7cOrhXj6TWshEeSUYE8zXT4pKzEHdxyQO2bh6BFynxN2oI/BxcjmcEvS2uhN1HyM/ZJTMXFuVC/WDw7d9UCD9cPTZwLRYK+lXOkvORP1B0xQLJgF6lYUMIS5ItsTzAOxIjpIu23+xCd1FmFw2X3MP6HXmNB5oxN2lszTnPt+5cjyExwmG5tYF129gyrvAxnjGgbs4MLx6klLqUtRTotm0LK6mZBlMIfObjg0mSYobyg/zcRyD4hPgLEbAD3fSUCVAN7lBgWI/lVuHywBXLSYUz0qGGn9NtrgZ96G8wsQiBe6C+3TC1Y4ksXMgJ37u/UyFi7l0GrgRqRNCg8aIXBisc/sCg+eQA2FEuOGJjgSdCmZD3rYLuNx0ywVXeqs7MQiagnZBQYKBuM/y0EI4ZP0gQC7oTjJNsXAHUQ+YTzpGA5It8TwA7StnZmMF2AqdzOQ1YbDNlW4Wen7MpDBZTZhx4aYhBsiXrDDCZZblvmwT/4UxWX0MiGtegH+9ES4UxtxAuPXdEZ8xnNhJGaznyyNwSBiUpIlWy7ENHXlKaZ4UoY4I18t8nhlI4UdQV36GWhsHfecWECC38v9ErAkt+XLHbjNCDWL9BvhMTK2x489+RuTGV0R6PyWyAZrJBDLhZiQG0RcvN7vWuJP7dbgB3HnNsOH/gEJRei6Edw3qLuGRJaV5ihrF7fA+wkNPBkvRFQzyfXpkeqrwSKXmQCagqZ3cQR3ufWGAzLwnzS5NJwN8ah5TZiG8zqWocPVgJ2dCMF/hv/Da+ode0DejcMsFBe6C0fMYLc9zuPvMffSAx5tqeSolwBr4FE0j92FG4TxIGIwzoc1NuFG24DqHGoW8k/MUYgEYdxmEYn9qE8vSkrwE7FDy/gwrpOXARBLQbHJuxZB2Mg3al/ZHAZUSIFNRP0I4jVKS0PWgecxJcg8pnRauF0bhCgHhzrOdnL8FCzRsjFxuTmPBf6wRAgTUPs/7ZSK0rxeOPZMt8WBu1ffZegUqJUBq1kJYY3qo/Q41JvXEA1FvbByUL2Eg6F02rWV+oMI5jyb37CYmnRXurOaXc1E2LDuJZj4aBMIc5hWo+2jfTGjf87j/EtR9dqEt0VK0BMdrUXzivlsSks3fK6bFO5W2qo9JGN/x04Y2kSnHl18t4K5qOjTcHs8tFXRYekaygNyPSQeIG3rphZ4f2UVNuOOaXuz/EMZZvcsK9IdKFE2iK6mMmV93LMnjDzwVf/PnWjvB/dITYQPN5mIUlwJtwgdaVZOs9fa8At4CDLekR39sQmgWmWBme7jZNwrNKndKczWCyzo0rSHhM6OkPv+/zKLivqpPqxyaRK9F2BkledQ8ze3040xTLI9vlaKzaop+GnUbhMUyFHNf7A9mqpLZO2CKoWtQIPxVxhoUzmlxbMbcdCJCB7r2XMxy3U+XrjvivtowTjDRTtZrCY5NSJfYbf2VmgN/pSyE9vHHJtxG7xIGebA0L7EKR67f+dw/L5AVqyA8362GU1zCI1UCNDBaHd46R/PnqT7LObx/MqY0xokMHXyYrCTB5ai25jSWdTCLU2w9BpH/AJK6pJIGy75EAAAAAElFTkSuQmCC",Na="/npw/assets/boundaries-c02eb905.geojson";function Ql(n){let e,t,i,r,o,l,s,a,u,d,c,f,g,b,w;return{c(){e=Ie("h1"),e.textContent="Network Planning Workspace",t=Fe(),i=Ie("p"),i.innerHTML='The Network Planning Workspace (part of the <a href="https://npt.scot" target="_blank">NPT</a>) for Scotland is a web-based application designed to support strategic cycle network planning and investment decisions, primarily for use by local authorities.',r=Fe(),o=Ie("p"),o.innerHTML='This tool utilises various datasets, some of which have <a href="manual.html#known-limitations" target="_blank">limitations</a>. Users should always verify outputs against the most up to date geospatial data held by the local authority before proceeding with detailed design or investment decisions.',l=Fe(),s=Ie("p"),s.textContent="Please note that the commute layer results are based on 2011 Census data, and other trip purpose results are based on pre-pandemic data. These model-based estimates may not reflect current patterns which have changed since the pandemic.",a=Fe(),u=Ie("p"),u.textContent="Users are solely responsible for how they interpret and use the data. If you identify any errors or have concerns about the data or tool, please use the feedback form to report or provide feedback.",d=Fe(),c=Ie("p"),c.innerHTML=`Use the &quot;Report problem&quot; button in the bottom-left corner of the map if you
    find problems, or email the maintainer at <a href="mailto:dabreegster@gmail.com">dabreegster@gmail.com</a>
    .`,f=Fe(),g=Ie("button"),g.textContent="Continue",tt(g,"type","button"),tt(g,"class","ds_button")},m(m,h){X(m,e,h),X(m,t,h),X(m,i,h),X(m,r,h),X(m,o,h),X(m,l,h),X(m,s,h),X(m,a,h),X(m,u,h),X(m,d,h),X(m,c,h),X(m,f,h),X(m,g,h),b||(w=At(g,"click",n[2]),b=!0)},p:kt,d(m){m&&(J(e),J(t),J(i),J(r),J(o),J(l),J(s),J(a),J(u),J(d),J(c),J(f),J(g)),b=!1,w()}}}function Vl(n){let e,t,i,r,o,l,s;function a(d){n[3](d)}let u={$$slots:{default:[Ql]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.show=n[0]),i=new ma({props:u}),Mt.push(()=>xn(i,"show",a)),{c(){e=Ie("button"),e.textContent="beta",t=Fe(),Ye(i.$$.fragment),tt(e,"type","button"),tt(e,"class","banner svelte-q1ucu8")},m(d,c){X(d,e,c),X(d,t,c),Xe(i,d,c),o=!0,l||(s=At(e,"click",n[1]),l=!0)},p(d,[c]){const f={};c&17&&(f.$$scope={dirty:c,ctx:d}),!r&&c&1&&(r=!0,f.show=d[0],Mn(()=>r=!1)),i.$set(f)},i(d){o||(H(i.$$.fragment,d),o=!0)},o(d){q(i.$$.fragment,d),o=!1},d(d){d&&(J(e),J(t)),Je(i,d),l=!1,s()}}}function Kl(){let n="npw-beta-popup";return window.localStorage.getItem(n)!=null?!1:(window.localStorage.setItem(n,"seen"),!0)}function Yl(n,e,t){let i=Kl();const r=()=>t(0,i=!0),o=()=>t(0,i=!1);function l(s){i=s,t(0,i)}return[i,r,o,l]}class Ta extends Te{constructor(e){super(),Oe(this,e,Yl,Vl,Le,{})}}let Oa=R(0),Pa=R(!0),cr=R(!1),Xl=R(!1),Ia=R(!1),nn=R(!1),dr=R(!1),fr=R(!1),mr=R(!1),Jl=R(!1),_n=R(!1),Ra=R(!1),bn=R(!1),Aa=R(!1),$l={Primary:[cr,nn],Secondary:[dr,fr,_n,nn],LocalAccess:[],LongDistance:[mr],assessment:[]},ea={Primary:[cr,Xl,nn],Secondary:[dr,fr,_n,bn,nn],LocalAccess:[bn],LongDistance:[mr,bn],assessment:[Jl,_n]},Wa=R({Primary:!0,Secondary:!0,LocalAccess:!0,LongDistance:!0}),za=R({Segregated:!0,SegregatedWithSpeedVolume:!0,OffRoad:!0,SharedFootway:!0,CycleLane:!0,MixedTraffic:!0,MixedTrafficWithSpeedVolume:!0}),Fa=R({deliverable:!0,not:!0}),Da=R({High:!0,Medium:!0,Low:!0,ShouldNotBeUsed:!0}),Ua=R("off"),Ha=R("all"),ta=R(null),na=R(null),ia=R(null),Ba="MZEJTanw3WpxRvt7qDfo",ra=R(ca()),oa=R(""),hr=R(""),gr=R({kind:"setup",subpage:"explore"}),br=R("Primary"),Za=R(null),Ga=R(void 0),ja=R("streets"),yr=R(1),sa=R(null),qa=R(0),Qa=R(null),Va=R(null),Ka=R("edits_tier"),la=R("off"),Ya=R("infra_type"),Xa=R(!0),aa=R(!0),Ja=R(!1),$a=R(!1),eu=R(null),tu=R(null),nu=R(0),iu=R(null),ru=R(0),ou=R({type:"FeatureCollection",features:[],component_lengths:[],component_bboxes:[]});async function su(){yr.update(r=>r+1);let n=vt(hr);if(!n){console.error("Autosave called without currentFilename set");return}let e=vt(sa),t=vt(oa);if(!e||!t)return;let i=await e.getAllRoutes();jr(qr(t,n),JSON.stringify(i))}function lu(n){hr.set(n),yr.update(t=>t+1),gr.set({kind:"overview"});let e=new URL(window.location.href);e.searchParams.set("file",n),window.history.replaceState(null,"",e.toString())}function au(n){return vt(ra)=="england"?`england/${n}`:vt(aa)?`https://assets.npw.scot/v1/${n}`:`scotland/${n}`}function ua(){let n=vt(br);for(let e of ea[n])e.set(!1);n=="assessment"&&la.set("off"),n=="LocalAccess"&&(ta.set(null),na.set(null),ia.set(null))}function uu(n){ua(),gr.set({kind:"main"});let e=n;br.set(e);for(let t of $l[e])t.set(!0)}function ca(){let n={}.VITE_COUNTRY;return n=="scotland"||n=="england"?n:"scotland"}function da(n){let e,t,i,r,o;const l=n[5].default,s=ut(l,n,n[4],null);return{c(){e=Ie("dialog"),t=Ie("div"),s&&s.c(),tt(e,"class","svelte-tqzqco")},m(a,u){X(a,e,u),Hr(e,t),s&&s.m(t,null),n[6](e),i=!0,r||(o=[At(e,"click",Br(n[1])),At(e,"keydown",n[2])],r=!0)},p(a,[u]){s&&s.p&&(!i||u&16)&&ct(s,l,a,a[4],i?ft(l,a[4],u,null):dt(a[4]),null)},i(a){i||(H(s,a),i=!0)},o(a){q(s,a),i=!1},d(a){a&&J(e),s&&s.d(a),n[6](null),r=!1,Vi(o)}}}function fa(n,e,t){let{$$slots:i={},$$scope:r}=e,{show:o=!1}=e,l;function s(d){d.target==l&&t(3,o=!1)}function a(d){d.key=="Escape"&&(d.stopPropagation(),t(3,o=!1))}function u(d){Mt[d?"unshift":"push"](()=>{l=d,t(0,l)})}return n.$$set=d=>{"show"in d&&t(3,o=d.show),"$$scope"in d&&t(4,r=d.$$scope)},n.$$.update=()=>{n.$$.dirty&9&&l&&(o?l.showModal():l.close())},[l,s,a,o,r,i,u]}class ma extends Te{constructor(e){super(),Oe(this,e,fa,da,Le,{show:3})}}function cu(n){return["interpolate",["linear"],["zoom"],5,.5+n,10,1+n,12,1.5+n,14,4+n,16,7+n,20,24+n]}function du(n){return n<1e3?Math.round(n)+"m":(n/1e3).toFixed(1)+"km"}function fu(n,e){return e==0?"0%":`${Math.round(n/e*100)}%`}function mu(n){return n.reduce((e,t)=>e+t,0)}function hu(n){return["let","base",["+",.3,["/",3,["+",1,["^",2.718,["-",2.94,["*",n,.0021]]]]]],["interpolate",["linear"],["zoom"],12,["*",2.1,["var","base"]],14,["*",5.25,["var","base"]],15,["*",7.5,["var","base"]],16,["*",18,["var","base"]],18,["*",52.5,["var","base"]]]]}function gu(n){return["step",n,"rgba(0,0,0,0)",1,"#9C9C9C",50,"#FFFF73",100,"#AFFF00",250,"#00FFFF",500,"#30B0FF",1e3,"#2E5FFF",2e3,"#0000FF",3e3,"#ba00ff"]}function bu(n,e){return n.startsWith(e)?n.slice(e.length):n}let yu={scotland:[-8.943,54.631,-.901,59.489],england:[-5.96,49.89,2.31,55.94]};export{oa as $,la as A,Ta as B,ou as C,du as D,iu as E,wa as F,Ea as G,eu as H,br as I,gr as J,tu as K,Sa as L,Ca as M,_o as N,fu as O,xa as P,yr as Q,ru as R,nu as S,Jl as T,Wa as U,za as V,su as W,Xa as X,Sl as Y,$a as Z,Ga as _,ra as a,Qr as a0,ja as a1,cr as a2,Ia as a3,Xl as a4,dr as a5,_n as a6,fr as a7,mr as a8,ta as a9,Ha as aa,mu as ab,Ya as ac,nn as ad,Va as ae,Qa as af,au as ag,Aa as ah,Oa as ai,Pa as aj,gu as ak,hu as al,bn as am,Fa as an,Da as ao,Ja as ap,Ua as aq,na as ar,ia as as,ua as at,hr as au,uu as av,lu as aw,aa as ax,xo as ay,Na as b,yu as c,Ki as d,Bt as e,va as f,rn as g,La as h,pa as i,Xr as j,co as k,Ma as l,Ba as m,Jt as n,ka as o,ma as p,qa as q,fo as r,bu as s,Za as t,Jr as u,Ka as v,R as w,Ra as x,sa as y,cu as z};
