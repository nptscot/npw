import{S as $e,i as ge,s as be,e as u,a as p,t as O,c as N,b as m,d as z,f as ve,g as r,h as w,j as re,m as T,l as ie,k as D,n as P,o as b,p as he,q as F,r as we,u as ke,v as ye,w as V,x as Ce}from"./index-8431dc5f.js";import{e as G}from"./each-1a047c4d.js";import{f as Le}from"./Modal.svelte_svelte_type_style_lang-7a96bd86.js";import{M as je,m as Ae,c as fe,l as Se,s as Q,N as Me,G as Ne,b as Te,F as De,h as Pe,L as Fe,a as He,P as Be}from"./index-3b73ee06.js";import{l as Ie}from"./files-3b40347d.js";const Re="/npw/assets/boundaries-2d4b0f31.geojson";function ce(s,t,o){const l=s.slice();return l[9]=t[o],l}function ue(s,t,o){const l=s.slice();return l[12]=t[o],l}function pe(s){let t;return{c(){t=u("b"),t.textContent="Warning: This is an experimental version"},m(o,l){w(o,t,l)},d(o){o&&b(t)}}}function _e(s){let t,o=s[12]+"",l,n;return{c(){t=u("option"),l=O(o),t.__value=n=s[12],z(t,t.__value)},m(e,a){w(e,t,a),r(t,l)},p(e,a){a&4&&o!==(o=e[12]+"")&&V(l,o),a&4&&n!==(n=e[12])&&(t.__value=n,z(t,t.__value))},d(e){e&&b(t)}}}function me(s){let t,o,l,n=G(s[3]),e=[];for(let a=0;a<n.length;a+=1)e[a]=de(ce(s,n,a));return{c(){t=u("h3"),t.textContent="Recently used areas",o=p(),l=u("ul");for(let a=0;a<e.length;a+=1)e[a].c()},m(a,i){w(a,t,i),w(a,o,i),w(a,l,i);for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,null)},p(a,i){if(i&8){n=G(a[3]);let c;for(c=0;c<n.length;c+=1){const L=ce(a,n,c);e[c]?e[c].p(L,i):(e[c]=de(L),e[c].c(),e[c].m(l,null))}for(;c<e.length;c+=1)e[c].d(1);e.length=n.length}},d(a){a&&(b(t),b(o),b(l)),he(e,a)}}}function de(s){let t,o,l=Q(s[9],"LAD_")+"",n,e,a;return{c(){t=u("li"),o=u("a"),n=O(l),a=p(),m(o,"href",e=`npw.html?boundary=${s[9]}`)},m(i,c){w(i,t,c),r(t,o),r(o,n),r(t,a)},p(i,c){c&8&&l!==(l=Q(i[9],"LAD_")+"")&&V(n,l),c&8&&e!==(e=`npw.html?boundary=${i[9]}`)&&m(o,"href",e)},d(i){i&&b(t)}}}function We(s){let t,o=s[8].name+"",l;return{c(){t=u("p"),l=O(o)},m(n,e){w(n,t,e),r(t,l)},p(n,e){e&256&&o!==(o=n[8].name+"")&&V(l,o)},d(n){n&&b(t)}}}function qe(s){let t,o;return t=new Be({props:{openOn:"hover",$$slots:{default:[We,({props:l})=>({8:l}),({props:l})=>l?256:0]},$$scope:{ctx:s}}}),{c(){N(t.$$.fragment)},m(l,n){T(t,l,n),o=!0},p(l,n){const e={};n&33024&&(e.$$scope={dirty:n,ctx:l}),t.$set(e)},i(l){o||(D(t.$$.fragment,l),o=!0)},o(l){P(t.$$.fragment,l),o=!1},d(l){F(t,l)}}}function Ge(s){let t,o,l,n;return t=new De({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Pe(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[qe]},$$scope:{ctx:s}}}),t.$on("click",Ee),l=new Fe({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){N(t.$$.fragment),o=p(),N(l.$$.fragment)},m(e,a){T(t,e,a),w(e,o,a),T(l,e,a),n=!0},p(e,a){const i={};a&32768&&(i.$$scope={dirty:a,ctx:e}),t.$set(i)},i(e){n||(D(t.$$.fragment,e),D(l.$$.fragment,e),n=!0)},o(e){P(t.$$.fragment,e),P(l.$$.fragment,e),n=!1},d(e){e&&b(o),F(t,e),F(l,e)}}}function Oe(s){let t,o,l,n;return t=new Me({props:{showCompass:!1,position:"top-right"}}),l=new Ne({props:{data:s[0],generateId:!0,$$slots:{default:[Ge]},$$scope:{ctx:s}}}),{c(){N(t.$$.fragment),o=p(),N(l.$$.fragment)},m(e,a){T(t,e,a),w(e,o,a),T(l,e,a),n=!0},p(e,a){const i={};a&1&&(i.data=e[0]),a&32768&&(i.$$scope={dirty:a,ctx:e}),l.$set(i)},i(e){n||(D(t.$$.fragment,e),D(l.$$.fragment,e),n=!0)},o(e){P(t.$$.fragment,e),P(l.$$.fragment,e),n=!1},d(e){e&&b(o),F(t,e),F(l,e)}}}function Ue(s){let t,o,l,n,e,a,i,c,L,I,k,j,X,U,Y,E,Z,J,x,S,$,H,ee,R,te,A,le,W,ne,oe,q,y,B,K,ae,h=s[4]!="scotland"&&pe(),M=G(s[2]),_=[];for(let f=0;f<M.length;f+=1)_[f]=_e(ue(s,M,f));let d=s[3].length>0&&me(s);return y=new je({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${Ae}`,bounds:fe[s[4]],$$slots:{default:[Oe]},$$scope:{ctx:s}}}),y.$on("error",s[7]),{c(){t=u("link"),o=p(),l=u("div"),n=u("div"),e=u("p"),e.innerHTML=`<a href="https://www.npt.scot/"><img src="${Se}" alt="NPT logo"/></a>`,a=p(),i=u("h1"),i.textContent="Network Planning Workspace",c=p(),h&&h.c(),L=p(),I=u("p"),I.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,k=p(),j=u("div"),j.innerHTML='<a href="credits.html">Credits</a>',X=p(),U=u("div"),U.innerHTML='<a href="manual.html">Manual</a>',Y=p(),E=u("h3"),E.innerHTML='<label class="ds_label" for="component">Select an area</label>',Z=p(),J=u("p"),J.textContent="Select your area from this list, or click on the map, to start.",x=p(),S=u("div"),$=u("select"),H=u("option");for(let f=0;f<_.length;f+=1)_[f].c();ee=p(),R=u("span"),te=p(),A=u("button"),le=O("Start"),ne=p(),d&&d.c(),oe=p(),q=u("div"),N(y.$$.fragment),m(t,"rel","icon"),m(t,"type","image/x-icon"),m(t,"href",Le),H.__value="",z(H,H.__value),m($,"class","ds_select"),m($,"id","component"),m($,"name","component"),s[1]===void 0&&ve(()=>s[5].call($)),m(R,"class","ds_select-arrow"),m(R,"aria-hidden","true"),m(S,"class","ds_select-wrapper"),m(A,"class","ds_button"),A.disabled=W=s[1]=="",m(n,"class","controls svelte-m802nj"),m(q,"class","map svelte-m802nj"),m(l,"class","container svelte-m802nj")},m(f,v){r(document.head,t),w(f,o,v),w(f,l,v),r(l,n),r(n,e),r(n,a),r(n,i),r(n,c),h&&h.m(n,null),r(n,L),r(n,I),r(n,k),r(n,j),r(n,X),r(n,U),r(n,Y),r(n,E),r(n,Z),r(n,J),r(n,x),r(n,S),r(S,$),r($,H);for(let C=0;C<_.length;C+=1)_[C]&&_[C].m($,null);re($,s[1],!0),r(S,ee),r(S,R),r(n,te),r(n,A),r(A,le),r(n,ne),d&&d.m(n,null),r(l,oe),r(l,q),T(y,q,null),B=!0,K||(ae=[ie($,"change",s[5]),ie(A,"click",s[6])],K=!0)},p(f,[v]){if(f[4]!="scotland"?h||(h=pe(),h.c(),h.m(n,L)):h&&(h.d(1),h=null),v&4){M=G(f[2]);let g;for(g=0;g<M.length;g+=1){const se=ue(f,M,g);_[g]?_[g].p(se,v):(_[g]=_e(se),_[g].c(),_[g].m($,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=M.length}v&6&&re($,f[1]),(!B||v&6&&W!==(W=f[1]==""))&&(A.disabled=W),f[3].length>0?d?d.p(f,v):(d=me(f),d.c(),d.m(n,null)):d&&(d.d(1),d=null);const C={};v&16&&(C.bounds=fe[f[4]]),v&32769&&(C.$$scope={dirty:v,ctx:f}),y.$set(C)},i(f){B||(D(y.$$.fragment,f),B=!0)},o(f){P(y.$$.fragment,f),B=!1},d(f){f&&(b(o),b(l)),b(t),h&&h.d(),he(_,f),d&&d.d(),F(y),K=!1,we(ae)}}}function Ee(s){let t=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${t.name}`}function Je(s,t,o){let l;ke(s,He,k=>o(4,l=k));let n={type:"FeatureCollection",features:[]},e="",a=[],i=[...Ie().keys()];i.sort(),ye(async()=>{window.DS.initAll();let k=await fetch({scotland:Te,england:Re}[l]);o(0,n=await k.json());for(let j of n.features)a.push(j.properties.name);a.sort(),o(2,a),o(3,i=i.filter(j=>a.includes(Q(j,"LAD_"))))});function c(){e=Ce(this),o(1,e),o(2,a)}return[n,e,a,i,l,c,()=>window.location.href=`npw.html?boundary=LAD_${e}`,k=>{console.log(k.detail.error)}]}class Ke extends $e{constructor(t){super(),ge(this,t,Je,Ue,be,{})}}new Ke({target:document.getElementById("app")});
