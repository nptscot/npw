import{S as O,i as P,s as R,e as s,a as p,t as L,b as I,O as W,h as K,g as t,w as T,X as A,o as N,q as X,l as D,r as Y}from"./index-411e9197.js";import{e as H}from"./each-3bd9ff9f.js";import{d as J}from"./index-2c1fcfe2.js";import{m as j}from"./files-3b40347d.js";function E(l,e,i){const n=l.slice();return n[6]=e[i][0],n[7]=e[i][1],n}function G(l){let e,i,n=l[6]+"",u,b,f,_=$(l[7])+"",m,o,d,k,z,h,v,M,B;function y(){return l[4](l[6])}function F(){return l[5](l[6])}return{c(){e=s("tr"),i=s("td"),u=L(n),b=p(),f=s("td"),m=L(_),o=p(),d=s("td"),k=s("button"),k.textContent="Download",z=p(),h=s("button"),h.textContent="Delete",v=p()},m(w,g){K(w,e,g),t(e,i),t(i,u),t(e,b),t(e,f),t(f,m),t(e,o),t(e,d),t(d,k),t(d,z),t(d,h),t(e,v),M||(B=[D(k,"click",y),D(h,"click",F)],M=!0)},p(w,g){l=w,g&1&&n!==(n=l[6]+"")&&T(u,n),g&1&&_!==(_=$(l[7])+"")&&T(m,_)},d(w){w&&N(e),M=!1,Y(B)}}}function Q(l){let e,i,n,u,b,f,_,m,o=$(l[1])+"",d,k,z,h,v,M,B,y,F,w,g,S=H(l[0]),c=[];for(let a=0;a<S.length;a+=1)c[a]=G(E(l,S,a));return{c(){e=s("main"),i=s("h1"),i.textContent="Clean local storage",n=p(),u=s("a"),u.textContent="Back to NPW",b=p(),f=s("p"),f.innerHTML=`All files are stored in your browser&#39;s local storage. There&#39;s a 5MB size
    limit, and you&#39;ve been redirected to this page because the last action you
    took exceeds this limit. You must delete some other files first to continue. <b>Before you delete a file, you should download a copy.</b>`,_=p(),m=s("p"),d=L(o),k=L(" / 5 MB is used right now"),z=p(),h=s("progress"),M=p(),B=s("table"),y=s("table"),F=s("thead"),F.innerHTML="<tr><th>Filename</th> <th>Size</th> <th>Actions</th></tr>",w=p(),g=s("tbody");for(let a=0;a<c.length;a+=1)c[a].c();I(u,"href","./"),h.value=v=100*l[1]/(1024*1024*5),I(h,"max","100"),W(h,"width","100%"),I(e,"class","container")},m(a,C){K(a,e,C),t(e,i),t(e,n),t(e,u),t(e,b),t(e,f),t(e,_),t(e,m),t(m,d),t(m,k),t(e,z),t(e,h),t(e,M),t(e,B),t(B,y),t(y,F),t(y,w),t(y,g);for(let r=0;r<c.length;r+=1)c[r]&&c[r].m(g,null)},p(a,[C]){if(C&2&&o!==(o=$(a[1])+"")&&T(d,o),C&2&&v!==(v=100*a[1]/(1024*1024*5))&&(h.value=v),C&13){S=H(a[0]);let r;for(r=0;r<S.length;r+=1){const q=E(a,S,r);c[r]?c[r].p(q,C):(c[r]=G(q),c[r].c(),c[r].m(g,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=S.length}},i:A,o:A,d(a){a&&N(e),X(c,a)}}}function $(l){if(l==0)return"0 bytes";let e=1024,i=["bytes","KB","MB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(1))+" "+i[n]}function U(l,e,i){let n,u=j();function b(o){J(`${o}.geojson`,window.localStorage.getItem(o))}function f(o){window.confirm(`Really delete ${o}?`)&&(window.localStorage.removeItem(o),i(0,u=j()))}const _=o=>b(o),m=o=>f(o);return l.$$.update=()=>{l.$$.dirty&1&&i(1,n=u.reduce((o,d)=>o+d[1],0))},[u,n,b,f,_,m]}class V extends O{constructor(e){super(),P(this,e,U,Q,R,{})}}new V({target:document.getElementById("app")});
