var Ie=Object.defineProperty;var Re=(n,p,g)=>p in n?Ie(n,p,{enumerable:!0,configurable:!0,writable:!0,value:g}):n[p]=g;var K=(n,p,g)=>(Re(n,typeof p!="symbol"?p+"":p,g),g);(function(){"use strict";let n;const p=new Array(128).fill(void 0);p.push(void 0,null,!0,!1);function g(t){return p[t]}let A=p.length;function Q(t){t<132||(p[t]=A,A=t)}function l(t){const e=g(t);return Q(t),e}const B=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&B.decode();let M=null;function E(){return(M===null||M.byteLength===0)&&(M=new Uint8Array(n.memory.buffer)),M}function b(t,e){return t=t>>>0,B.decode(E().subarray(t,t+e))}function w(t){A===p.length&&p.push(p.length+1);const e=A;return A=p[e],p[e]=t,e}let m=0;const P=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ee=typeof P.encodeInto=="function"?function(t,e){return P.encodeInto(t,e)}:function(t,e){const r=P.encode(t);return e.set(r),{read:t.length,written:r.length}};function I(t,e,r){if(r===void 0){const s=P.encode(t),c=e(s.length,1)>>>0;return E().subarray(c,c+s.length).set(s),m=s.length,c}let _=t.length,i=e(_,1)>>>0;const d=E();let u=0;for(;u<_;u++){const s=t.charCodeAt(u);if(s>127)break;d[i+u]=s}if(u!==_){u!==0&&(t=t.slice(u)),i=r(i,_,_=u+t.length*3,1)>>>0;const s=E().subarray(i+u,i+_),c=ee(t,s);u+=c.written,i=r(i,_,u,1)>>>0}return m=u,i}function R(t){return t==null}let S=null;function o(){return(S===null||S.buffer.detached===!0||S.buffer.detached===void 0&&S.buffer!==n.memory.buffer)&&(S=new DataView(n.memory.buffer)),S}function F(t){const e=typeof t;if(e=="number"||e=="boolean"||t==null)return`${t}`;if(e=="string")return`"${t}"`;if(e=="symbol"){const i=t.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=t.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(t)){const i=t.length;let d="[";i>0&&(d+=F(t[0]));for(let u=1;u<i;u++)d+=", "+F(t[u]);return d+="]",d}const r=/\[object ([^\]]+)\]/.exec(toString.call(t));let _;if(r.length>1)_=r[1];else return toString.call(t);if(_=="Object")try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}
${t.stack}`:_}function te(t,e){const r=e(t.length*1,1)>>>0;return E().set(t,r/1),m=t.length,r}let x=null;function re(){return(x===null||x.byteLength===0)&&(x=new Float64Array(n.memory.buffer)),x}function ne(t,e){return t=t>>>0,re().subarray(t/8,t/8+e)}function ae(t,e){return t=t>>>0,E().subarray(t/1,t/1+e)}function k(t,e){try{return t.apply(this,e)}catch(r){n.__wbindgen_exn_store(w(r))}}const z=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(t=>n.__wbg_mapmodel_free(t>>>0,1));class _e{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,z.unregister(this),e}free(){const e=this.__destroy_into_raw();n.__wbg_mapmodel_free(e,0)}constructor(e){try{const d=n.__wbindgen_add_to_stack_pointer(-16),u=te(e,n.__wbindgen_malloc),s=m;n.mapmodel_new(d,u,s);var r=o().getInt32(d+4*0,!0),_=o().getInt32(d+4*1,!0),i=o().getInt32(d+4*2,!0);if(i)throw l(_);return this.__wbg_ptr=r>>>0,z.register(this,this.__wbg_ptr,this),this}finally{n.__wbindgen_add_to_stack_pointer(16)}}renderDebug(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_renderDebug(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getInvertedBoundary(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getInvertedBoundary(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getBounds(){try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getBounds(i,this.__wbg_ptr);var e=o().getInt32(i+4*0,!0),r=o().getInt32(i+4*1,!0),_=ne(e,r).slice();return n.__wbindgen_free(e,r*8,8),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}toRouteSnapper(){try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_toRouteSnapper(i,this.__wbg_ptr);var e=o().getInt32(i+4*0,!0),r=o().getInt32(i+4*1,!0),_=ae(e,r).slice();return n.__wbindgen_free(e,r*1,1),_}finally{n.__wbindgen_add_to_stack_pointer(16)}}setRoute(e,r){try{const d=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_setRoute(d,this.__wbg_ptr,!R(e),R(e)?0:e,w(r));var _=o().getInt32(d+4*0,!0),i=o().getInt32(d+4*1,!0);if(i)throw l(_)}finally{n.__wbindgen_add_to_stack_pointer(16)}}deleteRoute(e){try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_deleteRoute(i,this.__wbg_ptr,e);var r=o().getInt32(i+4*0,!0),_=o().getInt32(i+4*1,!0);if(_)throw l(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}clearAllRoutes(){n.mapmodel_clearAllRoutes(this.__wbg_ptr)}autosplitRoute(e){let r,_;try{const f=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_autosplitRoute(f,this.__wbg_ptr,w(e));var i=o().getInt32(f+4*0,!0),d=o().getInt32(f+4*1,!0),u=o().getInt32(f+4*2,!0),s=o().getInt32(f+4*3,!0),c=i,a=d;if(s)throw c=0,a=0,l(u);return r=c,_=a,b(c,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(r,_,1)}}renderRoutes(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_renderRoutes(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}evaluateRoute(e){let r,_;try{const f=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_evaluateRoute(f,this.__wbg_ptr,w(e));var i=o().getInt32(f+4*0,!0),d=o().getInt32(f+4*1,!0),u=o().getInt32(f+4*2,!0),s=o().getInt32(f+4*3,!0),c=i,a=d;if(s)throw c=0,a=0,l(u);return r=c,_=a,b(c,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(r,_,1)}}debugReachablePath(e,r){let _,i;try{const h=n.__wbindgen_add_to_stack_pointer(-16),y=I(e,n.__wbindgen_malloc,n.__wbindgen_realloc),v=m;n.mapmodel_debugReachablePath(h,this.__wbg_ptr,y,v,r);var d=o().getInt32(h+4*0,!0),u=o().getInt32(h+4*1,!0),s=o().getInt32(h+4*2,!0),c=o().getInt32(h+4*3,!0),a=d,f=u;if(c)throw a=0,f=0,l(s);return _=a,i=f,b(a,f)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(_,i,1)}}debugUnreachablePath(e,r){let _,i;try{const h=n.__wbindgen_add_to_stack_pointer(-16),y=I(e,n.__wbindgen_malloc,n.__wbindgen_realloc),v=m;n.mapmodel_debugUnreachablePath(h,this.__wbg_ptr,y,v,r);var d=o().getInt32(h+4*0,!0),u=o().getInt32(h+4*1,!0),s=o().getInt32(h+4*2,!0),c=o().getInt32(h+4*3,!0),a=d,f=u;if(c)throw a=0,f=0,l(s);return _=a,i=f,b(a,f)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(_,i,1)}}evaluateOD(e){let r,_;try{const f=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_evaluateOD(f,this.__wbg_ptr,e);var i=o().getInt32(f+4*0,!0),d=o().getInt32(f+4*1,!0),u=o().getInt32(f+4*2,!0),s=o().getInt32(f+4*3,!0),c=i,a=d;if(s)throw c=0,a=0,l(u);return r=c,_=a,b(c,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(r,_,1)}}recalculateStats(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_recalculateStats(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}toSavefile(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_toSavefile(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}loadSavefile(e){try{const i=n.__wbindgen_add_to_stack_pointer(-16),d=I(e,n.__wbindgen_malloc,n.__wbindgen_realloc),u=m;n.mapmodel_loadSavefile(i,this.__wbg_ptr,d,u);var r=o().getInt32(i+4*0,!0),_=o().getInt32(i+4*1,!0);if(_)throw l(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}getAreaMeshDensity(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getAreaMeshDensity(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getGridMeshDensity(e,r,_){let i,d;try{const y=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getGridMeshDensity(y,this.__wbg_ptr,e,r,_);var u=o().getInt32(y+4*0,!0),s=o().getInt32(y+4*1,!0),c=o().getInt32(y+4*2,!0),a=o().getInt32(y+4*3,!0),f=u,h=s;if(a)throw f=0,h=0,l(c);return i=f,d=h,b(f,h)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(i,d,1)}}classifyExistingNetwork(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_classifyExistingNetwork(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}importExistingRoutes(){return n.mapmodel_importExistingRoutes(this.__wbg_ptr)>>>0}importCoreNetwork(){return n.mapmodel_importCoreNetwork(this.__wbg_ptr)>>>0}getSchools(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getSchools(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getGPHospitals(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getGPHospitals(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getTownCentres(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getTownCentres(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getSettlements(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getSettlements(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getGreenspaces(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getGreenspaces(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getDataZones(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getDataZones(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}renderReachableNetwork(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_renderReachableNetwork(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}renderLevelOfService(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_renderLevelOfService(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}renderCoreNetwork(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_renderCoreNetwork(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}renderPrecalculatedFlows(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_renderPrecalculatedFlows(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}getMajorJunctions(){let e,r;try{const a=n.__wbindgen_add_to_stack_pointer(-16);n.mapmodel_getMajorJunctions(a,this.__wbg_ptr);var _=o().getInt32(a+4*0,!0),i=o().getInt32(a+4*1,!0),d=o().getInt32(a+4*2,!0),u=o().getInt32(a+4*3,!0),s=_,c=i;if(u)throw s=0,c=0,l(d);return e=s,r=c,b(s,c)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(e,r,1)}}}async function ie(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(_){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const r=await t.arrayBuffer();return await WebAssembly.instantiate(r,e)}else{const r=await WebAssembly.instantiate(t,e);return r instanceof WebAssembly.Instance?{instance:r,module:t}:r}}function oe(){const t={};return t.wbg={},t.wbg.__wbindgen_object_drop_ref=function(e){l(e)},t.wbg.__wbindgen_string_new=function(e,r){const _=b(e,r);return w(_)},t.wbg.__wbindgen_string_get=function(e,r){const _=g(r),i=typeof _=="string"?_:void 0;var d=R(i)?0:I(i,n.__wbindgen_malloc,n.__wbindgen_realloc),u=m;o().setInt32(e+4*1,u,!0),o().setInt32(e+4*0,d,!0)},t.wbg.__wbindgen_error_new=function(e,r){const _=new Error(b(e,r));return w(_)},t.wbg.__wbindgen_number_get=function(e,r){const _=g(r),i=typeof _=="number"?_:void 0;o().setFloat64(e+8*1,R(i)?0:i,!0),o().setInt32(e+4*0,!R(i),!0)},t.wbg.__wbindgen_boolean_get=function(e){const r=g(e);return typeof r=="boolean"?r?1:0:2},t.wbg.__wbindgen_is_bigint=function(e){return typeof g(e)=="bigint"},t.wbg.__wbindgen_is_object=function(e){const r=g(e);return typeof r=="object"&&r!==null},t.wbg.__wbindgen_in=function(e,r){return g(e)in g(r)},t.wbg.__wbindgen_bigint_from_i64=function(e){return w(e)},t.wbg.__wbindgen_jsval_eq=function(e,r){return g(e)===g(r)},t.wbg.__wbindgen_bigint_from_u64=function(e){const r=BigInt.asUintN(64,e);return w(r)},t.wbg.__wbindgen_is_string=function(e){return typeof g(e)=="string"},t.wbg.__wbindgen_is_undefined=function(e){return g(e)===void 0},t.wbg.__wbindgen_jsval_loose_eq=function(e,r){return g(e)==g(r)},t.wbg.__wbindgen_as_number=function(e){return+g(e)},t.wbg.__wbg_String_b9412f8799faab3e=function(e,r){const _=String(g(r)),i=I(_,n.__wbindgen_malloc,n.__wbindgen_realloc),d=m;o().setInt32(e+4*1,d,!0),o().setInt32(e+4*0,i,!0)},t.wbg.__wbindgen_object_clone_ref=function(e){const r=g(e);return w(r)},t.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(e,r){const _=g(e)[g(r)];return w(_)},t.wbg.__wbg_debug_5a33c41aeac15ee6=function(e){console.debug(g(e))},t.wbg.__wbg_error_09480e4aadca50ad=function(e){console.error(g(e))},t.wbg.__wbg_info_c261acb2deacd903=function(e){console.info(g(e))},t.wbg.__wbg_log_b103404cc5920657=function(e){console.log(g(e))},t.wbg.__wbg_warn_2b3adb99ce26c314=function(e){console.warn(g(e))},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return w(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,r){const _=g(r).stack,i=I(_,n.__wbindgen_malloc,n.__wbindgen_realloc),d=m;o().setInt32(e+4*1,d,!0),o().setInt32(e+4*0,i,!0)},t.wbg.__wbg_error_f851667af71bcfc6=function(e,r){let _,i;try{_=e,i=r,console.error(b(e,r))}finally{n.__wbindgen_free(_,i,1)}},t.wbg.__wbg_performance_a1b8bde2ee512264=function(e){const r=g(e).performance;return w(r)},t.wbg.__wbg_now_abd80e969af37148=function(e){return g(e).now()},t.wbg.__wbg_get_3baa728f9d58d3f6=function(e,r){const _=g(e)[r>>>0];return w(_)},t.wbg.__wbg_length_ae22078168b726f5=function(e){return g(e).length},t.wbg.__wbindgen_is_function=function(e){return typeof g(e)=="function"},t.wbg.__wbg_newnoargs_76313bd6ff35d0f2=function(e,r){const _=new Function(b(e,r));return w(_)},t.wbg.__wbg_next_de3e9db4440638b2=function(e){const r=g(e).next;return w(r)},t.wbg.__wbg_next_f9cb570345655b9a=function(){return k(function(e){const r=g(e).next();return w(r)},arguments)},t.wbg.__wbg_done_bfda7aa8f252b39f=function(e){return g(e).done},t.wbg.__wbg_value_6d39332ab4788d86=function(e){const r=g(e).value;return w(r)},t.wbg.__wbg_iterator_888179a48810a9fe=function(){return w(Symbol.iterator)},t.wbg.__wbg_get_224d16597dbbfd96=function(){return k(function(e,r){const _=Reflect.get(g(e),g(r));return w(_)},arguments)},t.wbg.__wbg_call_1084a111329e68ce=function(){return k(function(e,r){const _=g(e).call(g(r));return w(_)},arguments)},t.wbg.__wbg_self_3093d5d1f7bcb682=function(){return k(function(){const e=self.self;return w(e)},arguments)},t.wbg.__wbg_window_3bcfc4d31bc012f8=function(){return k(function(){const e=window.window;return w(e)},arguments)},t.wbg.__wbg_globalThis_86b222e13bdf32ed=function(){return k(function(){const e=globalThis.globalThis;return w(e)},arguments)},t.wbg.__wbg_global_e5a3fe56f8be9485=function(){return k(function(){const e=global.global;return w(e)},arguments)},t.wbg.__wbg_isArray_8364a5371e9737d8=function(e){return Array.isArray(g(e))},t.wbg.__wbg_instanceof_ArrayBuffer_61dfc3198373c902=function(e){let r;try{r=g(e)instanceof ArrayBuffer}catch{r=!1}return r},t.wbg.__wbg_call_89af060b4e1523f2=function(){return k(function(e,r,_){const i=g(e).call(g(r),g(_));return w(i)},arguments)},t.wbg.__wbg_instanceof_Map_763ce0e95960d55e=function(e){let r;try{r=g(e)instanceof Map}catch{r=!1}return r},t.wbg.__wbg_isSafeInteger_7f1ed56200d90674=function(e){return Number.isSafeInteger(g(e))},t.wbg.__wbg_entries_7a0e06255456ebcd=function(e){const r=Object.entries(g(e));return w(r)},t.wbg.__wbg_buffer_b7b08af79b0b0974=function(e){const r=g(e).buffer;return w(r)},t.wbg.__wbg_new_ea1883e1e5e86686=function(e){const r=new Uint8Array(g(e));return w(r)},t.wbg.__wbg_set_d1e79e2388520f18=function(e,r,_){g(e).set(g(r),_>>>0)},t.wbg.__wbg_length_8339fcf5d8ecd12e=function(e){return g(e).length},t.wbg.__wbg_instanceof_Uint8Array_247a91427532499e=function(e){let r;try{r=g(e)instanceof Uint8Array}catch{r=!1}return r},t.wbg.__wbindgen_bigint_get_as_i64=function(e,r){const _=g(r),i=typeof _=="bigint"?_:void 0;o().setBigInt64(e+8*1,R(i)?BigInt(0):i,!0),o().setInt32(e+4*0,!R(i),!0)},t.wbg.__wbindgen_debug_string=function(e,r){const _=F(g(r)),i=I(_,n.__wbindgen_malloc,n.__wbindgen_realloc),d=m;o().setInt32(e+4*1,d,!0),o().setInt32(e+4*0,i,!0)},t.wbg.__wbindgen_throw=function(e,r){throw new Error(b(e,r))},t.wbg.__wbindgen_memory=function(){const e=n.memory;return w(e)},t}function se(t,e){return n=t.exports,G.__wbindgen_wasm_module=e,S=null,x=null,M=null,n}async function G(t){if(n!==void 0)return n;typeof t<"u"&&Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead"),typeof t>"u"&&(t=new URL("/npw/assets/backend_bg-988fada1.wasm",self.location));const e=oe();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:r,module:_}=await ie(await t,e);return se(r,_)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H=Symbol("Comlink.proxy"),ce=Symbol("Comlink.endpoint"),de=Symbol("Comlink.releaseProxy"),U=Symbol("Comlink.finalizer"),T=Symbol("Comlink.thrown"),V=t=>typeof t=="object"&&t!==null||typeof t=="function",ue={canHandle:t=>V(t)&&t[H],serialize(t){const{port1:e,port2:r}=new MessageChannel;return L(t,e),[r,[r]]},deserialize(t){return t.start(),be(t)}},ge={canHandle:t=>V(t)&&T in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},$=new Map([["proxy",ue],["throw",ge]]);function fe(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function L(t,e=globalThis,r=["*"]){e.addEventListener("message",function _(i){if(!i||!i.data)return;if(!fe(r,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:d,type:u,path:s}=Object.assign({path:[]},i.data),c=(i.data.argumentList||[]).map(O);let a;try{const f=s.slice(0,-1).reduce((y,v)=>y[v],t),h=s.reduce((y,v)=>y[v],t);switch(u){case"GET":a=h;break;case"SET":f[s.slice(-1)[0]]=O(i.data.value),a=!0;break;case"APPLY":a=h.apply(f,c);break;case"CONSTRUCT":{const y=new h(...c);a=me(y)}break;case"ENDPOINT":{const{port1:y,port2:v}=new MessageChannel;L(t,v),a=pe(y,[y])}break;case"RELEASE":a=void 0;break;default:return}}catch(f){a={value:f,[T]:0}}Promise.resolve(a).catch(f=>({value:f,[T]:0})).then(f=>{const[h,y]=J(f);e.postMessage(Object.assign(Object.assign({},h),{id:d}),y),u==="RELEASE"&&(e.removeEventListener("message",_),Z(e),U in t&&typeof t[U]=="function"&&t[U]())}).catch(f=>{const[h,y]=J({value:new TypeError("Unserializable return value"),[T]:0});e.postMessage(Object.assign(Object.assign({},h),{id:d}),y)})}),e.start&&e.start()}function le(t){return t.constructor.name==="MessagePort"}function Z(t){le(t)&&t.close()}function be(t,e){const r=new Map;return t.addEventListener("message",function(i){const{data:d}=i;if(!d||!d.id)return;const u=r.get(d.id);if(u)try{u(d)}finally{r.delete(d.id)}}),W(t,r,[],e)}function D(t){if(t)throw new Error("Proxy has been released and is not useable")}function Y(t){return N(t,new Map,{type:"RELEASE"}).then(()=>{Z(t)})}const C=new WeakMap,j="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(C.get(t)||0)-1;C.set(t,e),e===0&&Y(t)});function we(t,e){const r=(C.get(e)||0)+1;C.set(e,r),j&&j.register(t,e,t)}function he(t){j&&j.unregister(t)}function W(t,e,r=[],_=function(){}){let i=!1;const d=new Proxy(_,{get(u,s){if(D(i),s===de)return()=>{he(d),Y(t),e.clear(),i=!0};if(s==="then"){if(r.length===0)return{then:()=>d};const c=N(t,e,{type:"GET",path:r.map(a=>a.toString())}).then(O);return c.then.bind(c)}return W(t,e,[...r,s])},set(u,s,c){D(i);const[a,f]=J(c);return N(t,e,{type:"SET",path:[...r,s].map(h=>h.toString()),value:a},f).then(O)},apply(u,s,c){D(i);const a=r[r.length-1];if(a===ce)return N(t,e,{type:"ENDPOINT"}).then(O);if(a==="bind")return W(t,e,r.slice(0,-1));const[f,h]=q(c);return N(t,e,{type:"APPLY",path:r.map(y=>y.toString()),argumentList:f},h).then(O)},construct(u,s){D(i);const[c,a]=q(s);return N(t,e,{type:"CONSTRUCT",path:r.map(f=>f.toString()),argumentList:c},a).then(O)}});return we(d,t),d}function ye(t){return Array.prototype.concat.apply([],t)}function q(t){const e=t.map(J);return[e.map(r=>r[0]),ye(e.map(r=>r[1]))]}const X=new WeakMap;function pe(t,e){return X.set(t,e),t}function me(t){return Object.assign(t,{[H]:!0})}function J(t){for(const[e,r]of $)if(r.canHandle(t)){const[_,i]=r.serialize(t);return[{type:"HANDLER",name:e,value:_},i]}return[{type:"RAW",value:t},X.get(t)||[]]}function O(t){switch(t.type){case"HANDLER":return $.get(t.name).deserialize(t.value);case"RAW":return t.value}}function N(t,e,r,_){return new Promise(i=>{const d=ve();e.set(d,i),t.start&&t.start(),t.postMessage(Object.assign({id:d},r),_)})}function ve(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class ke{constructor(){K(this,"inner");this.inner=null}async loadFile(e){await G(),this.inner=new _e(e)}getBounds(){return this.checkReady(),Array.from(this.inner.getBounds())}getInvertedBoundary(){return this.checkReady(),JSON.parse(this.inner.getInvertedBoundary())}renderDebug(){return this.checkReady(),JSON.parse(this.inner.renderDebug())}renderLevelOfService(){return this.checkReady(),JSON.parse(this.inner.renderLevelOfService())}renderCoreNetwork(){return this.checkReady(),JSON.parse(this.inner.renderCoreNetwork())}renderPrecalculatedFlows(){return this.checkReady(),JSON.parse(this.inner.renderPrecalculatedFlows())}toRouteSnapper(){return this.checkReady(),this.inner.toRouteSnapper()}renderRoutes(){return this.checkReady(),JSON.parse(this.inner.renderRoutes())}setRoute(e,r){this.checkReady(),this.inner.setRoute(e??void 0,r)}deleteRoute(e){this.checkReady(),this.inner.deleteRoute(e)}clearAllRoutes(){this.checkReady(),this.inner.clearAllRoutes()}autosplitRoute(e){return this.checkReady(),JSON.parse(this.inner.autosplitRoute(e))}evaluateRoute(e){return this.checkReady(),JSON.parse(this.inner.evaluateRoute({x1:e.start.lng,y1:e.start.lat,x2:e.end[0],y2:e.end[1],breakdown:e.breakdown}))}evaluateOD(e){return this.checkReady(),JSON.parse(this.inner.evaluateOD(e))}recalculateStats(){return this.checkReady(),JSON.parse(this.inner.recalculateStats())}getAreaMeshDensity(){return this.checkReady(),JSON.parse(this.inner.getAreaMeshDensity())}getGridMeshDensity(e,r,_){return this.checkReady(),JSON.parse(this.inner.getGridMeshDensity(e,r,_))}classifyExistingNetwork(){return this.checkReady(),JSON.parse(this.inner.classifyExistingNetwork())}importExistingRoutes(){return this.checkReady(),this.inner.importExistingRoutes()}importCoreNetwork(){return this.checkReady(),this.inner.importCoreNetwork()}toSavefile(){return this.checkReady(),this.inner.toSavefile()}loadSavefile(e){this.checkReady(),this.inner.loadSavefile(e)}getSchools(){return this.checkReady(),JSON.parse(this.inner.getSchools())}getGpHospitals(){return this.checkReady(),JSON.parse(this.inner.getGPHospitals())}getTownCentres(){return this.checkReady(),JSON.parse(this.inner.getTownCentres())}getSettlements(){return this.checkReady(),JSON.parse(this.inner.getSettlements())}getGreenspaces(){return this.checkReady(),JSON.parse(this.inner.getGreenspaces())}getDataZones(){return this.checkReady(),JSON.parse(this.inner.getDataZones())}renderReachableNetwork(){return this.checkReady(),JSON.parse(this.inner.renderReachableNetwork())}debugReachablePath(e,r){return this.checkReady(),JSON.parse(this.inner.debugReachablePath(e,r))}debugUnreachablePath(e,r){return this.checkReady(),JSON.parse(this.inner.debugUnreachablePath(e,r))}getMajorJunctions(){return this.checkReady(),JSON.parse(this.inner.getMajorJunctions())}checkReady(){if(!this.inner)throw new Error("Backend used without a file loaded")}}L(ke)})();
