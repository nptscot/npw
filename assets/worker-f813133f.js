var Se=Object.defineProperty;var Oe=(r,m,f)=>m in r?Se(r,m,{enumerable:!0,configurable:!0,writable:!0,value:f}):r[m]=f;var ee=(r,m,f)=>(Oe(r,typeof m!="symbol"?m+"":m,f),f);(function(){"use strict";let r;const m=new Array(128).fill(void 0);m.push(void 0,null,!0,!1);function f(n){return m[n]}let E=m.length;function te(n){n<132||(m[n]=E,E=n)}function w(n){const e=f(n);return te(n),e}const G=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&G.decode();let x=null;function N(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(r.memory.buffer)),x}function y(n,e){return n=n>>>0,G.decode(N().subarray(n,n+e))}function b(n){E===m.length&&m.push(m.length+1);const e=E;return E=m[e],m[e]=n,e}let p=0;const P=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ne=typeof P.encodeInto=="function"?function(n,e){return P.encodeInto(n,e)}:function(n,e){const t=P.encode(n);return e.set(t),{read:n.length,written:t.length}};function I(n,e,t){if(t===void 0){const c=P.encode(n),s=e(c.length,1)>>>0;return N().subarray(s,s+c.length).set(c),p=c.length,s}let a=n.length,i=e(a,1)>>>0;const d=N();let u=0;for(;u<a;u++){const c=n.charCodeAt(u);if(c>127)break;d[i+u]=c}if(u!==a){u!==0&&(n=n.slice(u)),i=t(i,a,a=u+n.length*3,1)>>>0;const c=N().subarray(i+u,i+a),s=ne(n,c);u+=s.written,i=t(i,a,u,1)>>>0}return p=u,i}function k(n){return n==null}let S=null;function o(){return(S===null||S.buffer.detached===!0||S.buffer.detached===void 0&&S.buffer!==r.memory.buffer)&&(S=new DataView(r.memory.buffer)),S}function B(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let d="[";i>0&&(d+=B(n[0]));for(let u=1;u<i;u++)d+=", "+B(n[u]);return d+="]",d}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let a;if(t.length>1)a=t[1];else return toString.call(n);if(a=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:a}function re(n,e){const t=e(n.length*1,1)>>>0;return N().set(n,t/1),p=n.length,t}let T=null;function ae(){return(T===null||T.byteLength===0)&&(T=new Float64Array(r.memory.buffer)),T}function _e(n,e){return n=n>>>0,ae().subarray(n/8,n/8+e)}let M=null;function ie(){return(M===null||M.byteLength===0)&&(M=new Uint32Array(r.memory.buffer)),M}function F(n,e){const t=e(n.length*4,4)>>>0;return ie().set(n,t/4),p=n.length,t}function R(n,e){try{return n.apply(this,e)}catch(t){r.__wbindgen_exn_store(b(t))}}const H=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_mapmodel_free(n>>>0,1));class oe{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,H.unregister(this),e}free(){const e=this.__destroy_into_raw();r.__wbg_mapmodel_free(e,0)}constructor(e){try{const d=r.__wbindgen_add_to_stack_pointer(-16),u=re(e,r.__wbindgen_malloc),c=p;r.mapmodel_new(d,u,c);var t=o().getInt32(d+4*0,!0),a=o().getInt32(d+4*1,!0),i=o().getInt32(d+4*2,!0);if(i)throw w(a);return this.__wbg_ptr=t>>>0,H.register(this,this.__wbg_ptr,this),this}finally{r.__wbindgen_add_to_stack_pointer(16)}}renderStaticRoads(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_renderStaticRoads(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}renderDynamicRoads(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_renderDynamicRoads(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getInvertedBoundary(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getInvertedBoundary(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getBounds(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getBounds(i,this.__wbg_ptr);var e=o().getInt32(i+4*0,!0),t=o().getInt32(i+4*1,!0),a=_e(e,t).slice();return r.__wbindgen_free(e,t*8,8),a}finally{r.__wbindgen_add_to_stack_pointer(16)}}setRoute(e,t){try{const d=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_setRoute(d,this.__wbg_ptr,!k(e),k(e)?0:e,b(t));var a=o().getInt32(d+4*0,!0),i=o().getInt32(d+4*1,!0);if(i)throw w(a)}finally{r.__wbindgen_add_to_stack_pointer(16)}}deleteRoutes(e){try{const i=r.__wbindgen_add_to_stack_pointer(-16),d=F(e,r.__wbindgen_malloc),u=p;r.mapmodel_deleteRoutes(i,this.__wbg_ptr,d,u);var t=o().getInt32(i+4*0,!0),a=o().getInt32(i+4*1,!0);if(a)throw w(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}changeTier(e,t){try{const d=r.__wbindgen_add_to_stack_pointer(-16),u=F(e,r.__wbindgen_malloc),c=p,s=I(t,r.__wbindgen_malloc,r.__wbindgen_realloc),_=p;r.mapmodel_changeTier(d,this.__wbg_ptr,u,c,s,_);var a=o().getInt32(d+4*0,!0),i=o().getInt32(d+4*1,!0);if(i)throw w(a)}finally{r.__wbindgen_add_to_stack_pointer(16)}}changeInfraType(e,t){try{const d=r.__wbindgen_add_to_stack_pointer(-16),u=F(e,r.__wbindgen_malloc),c=p,s=I(t,r.__wbindgen_malloc,r.__wbindgen_realloc),_=p;r.mapmodel_changeInfraType(d,this.__wbg_ptr,u,c,s,_);var a=o().getInt32(d+4*0,!0),i=o().getInt32(d+4*1,!0);if(i)throw w(a)}finally{r.__wbindgen_add_to_stack_pointer(16)}}clearAllRoutes(){r.mapmodel_clearAllRoutes(this.__wbg_ptr)}autosplitRoute(e,t,a){let i,d;try{const h=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_autosplitRoute(h,this.__wbg_ptr,!k(e),k(e)?0:e,b(t),b(a));var u=o().getInt32(h+4*0,!0),c=o().getInt32(h+4*1,!0),s=o().getInt32(h+4*2,!0),_=o().getInt32(h+4*3,!0),g=u,l=c;if(_)throw g=0,l=0,w(s);return i=g,d=l,y(g,l)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(i,d,1)}}getAllRoutes(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getAllRoutes(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getRoute(e){let t,a;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getRoute(g,this.__wbg_ptr,e);var i=o().getInt32(g+4*0,!0),d=o().getInt32(g+4*1,!0),u=o().getInt32(g+4*2,!0),c=o().getInt32(g+4*3,!0),s=i,_=d;if(c)throw s=0,_=0,w(u);return t=s,a=_,y(s,_)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,a,1)}}evaluateRoute(e){let t,a;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_evaluateRoute(g,this.__wbg_ptr,b(e));var i=o().getInt32(g+4*0,!0),d=o().getInt32(g+4*1,!0),u=o().getInt32(g+4*2,!0),c=o().getInt32(g+4*3,!0),s=i,_=d;if(c)throw s=0,_=0,w(u);return t=s,a=_,y(s,_)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,a,1)}}debugReachablePath(e,t){let a,i;try{const l=r.__wbindgen_add_to_stack_pointer(-16),h=I(e,r.__wbindgen_malloc,r.__wbindgen_realloc),v=p;r.mapmodel_debugReachablePath(l,this.__wbg_ptr,h,v,t);var d=o().getInt32(l+4*0,!0),u=o().getInt32(l+4*1,!0),c=o().getInt32(l+4*2,!0),s=o().getInt32(l+4*3,!0),_=d,g=u;if(s)throw _=0,g=0,w(c);return a=_,i=g,y(_,g)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(a,i,1)}}debugUnreachablePath(e,t){let a,i;try{const l=r.__wbindgen_add_to_stack_pointer(-16),h=I(e,r.__wbindgen_malloc,r.__wbindgen_realloc),v=p;r.mapmodel_debugUnreachablePath(l,this.__wbg_ptr,h,v,t);var d=o().getInt32(l+4*0,!0),u=o().getInt32(l+4*1,!0),c=o().getInt32(l+4*2,!0),s=o().getInt32(l+4*3,!0),_=d,g=u;if(s)throw _=0,g=0,w(c);return a=_,i=g,y(_,g)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(a,i,1)}}fixUnreachablePOI(e,t){let a,i;try{const l=r.__wbindgen_add_to_stack_pointer(-16),h=I(e,r.__wbindgen_malloc,r.__wbindgen_realloc),v=p;r.mapmodel_fixUnreachablePOI(l,this.__wbg_ptr,h,v,t);var d=o().getInt32(l+4*0,!0),u=o().getInt32(l+4*1,!0),c=o().getInt32(l+4*2,!0),s=o().getInt32(l+4*3,!0),_=d,g=u;if(s)throw _=0,g=0,w(c);return a=_,i=g,y(_,g)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(a,i,1)}}evaluateOD(e){let t,a;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_evaluateOD(g,this.__wbg_ptr,e);var i=o().getInt32(g+4*0,!0),d=o().getInt32(g+4*1,!0),u=o().getInt32(g+4*2,!0),c=o().getInt32(g+4*3,!0),s=i,_=d;if(c)throw s=0,_=0,w(u);return t=s,a=_,y(s,_)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,a,1)}}recalculateStats(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_recalculateStats(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getBaselineStats(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getBaselineStats(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}recalculateODStats(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_recalculateODStats(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}toSavefile(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_toSavefile(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}loadSavefile(e){try{const i=r.__wbindgen_add_to_stack_pointer(-16),d=I(e,r.__wbindgen_malloc,r.__wbindgen_realloc),u=p;r.mapmodel_loadSavefile(i,this.__wbg_ptr,d,u);var t=o().getInt32(i+4*0,!0),a=o().getInt32(i+4*1,!0);if(a)throw w(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}getGridMeshDensity(e,t,a){let i,d;try{const h=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getGridMeshDensity(h,this.__wbg_ptr,e,t,a);var u=o().getInt32(h+4*0,!0),c=o().getInt32(h+4*1,!0),s=o().getInt32(h+4*2,!0),_=o().getInt32(h+4*3,!0),g=u,l=c;if(_)throw g=0,l=0,w(s);return i=g,d=l,y(g,l)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(i,d,1)}}importExistingRoutes(e){return r.mapmodel_importExistingRoutes(this.__wbg_ptr,e)>>>0}importCoreNetwork(){return r.mapmodel_importCoreNetwork(this.__wbg_ptr)>>>0}getSchools(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getSchools(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getGPHospitals(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getGPHospitals(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getTownCentres(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getTownCentres(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getSettlements(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getSettlements(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getGreenspaces(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getGreenspaces(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getDataZones(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getDataZones(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}getConnectedComponents(){let e,t;try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getConnectedComponents(_,this.__wbg_ptr);var a=o().getInt32(_+4*0,!0),i=o().getInt32(_+4*1,!0),d=o().getInt32(_+4*2,!0),u=o().getInt32(_+4*3,!0),c=a,s=i;if(u)throw c=0,s=0,w(d);return e=c,t=s,y(c,s)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}snapRoute(e){let t,a;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_snapRoute(g,this.__wbg_ptr,b(e));var i=o().getInt32(g+4*0,!0),d=o().getInt32(g+4*1,!0),u=o().getInt32(g+4*2,!0),c=o().getInt32(g+4*3,!0),s=i,_=d;if(c)throw s=0,_=0,w(u);return t=s,a=_,y(s,_)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,a,1)}}getExtraNodes(e,t){let a,i;try{const l=r.__wbindgen_add_to_stack_pointer(-16);r.mapmodel_getExtraNodes(l,this.__wbg_ptr,b(e),b(t));var d=o().getInt32(l+4*0,!0),u=o().getInt32(l+4*1,!0),c=o().getInt32(l+4*2,!0),s=o().getInt32(l+4*3,!0),_=d,g=u;if(s)throw _=0,g=0,w(c);return a=_,i=g,y(_,g)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(a,i,1)}}}async function se(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(a){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",a);else throw a}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function ce(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){w(e)},n.wbg.__wbindgen_string_new=function(e,t){const a=y(e,t);return b(a)},n.wbg.__wbindgen_string_get=function(e,t){const a=f(t),i=typeof a=="string"?a:void 0;var d=k(i)?0:I(i,r.__wbindgen_malloc,r.__wbindgen_realloc),u=p;o().setInt32(e+4*1,u,!0),o().setInt32(e+4*0,d,!0)},n.wbg.__wbindgen_boolean_get=function(e){const t=f(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_is_bigint=function(e){return typeof f(e)=="bigint"},n.wbg.__wbindgen_number_get=function(e,t){const a=f(t),i=typeof a=="number"?a:void 0;o().setFloat64(e+8*1,k(i)?0:i,!0),o().setInt32(e+4*0,!k(i),!0)},n.wbg.__wbindgen_is_object=function(e){const t=f(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_in=function(e,t){return f(e)in f(t)},n.wbg.__wbindgen_bigint_from_i64=function(e){return b(e)},n.wbg.__wbindgen_jsval_eq=function(e,t){return f(e)===f(t)},n.wbg.__wbindgen_bigint_from_u64=function(e){const t=BigInt.asUintN(64,e);return b(t)},n.wbg.__wbindgen_error_new=function(e,t){const a=new Error(y(e,t));return b(a)},n.wbg.__wbindgen_is_string=function(e){return typeof f(e)=="string"},n.wbg.__wbindgen_is_undefined=function(e){return f(e)===void 0},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return f(e)==f(t)},n.wbg.__wbindgen_as_number=function(e){return+f(e)},n.wbg.__wbg_String_b9412f8799faab3e=function(e,t){const a=String(f(t)),i=I(a,r.__wbindgen_malloc,r.__wbindgen_realloc),d=p;o().setInt32(e+4*1,d,!0),o().setInt32(e+4*0,i,!0)},n.wbg.__wbindgen_object_clone_ref=function(e){const t=f(e);return b(t)},n.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(e,t){const a=f(e)[f(t)];return b(a)},n.wbg.__wbg_debug_5a33c41aeac15ee6=function(e){console.debug(f(e))},n.wbg.__wbg_error_09480e4aadca50ad=function(e){console.error(f(e))},n.wbg.__wbg_info_c261acb2deacd903=function(e){console.info(f(e))},n.wbg.__wbg_log_b103404cc5920657=function(e){console.log(f(e))},n.wbg.__wbg_warn_2b3adb99ce26c314=function(e){console.warn(f(e))},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return b(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const a=f(t).stack,i=I(a,r.__wbindgen_malloc,r.__wbindgen_realloc),d=p;o().setInt32(e+4*1,d,!0),o().setInt32(e+4*0,i,!0)},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){let a,i;try{a=e,i=t,console.error(y(e,t))}finally{r.__wbindgen_free(a,i,1)}},n.wbg.__wbg_performance_a1b8bde2ee512264=function(e){const t=f(e).performance;return b(t)},n.wbg.__wbg_now_abd80e969af37148=function(e){return f(e).now()},n.wbg.__wbg_get_3baa728f9d58d3f6=function(e,t){const a=f(e)[t>>>0];return b(a)},n.wbg.__wbg_length_ae22078168b726f5=function(e){return f(e).length},n.wbg.__wbindgen_is_function=function(e){return typeof f(e)=="function"},n.wbg.__wbg_newnoargs_76313bd6ff35d0f2=function(e,t){const a=new Function(y(e,t));return b(a)},n.wbg.__wbg_next_de3e9db4440638b2=function(e){const t=f(e).next;return b(t)},n.wbg.__wbg_next_f9cb570345655b9a=function(){return R(function(e){const t=f(e).next();return b(t)},arguments)},n.wbg.__wbg_done_bfda7aa8f252b39f=function(e){return f(e).done},n.wbg.__wbg_value_6d39332ab4788d86=function(e){const t=f(e).value;return b(t)},n.wbg.__wbg_iterator_888179a48810a9fe=function(){return b(Symbol.iterator)},n.wbg.__wbg_get_224d16597dbbfd96=function(){return R(function(e,t){const a=Reflect.get(f(e),f(t));return b(a)},arguments)},n.wbg.__wbg_call_1084a111329e68ce=function(){return R(function(e,t){const a=f(e).call(f(t));return b(a)},arguments)},n.wbg.__wbg_self_3093d5d1f7bcb682=function(){return R(function(){const e=self.self;return b(e)},arguments)},n.wbg.__wbg_window_3bcfc4d31bc012f8=function(){return R(function(){const e=window.window;return b(e)},arguments)},n.wbg.__wbg_globalThis_86b222e13bdf32ed=function(){return R(function(){const e=globalThis.globalThis;return b(e)},arguments)},n.wbg.__wbg_global_e5a3fe56f8be9485=function(){return R(function(){const e=global.global;return b(e)},arguments)},n.wbg.__wbg_isArray_8364a5371e9737d8=function(e){return Array.isArray(f(e))},n.wbg.__wbg_instanceof_ArrayBuffer_61dfc3198373c902=function(e){let t;try{t=f(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_call_89af060b4e1523f2=function(){return R(function(e,t,a){const i=f(e).call(f(t),f(a));return b(i)},arguments)},n.wbg.__wbg_instanceof_Map_763ce0e95960d55e=function(e){let t;try{t=f(e)instanceof Map}catch{t=!1}return t},n.wbg.__wbg_isSafeInteger_7f1ed56200d90674=function(e){return Number.isSafeInteger(f(e))},n.wbg.__wbg_entries_7a0e06255456ebcd=function(e){const t=Object.entries(f(e));return b(t)},n.wbg.__wbg_buffer_b7b08af79b0b0974=function(e){const t=f(e).buffer;return b(t)},n.wbg.__wbg_new_ea1883e1e5e86686=function(e){const t=new Uint8Array(f(e));return b(t)},n.wbg.__wbg_set_d1e79e2388520f18=function(e,t,a){f(e).set(f(t),a>>>0)},n.wbg.__wbg_length_8339fcf5d8ecd12e=function(e){return f(e).length},n.wbg.__wbg_instanceof_Uint8Array_247a91427532499e=function(e){let t;try{t=f(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbindgen_bigint_get_as_i64=function(e,t){const a=f(t),i=typeof a=="bigint"?a:void 0;o().setBigInt64(e+8*1,k(i)?BigInt(0):i,!0),o().setInt32(e+4*0,!k(i),!0)},n.wbg.__wbindgen_debug_string=function(e,t){const a=B(f(t)),i=I(a,r.__wbindgen_malloc,r.__wbindgen_realloc),d=p;o().setInt32(e+4*1,d,!0),o().setInt32(e+4*0,i,!0)},n.wbg.__wbindgen_throw=function(e,t){throw new Error(y(e,t))},n.wbg.__wbindgen_memory=function(){const e=r.memory;return b(e)},n}function de(n,e){return r=n.exports,V.__wbindgen_wasm_module=e,S=null,T=null,M=null,x=null,r}async function V(n){if(r!==void 0)return r;typeof n<"u"&&Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead"),typeof n>"u"&&(n=new URL("/npw/assets/backend_bg-4332b82b.wasm",self.location));const e=ce();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:a}=await se(await n,e);return de(t,a)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $=Symbol("Comlink.proxy"),ue=Symbol("Comlink.endpoint"),ge=Symbol("Comlink.releaseProxy"),W=Symbol("Comlink.finalizer"),C=Symbol("Comlink.thrown"),Z=n=>typeof n=="object"&&n!==null||typeof n=="function",fe={canHandle:n=>Z(n)&&n[$],serialize(n){const{port1:e,port2:t}=new MessageChannel;return z(n,e),[t,[t]]},deserialize(n){return n.start(),he(n)}},le={canHandle:n=>Z(n)&&C in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},Y=new Map([["proxy",fe],["throw",le]]);function be(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function z(n,e=globalThis,t=["*"]){e.addEventListener("message",function a(i){if(!i||!i.data)return;if(!be(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:d,type:u,path:c}=Object.assign({path:[]},i.data),s=(i.data.argumentList||[]).map(O);let _;try{const g=c.slice(0,-1).reduce((h,v)=>h[v],n),l=c.reduce((h,v)=>h[v],n);switch(u){case"GET":_=l;break;case"SET":g[c.slice(-1)[0]]=O(i.data.value),_=!0;break;case"APPLY":_=l.apply(g,s);break;case"CONSTRUCT":{const h=new l(...s);_=Ie(h)}break;case"ENDPOINT":{const{port1:h,port2:v}=new MessageChannel;z(n,v),_=ve(h,[h])}break;case"RELEASE":_=void 0;break;default:return}}catch(g){_={value:g,[C]:0}}Promise.resolve(_).catch(g=>({value:g,[C]:0})).then(g=>{const[l,h]=J(g);e.postMessage(Object.assign(Object.assign({},l),{id:d}),h),u==="RELEASE"&&(e.removeEventListener("message",a),q(e),W in n&&typeof n[W]=="function"&&n[W]())}).catch(g=>{const[l,h]=J({value:new TypeError("Unserializable return value"),[C]:0});e.postMessage(Object.assign(Object.assign({},l),{id:d}),h)})}),e.start&&e.start()}function we(n){return n.constructor.name==="MessagePort"}function q(n){we(n)&&n.close()}function he(n,e){const t=new Map;return n.addEventListener("message",function(i){const{data:d}=i;if(!d||!d.id)return;const u=t.get(d.id);if(u)try{u(d)}finally{t.delete(d.id)}}),L(n,t,[],e)}function D(n){if(n)throw new Error("Proxy has been released and is not useable")}function X(n){return A(n,new Map,{type:"RELEASE"}).then(()=>{q(n)})}const U=new WeakMap,j="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(U.get(n)||0)-1;U.set(n,e),e===0&&X(n)});function ye(n,e){const t=(U.get(e)||0)+1;U.set(e,t),j&&j.register(n,e,n)}function pe(n){j&&j.unregister(n)}function L(n,e,t=[],a=function(){}){let i=!1;const d=new Proxy(a,{get(u,c){if(D(i),c===ge)return()=>{pe(d),X(n),e.clear(),i=!0};if(c==="then"){if(t.length===0)return{then:()=>d};const s=A(n,e,{type:"GET",path:t.map(_=>_.toString())}).then(O);return s.then.bind(s)}return L(n,e,[...t,c])},set(u,c,s){D(i);const[_,g]=J(s);return A(n,e,{type:"SET",path:[...t,c].map(l=>l.toString()),value:_},g).then(O)},apply(u,c,s){D(i);const _=t[t.length-1];if(_===ue)return A(n,e,{type:"ENDPOINT"}).then(O);if(_==="bind")return L(n,e,t.slice(0,-1));const[g,l]=K(s);return A(n,e,{type:"APPLY",path:t.map(h=>h.toString()),argumentList:g},l).then(O)},construct(u,c){D(i);const[s,_]=K(c);return A(n,e,{type:"CONSTRUCT",path:t.map(g=>g.toString()),argumentList:s},_).then(O)}});return ye(d,n),d}function me(n){return Array.prototype.concat.apply([],n)}function K(n){const e=n.map(J);return[e.map(t=>t[0]),me(e.map(t=>t[1]))]}const Q=new WeakMap;function ve(n,e){return Q.set(n,e),n}function Ie(n){return Object.assign(n,{[$]:!0})}function J(n){for(const[e,t]of Y)if(t.canHandle(n)){const[a,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:a},i]}return[{type:"RAW",value:n},Q.get(n)||[]]}function O(n){switch(n.type){case"HANDLER":return Y.get(n.name).deserialize(n.value);case"RAW":return n.value}}function A(n,e,t,a){return new Promise(i=>{const d=ke();e.set(d,i),n.start&&n.start(),n.postMessage(Object.assign({id:d},t),a)})}function ke(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class Re{constructor(){ee(this,"inner");this.inner=null}async loadFile(e){await V(),this.inner=new oe(e)}getBounds(){return this.checkReady(),Array.from(this.inner.getBounds())}getInvertedBoundary(){return this.checkReady(),JSON.parse(this.inner.getInvertedBoundary())}renderStaticRoads(){return this.checkReady(),JSON.parse(this.inner.renderStaticRoads())}renderDynamicRoads(){return this.checkReady(),JSON.parse(this.inner.renderDynamicRoads())}getAllRoutes(){return this.checkReady(),JSON.parse(this.inner.getAllRoutes())}getRoute(e){return this.checkReady(),JSON.parse(this.inner.getRoute(e))}setRoute(e,t){this.checkReady(),this.inner.setRoute(e??void 0,t)}deleteRoutes(e){this.checkReady(),this.inner.deleteRoutes(new Uint32Array(e))}changeTier(e,t){this.checkReady(),this.inner.changeTier(new Uint32Array(e),`"${t}"`)}changeInfraType(e,t){this.checkReady(),this.inner.changeInfraType(new Uint32Array(e),`"${t}"`)}clearAllRoutes(){this.checkReady(),this.inner.clearAllRoutes()}autosplitRoute(e,t,a){return this.checkReady(),JSON.parse(this.inner.autosplitRoute(e??void 0,t,a))}evaluateRoute(e){return this.checkReady(),JSON.parse(this.inner.evaluateRoute({x1:e.start.lng,y1:e.start.lat,x2:e.end[0],y2:e.end[1],breakdown:e.breakdown}))}evaluateOD(e){return this.checkReady(),JSON.parse(this.inner.evaluateOD(e))}recalculateStats(){return this.checkReady(),JSON.parse(this.inner.recalculateStats())}getBaselineStats(){return this.checkReady(),JSON.parse(this.inner.getBaselineStats())}recalculateODStats(){return this.checkReady(),JSON.parse(this.inner.recalculateODStats())}getGridMeshDensity(e,t,a){return this.checkReady(),JSON.parse(this.inner.getGridMeshDensity(e,t,a))}importExistingRoutes(e){return this.checkReady(),this.inner.importExistingRoutes(e=="infra-type")}importCoreNetwork(){return this.checkReady(),this.inner.importCoreNetwork()}toSavefile(){return this.checkReady(),this.inner.toSavefile()}loadSavefile(e){this.checkReady(),this.inner.loadSavefile(e)}getSchools(){return this.checkReady(),JSON.parse(this.inner.getSchools())}getGpHospitals(){return this.checkReady(),JSON.parse(this.inner.getGPHospitals())}getTownCentres(){return this.checkReady(),JSON.parse(this.inner.getTownCentres())}getSettlements(){return this.checkReady(),JSON.parse(this.inner.getSettlements())}getGreenspaces(){return this.checkReady(),JSON.parse(this.inner.getGreenspaces())}getDataZones(){return this.checkReady(),JSON.parse(this.inner.getDataZones())}debugReachablePath(e,t){return this.checkReady(),JSON.parse(this.inner.debugReachablePath(e,t))}debugUnreachablePath(e,t){return this.checkReady(),JSON.parse(this.inner.debugUnreachablePath(e,t))}fixUnreachablePOI(e,t){this.checkReady();let a=JSON.parse(this.inner.fixUnreachablePOI(e,t));return a.full_path=a.feature.properties.full_path,a}getConnectedComponents(){return this.checkReady(),JSON.parse(this.inner.getConnectedComponents())}snapRoute(e){return this.checkReady(),JSON.parse(this.inner.snapRoute(e))}getExtraNodes(e,t){return this.checkReady(),JSON.parse(this.inner.getExtraNodes(e,t))}checkReady(){if(!this.inner)throw new Error("Backend used without a file loaded")}}z(Re)})();
