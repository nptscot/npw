import{S as ae,i as se,s as re,e as B,a as u,b as _,t as G,c as A,d as W,f as $,g as ie,h as g,j as r,k as Y,m as N,l as Z,n as P,o as F,p as v,q as ne,r as M,u as ce,v as pe,w as ue,x as oe,y as fe,z as _e}from"./files-ef316d1e.js";import{M as me,m as de,l as $e,s as he,N as ge,G as ve,F as be,h as we,L as ke,P as ye}from"./index-1a4071ee.js";const Ce="/npw/demo/assets/boundaries-c02eb905.geojson";function x(s,t,l){const n=s.slice();return n[8]=t[l],n}function ee(s,t,l){const n=s.slice();return n[11]=t[l],n}function te(s){let t,l=s[11]+"",n,a;return{c(){t=u("option"),n=G(l),t.__value=a=s[11],W(t,t.__value)},m(e,o){g(e,t,o),r(t,n)},p(e,o){o&4&&l!==(l=e[11]+"")&&oe(n,l),o&4&&a!==(a=e[11])&&(t.__value=a,W(t,t.__value))},d(e){e&&v(t)}}}function je(s){let t,l,n,a=B(s[3]),e=[];for(let o=0;o<a.length;o+=1)e[o]=le(x(s,a,o));return{c(){t=u("h3"),t.textContent="Recently used areas",l=_(),n=u("ul");for(let o=0;o<e.length;o+=1)e[o].c()},m(o,c){g(o,t,c),g(o,l,c),g(o,n,c);for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(n,null)},p(o,c){if(c&8){a=B(o[3]);let p;for(p=0;p<a.length;p+=1){const w=x(o,a,p);e[p]?e[p].p(w,c):(e[p]=le(w),e[p].c(),e[p].m(n,null))}for(;p<e.length;p+=1)e[p].d(1);e.length=a.length}},d(o){o&&(v(t),v(l),v(n)),ne(e,o)}}}function le(s){let t,l,n=he(s[8],"LAD_")+"",a,e;return{c(){t=u("li"),l=u("a"),a=G(n),e=_(),$(l,"href",`npw.html?boundary=${s[8]}`)},m(o,c){g(o,t,c),r(t,l),r(l,a),r(t,e)},p:fe,d(o){o&&v(t)}}}function Le(s){let t,l=s[7].name+"",n;return{c(){t=u("p"),n=G(l)},m(a,e){g(a,t,e),r(t,n)},p(a,e){e&128&&l!==(l=a[7].name+"")&&oe(n,l)},d(a){a&&v(t)}}}function Se(s){let t,l;return t=new ye({props:{openOn:"hover",$$slots:{default:[Le,({props:n})=>({7:n}),({props:n})=>n?128:0]},$$scope:{ctx:s}}}),{c(){A(t.$$.fragment)},m(n,a){N(t,n,a),l=!0},p(n,a){const e={};a&16512&&(e.$$scope={dirty:a,ctx:n}),t.$set(e)},i(n){l||(P(t.$$.fragment,n),l=!0)},o(n){F(t.$$.fragment,n),l=!1},d(n){M(t,n)}}}function Ae(s){let t,l,n,a;return t=new be({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":we(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Se]},$$scope:{ctx:s}}}),t.$on("click",Fe),n=new ke({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels"}}),{c(){A(t.$$.fragment),l=_(),A(n.$$.fragment)},m(e,o){N(t,e,o),g(e,l,o),N(n,e,o),a=!0},p(e,o){const c={};o&16384&&(c.$$scope={dirty:o,ctx:e}),t.$set(c)},i(e){a||(P(t.$$.fragment,e),P(n.$$.fragment,e),a=!0)},o(e){F(t.$$.fragment,e),F(n.$$.fragment,e),a=!1},d(e){e&&v(l),M(t,e),M(n,e)}}}function Ne(s){let t,l,n,a;return t=new ge({props:{showCompass:!1,position:"top-right"}}),n=new ve({props:{data:s[0],generateId:!0,$$slots:{default:[Ae]},$$scope:{ctx:s}}}),{c(){A(t.$$.fragment),l=_(),A(n.$$.fragment)},m(e,o){N(t,e,o),g(e,l,o),N(n,e,o),a=!0},p(e,o){const c={};o&1&&(c.data=e[0]),o&16384&&(c.$$scope={dirty:o,ctx:e}),n.$set(c)},i(e){a||(P(t.$$.fragment,e),P(n.$$.fragment,e),a=!0)},o(e){F(t.$$.fragment,e),F(n.$$.fragment,e),a=!1},d(e){e&&v(l),M(t,e),M(n,e)}}}function Pe(s){let t,l,n,a,e,o,c,p,w,j,D,z,L,m,I,E,H,J,k,K,R,U,Q,q,b,T,O,V,S=B(s[2]),f=[];for(let i=0;i<S.length;i+=1)f[i]=te(ee(s,S,i));let y=s[3].length>0&&je(s);return b=new me({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${de}`,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[Ne]},$$scope:{ctx:s}}}),b.$on("error",s[6]),{c(){t=u("div"),l=u("div"),n=u("p"),n.innerHTML=`<a href="https://www.npt.scot/"><img src="${$e}" alt="NPT logo"/></a>`,a=_(),e=u("h1"),e.textContent="Network Planning Workspace",o=_(),c=u("p"),c.textContent=`The NPW is designed to enable local authorities to plan a cycle network
      for the area, using segregated infrastructure on key routes and ensuring
      local places are properly connected without severance.`,p=_(),w=u("h3"),w.innerHTML='<label class="ds_label" for="component">Select an area</label>',j=_(),D=u("p"),D.textContent="Select your area from this list, or click on the map, to start.",z=_(),L=u("div"),m=u("select"),I=u("option");for(let i=0;i<f.length;i+=1)f[i].c();E=_(),H=u("span"),J=_(),k=u("button"),K=G("Start"),U=_(),y&&y.c(),Q=_(),q=u("div"),A(b.$$.fragment),I.__value="",W(I,I.__value),$(m,"class","ds_select"),$(m,"id","component"),$(m,"name","component"),s[1]===void 0&&ie(()=>s[4].call(m)),$(H,"class","ds_select-arrow"),$(H,"aria-hidden","true"),$(L,"class","ds_select-wrapper"),$(k,"class","ds_button"),k.disabled=R=s[1]=="",$(l,"class","controls svelte-m802nj"),$(q,"class","map svelte-m802nj"),$(t,"class","container svelte-m802nj")},m(i,h){g(i,t,h),r(t,l),r(l,n),r(l,a),r(l,e),r(l,o),r(l,c),r(l,p),r(l,w),r(l,j),r(l,D),r(l,z),r(l,L),r(L,m),r(m,I);for(let C=0;C<f.length;C+=1)f[C]&&f[C].m(m,null);Y(m,s[1],!0),r(L,E),r(L,H),r(l,J),r(l,k),r(k,K),r(l,U),y&&y.m(l,null),r(t,Q),r(t,q),N(b,q,null),T=!0,O||(V=[Z(m,"change",s[4]),Z(k,"click",s[5])],O=!0)},p(i,[h]){if(h&4){S=B(i[2]);let d;for(d=0;d<S.length;d+=1){const X=ee(i,S,d);f[d]?f[d].p(X,h):(f[d]=te(X),f[d].c(),f[d].m(m,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=S.length}h&6&&Y(m,i[1]),(!T||h&6&&R!==(R=i[1]==""))&&(k.disabled=R),i[3].length>0&&y.p(i,h);const C={};h&16385&&(C.$$scope={dirty:h,ctx:i}),b.$set(C)},i(i){T||(P(b.$$.fragment,i),T=!0)},o(i){F(b.$$.fragment,i),T=!1},d(i){i&&v(t),ne(f,i),y&&y.d(),M(b),O=!1,ce(V)}}}function Fe(s){let t=s.detail.features[0].properties;window.location.href=`npw.html?boundary=LAD_${t.name}`}function Me(s,t,l){let n={type:"FeatureCollection",features:[]},a="",e=[],o=[...pe().keys()];o.sort(),ue(async()=>{window.DS.initAll();let j=await fetch(Ce);l(0,n=await j.json());for(let D of n.features)e.push(D.properties.name);e.sort(),l(2,e)});function c(){a=_e(this),l(1,a),l(2,e)}return[n,a,e,o,c,()=>window.location.href=`npw.html?boundary=LAD_${a}`,j=>{console.log(j.detail.error)}]}class De extends ae{constructor(t){super(),se(this,t,Me,Pe,re,{})}}new De({target:document.getElementById("app")});
